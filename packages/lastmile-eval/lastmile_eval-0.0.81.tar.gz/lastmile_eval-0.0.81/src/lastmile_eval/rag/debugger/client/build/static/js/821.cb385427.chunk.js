(self.webpackChunklm_rag_debugger=self.webpackChunklm_rag_debugger||[]).push([[821],{5821:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(3069),l=a(1740),i=a(6395),r=a(2002),o=a(2932),n=a(1931),c=a(3488),p=a.n(c),h=a(4999),u=a.n(h),d=a(5043),f=a(3502),m=a.n(f),x=a(7987),y=a(362),g=a(7950),v=(0,a(7391).A)("list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]),C=a(3536),b=a(579);function A(e){if("number"===typeof e)return e.toString();if("string"===typeof e)try{const t=(0,x.qF)(e);return JSON.stringify(t)}catch{return e}try{return JSON.stringify(e)}catch{return""}}function P(e){if("number"===typeof e)return e;if("string"===typeof e)try{const t=JSON.parse(e);if("number"===typeof t)return t}catch{return null}return null}function j(e){let{evaluationSets:t}=e;const a=(0,d.useRef)(null),{paramCategories:c,metricCategories:h,evalSetNames:f}=(0,d.useMemo)((()=>{const e={},a={},s=[];return t.forEach((t=>{var l,i;s.push(t.name),Object.keys(null!==(l=t.paramSet)&&void 0!==l?l:{}).forEach((a=>{var s;e[a]||(e[a]={categoryIdx:0,categoryIdxMap:{}});const l=null!==(s=P(t.paramSet[a]))&&void 0!==s?s:A(t.paramSet[a]);null==e[a].categoryIdxMap[l]&&(e[a].categoryIdxMap[l]=e[a].categoryIdx,e[a].categoryIdx++)})),null===(i=t.evaluationSetMetrics)||void 0===i||i.forEach((e=>{var t;a[e.metricName]||(a[e.metricName]={categoryIdx:0,categoryIdxMap:{}});const s=null!==(t=P(e.metricValue))&&void 0!==t?t:A(e.metricValue);null==a[e.metricName].categoryIdxMap[s]&&(a[e.metricName].categoryIdxMap[s]=a[e.metricName].categoryIdx,a[e.metricName].categoryIdx++)}))})),{paramCategories:e,metricCategories:a,evalSetNames:s}}),[t]),m=(0,d.useMemo)((()=>["Evaluation Run",...Object.keys(c),...Object.keys(h)]),[c,h]),[x,j]=(0,d.useState)(m.reduce(((e,t)=>(e[t]=!0,e)),{})),[M,I]=(0,d.useState)(0),k=(0,d.useMemo)((()=>m.filter((e=>!1!==x[e]))),[m,x]),E=(0,d.useMemo)((()=>(0,C.pickBy)(c,((e,t)=>x[t]))),[c,x]),S=(0,d.useMemo)((()=>(0,C.pickBy)(h,((e,t)=>x[t]))),[h,x]),{yAxisOptions:O,series:N}=(0,d.useMemo)((()=>{const e=t.map(((e,t)=>{const a=[];return k.includes("Evaluation Run")&&a.push(t),Object.entries(E).forEach((t=>{var s;let[l,i]=t;const r=null===(s=e.paramSet)||void 0===s?void 0:s[l];var o;null==r?a.push(null):a.push(null!==(o=P(r))&&void 0!==o?o:i.categoryIdxMap[A(r)])})),Object.entries(S).forEach((t=>{var s;let[l,i]=t;const r=null===(s=e.evaluationSetMetrics)||void 0===s?void 0:s.find((e=>e.metricName===l));var o;null==r?a.push(null):a.push(null!==(o=P(r.metricValue))&&void 0!==o?o:i.categoryIdxMap[A(r.metricValue)])})),{type:"spline",name:e.name,data:a,shadow:!1,color:"rgba(11, 200, 200, 0.25)"}})),a=Object.values(E).map((e=>null!=P(Object.keys(e.categoryIdxMap)[0])?{}:{type:"category",categories:Object.keys(e.categoryIdxMap).map(A)})),s=Object.values(S).map((e=>null!=P(Object.keys(e.categoryIdxMap)[0])?{softMin:.5,softMax:1}:{type:"category",categories:Object.keys(e.categoryIdxMap).map(A)}));return{yAxisOptions:[k.includes("Evaluation Run")?{type:"category",categories:f}:null,...a,...s].filter((e=>null!=e)),series:e}}),[f,t,S,E,k]),w=(0,d.useMemo)((()=>({accessibility:{enabled:!1},credits:{enabled:!1},chart:{type:"spline",parallelCoordinates:!0,marginLeft:0,parallelAxes:{lineWidth:2}},title:{text:""},plotOptions:{series:{animation:!0,marker:{enabled:!1,states:{hover:{enabled:!0}}},states:{hover:{halo:{size:0}}}}},tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span>{series.name}: <b>{point.formattedValue}</b><br/>'},xAxis:{categories:k},yAxis:O,series:N})),[N,k,O]),X=(0,y.U)(),[L,V]=(0,d.useState)(null),[D,T]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{V(document.getElementById("chart-action-button"))}),[]),(0,b.jsxs)(b.Fragment,{children:[null!=L&&(0,g.createPortal)((0,b.jsx)("div",{children:(0,b.jsxs)(s.A,{opened:D,onClose:()=>T(!1),offset:0,children:[(0,b.jsx)(s.A.Target,{children:(0,b.jsx)(l.m,{label:"Configure Chart",withArrow:!0,position:"left",children:(0,b.jsx)("div",{children:(0,b.jsx)(i.$,{variant:"default",size:"sm",mb:"sm",px:"sm",onClick:()=>T((e=>!e)),children:(0,b.jsx)(v,{size:14})})})})}),(0,b.jsx)(s.A.Dropdown,{children:(0,b.jsx)(r.B,{spacing:"xs",children:m.map((e=>(0,b.jsx)(o.S,{label:e,checked:x[e],onChange:()=>{j((t=>{var a;return{...t,[e]:!(null===(a=t[e])||void 0===a||a)}})),I((e=>e+1))}},e)))})})]})}),L),(0,b.jsx)(n.a,{h:"100%",w:"100%",className:"highcharts-container-theme-".concat(X),children:(0,b.jsx)(u(),{highcharts:p(),options:w,ref:a},"parallel-coordinates-chart-".concat(M))})]})}m()(p())},3502:(e,t,a)=>{var s,l,i;i=function(e){"use strict";var t=e?e._modules:{};function a(e,t,a,s){e.hasOwnProperty(t)||(e[t]=s.apply(null,a),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}a(t,"Extensions/ParallelCoordinates/ParallelCoordinatesDefaults.js",[],(function(){return{chart:{parallelCoordinates:!1,parallelAxes:{lineWidth:1,title:{text:"",reserveSpace:!1},labels:{x:0,y:4,align:"center",reserveSpace:!1},offset:0}},xAxis:{lineWidth:0,tickLength:0,opposite:!0,type:"category"}}})),a(t,"Extensions/ParallelCoordinates/ParallelAxis.js",[t["Extensions/ParallelCoordinates/ParallelCoordinatesDefaults.js"],t["Core/Utilities.js"]],(function(e,t){var a;let{addEvent:s,arrayMax:l,arrayMin:i,isNumber:r,merge:o,pick:n,splat:c}=t;class p{constructor(e){this.axis=e}setPosition(e,t){let a=this.axis,s=a.chart,l=((this.position||0)+.5)/(s.parallelInfo.counter+1);s.polar?t.angle=360*l:(t[e[0]]=100*l+"%",a[e[1]]=t[e[1]]=0,a[e[2]]=t[e[2]]=null,a[e[3]]=t[e[3]]=null)}}return function(t){function a(t){let a=this.chart,s=this.parallelCoordinates,l=["left","width","height","top"];if(a.hasParallelCoordinates)if(a.inverted&&(l=l.reverse()),this.isXAxis)this.options=o(this.options,e.xAxis,t.userOptions);else{let e=a.yAxis.indexOf(this);this.options=o(this.options,this.chart.options.chart.parallelAxes,t.userOptions),s.position=n(s.position,e>=0?e:a.yAxis.length),s.setPosition(l,this.options)}}function h(e){let t=this.chart,a=this.parallelCoordinates;if(a&&t&&t.hasParallelCoordinates&&!this.isXAxis){let t=a.position,s=[];this.series.forEach((function(e){if(e.yData&&e.visible&&r(t)){let a=e.yData[t];s.push.apply(s,c(a))}})),s=s.filter(r),this.dataMin=i(s),this.dataMax=l(s),e.preventDefault()}}function u(){this.parallelCoordinates||(this.parallelCoordinates=new p(this))}t.compose=function(e){e.keepProps.includes("parallel")||(e.keepProps.push("parallel"),s(e,"init",u),s(e,"afterSetOptions",a),s(e,"getSeriesExtremes",h))}}(a||(a={})),a})),a(t,"Extensions/ParallelCoordinates/ParallelSeries.js",[t["Core/Globals.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],(function(e,t,a){var s;let{composed:l}=e,{format:i}=t,{addEvent:r,defined:o,erase:n,extend:c,insertItem:p,isArray:h,isNumber:u,pick:d,pushUnique:f,wrap:m}=a;return function(e){function t(){let e,t,a=this.chart,s=this.points,l=s&&s.length,i=Number.MAX_VALUE;if(this.chart.hasParallelCoordinates){for(let r=0;r<l;r++)o((t=s[r]).y)?(a.polar?t.plotX=a.yAxis[r].angleRad||0:a.inverted?t.plotX=a.plotHeight-a.yAxis[r].top+a.plotTop:t.plotX=a.yAxis[r].left-a.plotLeft,t.clientX=t.plotX,t.plotY=a.yAxis[r].translate(t.y,!1,!0,void 0,!0),u(t.high)&&(t.plotHigh=a.yAxis[r].translate(t.high,!1,!0,void 0,!0)),void 0!==e&&(i=Math.min(i,Math.abs(t.plotX-e))),e=t.plotX,t.isInside=a.isInsidePlot(t.plotX,t.plotY,{inverted:a.inverted})):t.isNull=!0;this.closestPointRangePx=i}}function a(e){let t=this.chart;if(t.hasParallelCoordinates){for(let e of t.axes)p(this,e.series),e.isDirty=!0;this.xAxis=t.xAxis[0],this.yAxis=t.yAxis[0],e.preventDefault()}}function s(){let e=this.chart;if(e.hasParallelCoordinates)for(let t of e.axes||[])t&&t.series&&(n(t.series,this),t.isDirty=t.forceRedraw=!0)}function x(e){let t,a,s,l,r=this.series&&this.series.chart,n=e.apply(this,[].slice.call(arguments,1));return r&&r.hasParallelCoordinates&&!o(n.formattedValue)&&(t=(s=d((a=(l=r.yAxis[this.x]).options).tooltipValueFormat,a.labels.format))?i(s,c(this,{value:this.y}),r):l.dateTime?r.time.dateFormat(r.time.resolveDTLFormat(a.dateTimeLabelFormats[l.tickPositions.info.unitName]).main,this.y):h(a.categories)?a.categories[this.y]:this.y,n.formattedValue=n.point.formattedValue=t),n}e.compose=function(e){if(f(l,"ParallelSeries")){let{line:{prototype:{pointClass:l}},spline:{prototype:{pointClass:i}}}=e.types;r(e,"afterTranslate",t,{order:1}),r(e,"bindAxes",a),r(e,"destroy",s),l&&m(l.prototype,"getLabelConfig",x),i&&m(i.prototype,"getLabelConfig",x)}}}(s||(s={})),s})),a(t,"Extensions/ParallelCoordinates/ParallelCoordinates.js",[t["Extensions/ParallelCoordinates/ParallelAxis.js"],t["Extensions/ParallelCoordinates/ParallelCoordinatesDefaults.js"],t["Extensions/ParallelCoordinates/ParallelSeries.js"],t["Core/Utilities.js"]],(function(e,t,a,s){var l;let{addEvent:i,defined:r,merge:o,splat:n}=s;class c{constructor(e){this.chart=e}setParallelInfo(e){let t=this.chart||this,a=e.series;for(let s of(t.parallelInfo={counter:0},a))s.data&&(t.parallelInfo.counter=Math.max(t.parallelInfo.counter,s.data.length-1))}}return function(s){function l(e){let a=e.args[0],s=n(a.yAxis||{}),l=[],i=s.length;if(this.hasParallelCoordinates=a.chart&&a.chart.parallelCoordinates,this.hasParallelCoordinates){for(this.setParallelInfo(a);i<=this.parallelInfo.counter;i++)l.push({});a.legend||(a.legend={}),a.legend&&void 0===a.legend.enabled&&(a.legend.enabled=!1),o(!0,a,{boost:{seriesThreshold:Number.MAX_VALUE},plotOptions:{series:{boostThreshold:Number.MAX_VALUE}}}),a.yAxis=s.concat(l),a.xAxis=o(t.xAxis,n(a.xAxis||{})[0])}}function p(e){let t=e.options;if(t.chart&&(r(t.chart.parallelCoordinates)&&(this.hasParallelCoordinates=t.chart.parallelCoordinates),this.options.chart.parallelAxes=o(this.options.chart.parallelAxes,t.chart.parallelAxes)),this.hasParallelCoordinates)for(let a of(t.series&&this.setParallelInfo(t),this.yAxis))a.update({},!1)}s.compose=function(s,r,n,h){e.compose(s),a.compose(h);let u=c.prototype,d=r.prototype;d.setParallelInfo||(d.setParallelInfo=u.setParallelInfo,i(r,"init",l),i(r,"update",p),o(!0,n.chart,t.chart))}}(l||(l={})),l})),a(t,"masters/modules/parallel-coordinates.src.js",[t["Core/Globals.js"],t["Extensions/ParallelCoordinates/ParallelCoordinates.js"]],(function(e,t){return t.compose(e.Axis,e.Chart,e.defaultOptions,e.Series),e}))},e.exports?(i.default=i,e.exports=i):(s=[a(3488)],void 0===(l=function(e){return i(e),i.Highcharts=e,i}.apply(t,s))||(e.exports=l))}}]);
//# sourceMappingURL=821.cb385427.chunk.js.map