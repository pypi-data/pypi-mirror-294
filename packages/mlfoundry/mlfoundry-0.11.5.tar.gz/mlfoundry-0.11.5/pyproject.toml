[tool.poetry]
name = "mlfoundry"
version = "0.11.5" # do not change, auto-generated by poetry-dynamic-versioning
description = "Truefoundry's Experiment Tracking, Model Registry and Model Monitoring Library"
authors = ["Abhishek Choudhary <abhichoudhary06@gmail.com>"]
homepage = "https://truefoundry.com"
repository = "https://github.com/truefoundry/mlfoundry"
readme = "README.md"
packages = [
    { include = "mlfoundry" },
]

[tool.poetry.dependencies]
# Note: Do not use ^ or ~. They can cause unecessary confusion
# TODO (chiragjn): Ideally no upper limit should be put on packages because that makes
#    upgrading impossible for users, even if they only want partial compatible features
python = ">=3.8,<4"
GitPython = ">=3.1.41,<4.0.0"
PyJWT = ">=2.4.0,<3.0.0"
click = ">=8.0.0,<9.0.0"
coolname = ">=1.1.0,<2.0.0"
filelock = ">=3.8.0,<4.0.0"
psutil = ">=5.9.0,<7.0.0"
pydantic = ">=1.8.2,<3.0.0"
rich = ">=13.7,<14.0"
tfy-mlflow-client = "0.0.56"
tqdm = ">=4.62.3,<5.0.0"
urllib3 = ">=1.26.18,<3"
# Check and try to eliminate libs below this comment
importlib-metadata = ">=4.11.3,<8.0.0"
numpy = [
    # This is split into two because poetry will select a version which has no wheel on python >= 3.12 :/
    { version = ">=1.23.0,<2.0.0", python = "<3.12" },
    { version = ">=1.26.0,<2.0.0", python = ">=3.12" },
]
pandas = [
    # This is split into two because poetry will select a version which has no wheel on python >= 3.10 :/
    { version = ">=1.0.0,<3.0.0", python = "<3.10" },
    { version = ">=1.4.0,<3.0.0", python = ">=3.10" },
]
scikit-learn =  [
    # This is split into two because poetry will select a version which has no wheel on python >= 3.10 :/
    { version = ">=0.24.2,<2.0.0", python = "<3.10" },
    { version = ">=1.0.2,<3.0.0", python = ">=3.10" },
]

[tool.poetry.dev-dependencies]
pre-commit = "2.21.0"
pytest = ">=7.2.0,<7.3.0"
Pillow = ">=9.1.1,<11.0.0"
doq = ">=0.9.1,<1.0.0"
ipython = ">=7.10.0"
ipykernel = ">=6.16.0"
lazydocs = ">=0.4.8,<0.5.0"
matplotlib = ">=3.0.0,<4.0.0"
mypy = ">=0.950"
plotly = ">=5.8.2,<6.0.0"
seaborn = ">=0.13.0,<0.14.0"
shap = ">=0.40.0"
transformers = ">=4.36.0,<5.0.0"


[[tool.poetry.source]]
name = "pypi"
priority = "primary"

[[tool.poetry.source]]
name = "torch"
url = "https://download.pytorch.org/whl/cpu"
priority = "explicit"

[tool.poetry-dynamic-versioning]
enable = false

[tool.poetry.plugins."console_scripts"]
mlfoundry = "mlfoundry.cli.cli_interface:create_mlfoundry_cli"

[tool.black]
line-length = 88
safe = true
target_version = ["py38", "py39", "py310"]

[tool.isort]
profile = "black"

[build-system]
requires = ["poetry-core>=1.0.0", "poetry-dynamic-versioning"]
build-backend = "poetry.core.masonry.api"

[tool.pytest.ini_options]
markers = []
addopts = "--ignore=tests/end_to_end.py"
