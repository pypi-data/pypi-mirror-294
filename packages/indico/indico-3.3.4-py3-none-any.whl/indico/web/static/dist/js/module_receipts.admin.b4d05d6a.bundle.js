"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[1838],{37168:(e,t,a)=>{var n=a(86326),i=a(35623),r=a(77940),c=a(29079),s=a(97598),o=a.n(s),l=a(80841),d=a(58591),m=a(87597),u=a(6305),y=a(59865),p=a(96478),g=a(67599),f=a(49528),D=a(87493),v=a.n(D),_=a(54219),h=a(47279),b=a(75313),E=a(49138);const w=o().shape({event_id:o().number,category_id:o().number}),j=o().shape({id:o().number,title:o().string,html:o().string,css:o().string,customFields:o().array,owner:o().shape({id:o().number,title:o().string,locator:o().object})}),T=o().shape({title:o().string.isRequired,version:o().number.isRequired}),A=c.Ay.bind(null,{endpoint:"receipts.add_default_template",rules:[{args:["event_id","object_type","template_name"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_name",isDynamic:!0}]},{args:["category_id","object_type","template_name"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_name",isDynamic:!0}]}]},"/"),C=c.Ay.bind(null,{endpoint:"receipts.add_template_page",rules:[{args:["event_id","object_type"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1}]},{args:["category_id","object_type"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1}]}]},"/"),O=c.Ay.bind(null,{endpoint:"receipts.clone_template",rules:[{args:["event_id","object_type","template_id"],converters:{event_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"clone",isDynamic:!1}]},{args:["category_id","object_type","template_id"],converters:{category_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"clone",isDynamic:!1}]}]},"/"),R=c.Ay.bind(null,{endpoint:"receipts.delete_template",rules:[{args:["event_id","object_type","template_id"],converters:{event_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]},{args:["category_id","object_type","template_id"],converters:{category_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]}]},"/"),I=c.Ay.bind(null,{endpoint:"receipts.template",rules:[{args:["event_id","object_type","template_id"],converters:{event_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]},{args:["category_id","object_type","template_id"],converters:{category_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]}]},"/"),M=c.Ay.bind(null,{endpoint:"receipts.template_list",rules:[{args:["event_id","object_type"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1}]},{args:["category_id","object_type"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/"),L=c.Ay.bind(null,{endpoint:"receipts.template_preview",rules:[{args:["event_id","object_type","template_id"],converters:{event_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"preview-template",isDynamic:!1}]},{args:["category_id","object_type","template_id"],converters:{category_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"preview-template",isDynamic:!1}]}]},"/");function P({template:{id:e,type:t,title:a,owner:i},dispatch:r,setDeletePrompt:c,targetLocator:s,inherited:o}){const l={receipt:{color:"red",text:p.Translate.string("Receipt")},certificate:{color:"blue",text:p.Translate.string("Certificate")}}[t];return n.createElement("tr",null,n.createElement("td",{className:"i-table id-column"},n.createElement("i",{className:"icon-agreement"})),n.createElement("td",null,a,l&&n.createElement(_.A,{size:"small",style:{marginLeft:"1em"},color:l.color,basic:!0},l.text)),n.createElement("td",{className:"text-superfluous"},o&&("event_id"in i.locator?n.createElement(p.Translate,null,"from event"," ",n.createElement(p.Param,{name:"title",value:i.title,wrapper:n.createElement("a",{href:M(i.locator)})})):n.createElement(p.Translate,null,"from category"," ",n.createElement(p.Param,{name:"title",value:i.title,wrapper:n.createElement("a",{href:M(i.locator)})})))),n.createElement("td",{className:"receipts-client-js-templates-___TemplateListPane-module__template-actions___Tdv2v"},n.createElement("div",{className:"thin toolbar right"},n.createElement("a",{href:L({template_id:e,...s})},n.createElement(h.A,{name:"eye",color:"blue",title:p.Translate.string("Preview template")})),!o&&n.createElement(d.Link,{to:I({template_id:e,...s}),onClick:e=>e.target.dispatchEvent(new Event("indico:closeAutoTooltip"))},n.createElement(h.A,{name:"edit",color:"blue",title:p.Translate.string("Edit template")})),n.createElement(h.A,{name:"clone",color:"blue",title:p.Translate.string("Clone template"),onClick:t=>{t.target.dispatchEvent(new Event("indico:closeAutoTooltip")),(async()=>{try{const{data:t}=await f.indicoAxios.post(O({template_id:e,...s}));r({type:"ADD_TEMPLATE",template:t})}catch(e){(0,f.handleAxiosError)(e)}})()}}),!o&&c&&n.createElement(h.A,{name:"trash",color:"red",title:p.Translate.string("Delete template"),onClick:t=>{t.target.dispatchEvent(new Event("indico:closeAutoTooltip")),c({title:a,func:()=>(async()=>{try{await f.indicoAxios.delete(R({template_id:e,...s})),r({type:"DELETE_TEMPLATE",id:e})}catch(e){return(0,f.handleAxiosError)(e),!0}})()})}}))))}function S({ownTemplates:e,inheritedTemplates:t,otherTemplates:a,defaultTemplates:i,targetLocator:r,dispatch:c}){const[s,o]=(0,n.useState)(null);return n.createElement("div",{className:"receipts-client-js-templates-___TemplateListPane-module__template-list___JGHbb"},n.createElement(u.RequestConfirmDelete,{onClose:()=>o(null),requestFunc:s?.func||(()=>null),open:null!==s},n.createElement(p.Translate,null,"Are you sure you want to delete the template"," ",n.createElement(p.Param,{name:"template",value:s?.title,wrapper:n.createElement("strong",null)}),"?")),!!t.length&&n.createElement("section",null,n.createElement("h3",null,n.createElement(p.Translate,null,"Inherited templates")),n.createElement("table",{className:"i-table-widget"},n.createElement("tbody",null,v()(t,"title").map((e=>n.createElement(P,{key:e.id,template:e,dispatch:c,targetLocator:r,inherited:!0})))))),!!a.length&&n.createElement("section",null,n.createElement(b.A,{panels:[{key:"other",title:{content:n.createElement("h4",null,n.createElement(p.Translate,null,"Other templates"))},content:{content:n.createElement("table",{className:"i-table-widget"},n.createElement("tbody",null,v()(a,"title").map((e=>n.createElement(P,{key:e.id,template:e,dispatch:c,targetLocator:r,inherited:!0})))))}}]})),n.createElement("section",null,n.createElement("div",{className:"flexrow f-a-center f-j-space-between"},n.createElement("h3",null,n.createElement(p.Translate,null,"Custom templates")),n.createElement(E.A,{button:!0,labeled:!0,title:p.Translate.string("Add a new template"),icon:"plus",text:p.Translate.string("Add new"),className:"mini primary icon",direction:"left"},n.createElement(E.A.Menu,null,n.createElement(E.A.Item,{as:d.Link,to:C(r),text:p.Translate.string("Blank template")}),v()(Object.entries(i),(([,e])=>e.title)).map((([e,{title:t,version:a}])=>n.createElement(E.A.Item,{key:e,as:d.Link,to:A({...r,template_name:e}),text:`${t} (v${a})`})))))),e.length?n.createElement("table",{className:"i-table-widget"},n.createElement("tbody",null,v()(e,"title").map((e=>n.createElement(P,{key:e.id,template:e,dispatch:c,setDeletePrompt:o,targetLocator:r}))))):n.createElement("div",{className:"italic text-not-important"},n.createElement(p.Translate,null,"No templates"))))}P.propTypes={template:j.isRequired,dispatch:o().func.isRequired,setDeletePrompt:o().func,targetLocator:w.isRequired,inherited:o().bool},P.defaultProps={inherited:!1,setDeletePrompt:null},S.propTypes={ownTemplates:o().arrayOf(j).isRequired,inheritedTemplates:o().arrayOf(j).isRequired,otherTemplates:o().arrayOf(j).isRequired,defaultTemplates:o().objectOf(T).isRequired,dispatch:o().func.isRequired,targetLocator:w.isRequired};var k=a(68373),x=a.n(k),q=a(52379),N=a(57427),F=a(45423),V=a(78434),B=a.n(V);function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){U(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function G(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function K(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(Object(a),!0).forEach((function(t){K(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function J(e){return function t(){for(var a=this,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return i.length>=e.length?e.apply(this,i):function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(a,[].concat(i,n))}}}function Q(e){return{}.toString.call(e).includes("Object")}function X(e){return"function"==typeof e}var Z=J((function(e,t){throw new Error(e[t]||e.default)}))({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),ee={changes:function(e,t){return Q(t)||Z("changeType"),Object.keys(t).some((function(t){return a=e,n=t,!Object.prototype.hasOwnProperty.call(a,n);var a,n}))&&Z("changeField"),t},selector:function(e){X(e)||Z("selectorType")},handler:function(e){X(e)||Q(e)||Z("handlerType"),Q(e)&&Object.values(e).some((function(e){return!X(e)}))&&Z("handlersType")},initial:function(e){var t;e||Z("initialIsRequired"),Q(e)||Z("initialType"),t=e,Object.keys(t).length||Z("initialContent")}};function te(e,t){return X(t)?t(e.current):t}function ae(e,t){return e.current=Y(Y({},e.current),t),t}function ne(e,t,a){return X(t)?t(e.current):Object.keys(a).forEach((function(a){var n;return null===(n=t[a])||void 0===n?void 0:n.call(t,e.current[a])})),a}const ie={create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ee.initial(e),ee.handler(t);var a={current:e},n=J(ne)(a,t),i=J(ae)(a),r=J(ee.changes)(e),c=J(te)(a);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return ee.selector(e),e(a.current)},function(e){!function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}(n,i,r,c)(e)}]}};const re={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};const ce=function(e){return{}.toString.call(e).includes("Object")};var se={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},oe=function(e){return function t(){for(var a=this,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return i.length>=e.length?e.apply(this,i):function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(a,[].concat(i,n))}}}((function(e,t){throw new Error(e[t]||e.default)}))(se),le={config:function(e){return e||oe("configIsRequired"),ce(e)||oe("configType"),e.urls?(console.warn(se.deprecation),{paths:{vs:e.urls.monacoBase}}):e}};const de=le;const me=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}};const ue=function e(t,a){return Object.keys(a).forEach((function(n){a[n]instanceof Object&&t[n]&&Object.assign(a[n],e(t[n],a[n]))})),H(H({},t),a)};var ye={type:"cancelation",msg:"operation is manually canceled"};const pe=function(e){var t=!1,a=new Promise((function(a,n){e.then((function(e){return t?n(ye):a(e)})),e.catch(n)}));return a.cancel=function(){return t=!0},a};var ge,fe,De=ie.create({config:re,isInitialized:!1,resolve:null,reject:null,monaco:null}),ve=(fe=2,function(e){if(Array.isArray(e))return e}(ge=De)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,i=!1,r=void 0;try{for(var c,s=e[Symbol.iterator]();!(n=(c=s.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return a}}(ge,fe)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?$(e,t):void 0}}(ge,fe)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),_e=ve[0],he=ve[1];function be(e){return document.body.appendChild(e)}function Ee(e){var t,a,n=_e((function(e){return{config:e.config,reject:e.reject}})),i=(t="".concat(n.config.paths.vs,"/loader.js"),a=document.createElement("script"),t&&(a.src=t),a);return i.onload=function(){return e()},i.onerror=n.reject,i}function we(){var e=_e((function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}})),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],(function(t){je(t),e.resolve(t)}),(function(t){e.reject(t)}))}function je(e){_e().monaco||he({monaco:e})}var Te=new Promise((function(e,t){return he({resolve:e,reject:t})})),Ae={config:function(e){var t=de.config(e),a=t.monaco,n=G(t,["monaco"]);he((function(e){return{config:ue(e.config,n),monaco:a}}))},init:function(){var e=_e((function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}}));if(!e.isInitialized){if(he({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),pe(Te);if(window.monaco&&window.monaco.editor)return je(window.monaco),e.resolve(window.monaco),pe(Te);me(be,Ee)(we)}return pe(Te)},__getMonacoInstance:function(){return _e((function(e){return e.monaco}))}};const Ce=Ae;var Oe={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Re={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}};var Ie=function({children:e}){return n.createElement("div",{style:Re.container},e)};var Me=function({width:e,height:t,isEditorReady:a,loading:i,_ref:r,className:c,wrapperProps:s}){return n.createElement("section",{style:{...Oe.wrapper,width:e,height:t},...s},!a&&n.createElement(Ie,null,i),n.createElement("div",{ref:r,style:{...Oe.fullWidth,...!a&&Oe.hide},className:c}))},Le=(0,n.memo)(Me);var Pe=function(e){(0,n.useEffect)(e,[])};var Se=function(e,t,a=!0){let i=(0,n.useRef)(!0);(0,n.useEffect)(i.current||!a?()=>{i.current=!1}:e,t)};function ke(){}function xe(e,t,a,n){return function(e,t){return e.editor.getModel(qe(e,t))}(e,n)||function(e,t,a,n){return e.editor.createModel(t,a,n?qe(e,n):void 0)}(e,t,a,n)}function qe(e,t){return e.Uri.parse(t)}var Ne=function({original:e,modified:t,language:a,originalLanguage:i,modifiedLanguage:r,originalModelPath:c,modifiedModelPath:s,keepCurrentOriginalModel:o=!1,keepCurrentModifiedModel:l=!1,theme:d="light",loading:m="Loading...",options:u={},height:y="100%",width:p="100%",className:g,wrapperProps:f={},beforeMount:D=ke,onMount:v=ke}){let[_,h]=(0,n.useState)(!1),[b,E]=(0,n.useState)(!0),w=(0,n.useRef)(null),j=(0,n.useRef)(null),T=(0,n.useRef)(null),A=(0,n.useRef)(v),C=(0,n.useRef)(D),O=(0,n.useRef)(!1);Pe((()=>{let e=Ce.init();return e.then((e=>(j.current=e)&&E(!1))).catch((e=>"cancelation"!==e?.type&&console.error("Monaco initialization: error:",e))),()=>w.current?function(){let e=w.current?.getModel();o||e?.original?.dispose(),l||e?.modified?.dispose(),w.current?.dispose()}():e.cancel()})),Se((()=>{if(w.current&&j.current){let t=w.current.getOriginalEditor(),n=xe(j.current,e||"",i||a||"text",c||"");n!==t.getModel()&&t.setModel(n)}}),[c],_),Se((()=>{if(w.current&&j.current){let e=w.current.getModifiedEditor(),n=xe(j.current,t||"",r||a||"text",s||"");n!==e.getModel()&&e.setModel(n)}}),[s],_),Se((()=>{let e=w.current.getModifiedEditor();e.getOption(j.current.editor.EditorOption.readOnly)?e.setValue(t||""):t!==e.getValue()&&(e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),e.pushUndoStop())}),[t],_),Se((()=>{w.current?.getModel()?.original.setValue(e||"")}),[e],_),Se((()=>{let{original:e,modified:t}=w.current.getModel();j.current.editor.setModelLanguage(e,i||a||"text"),j.current.editor.setModelLanguage(t,r||a||"text")}),[a,i,r],_),Se((()=>{j.current?.editor.setTheme(d)}),[d],_),Se((()=>{w.current?.updateOptions(u)}),[u],_);let R=(0,n.useCallback)((()=>{if(!j.current)return;C.current(j.current);let n=xe(j.current,e||"",i||a||"text",c||""),o=xe(j.current,t||"",r||a||"text",s||"");w.current?.setModel({original:n,modified:o})}),[a,t,r,e,i,c,s]),I=(0,n.useCallback)((()=>{!O.current&&T.current&&(w.current=j.current.editor.createDiffEditor(T.current,{automaticLayout:!0,...u}),R(),j.current?.editor.setTheme(d),h(!0),O.current=!0)}),[u,d,R]);return(0,n.useEffect)((()=>{_&&A.current(w.current,j.current)}),[_]),(0,n.useEffect)((()=>{!b&&!_&&I()}),[b,_,I]),n.createElement(Le,{width:p,height:y,isEditorReady:_,loading:m,_ref:T,className:g,wrapperProps:f})};(0,n.memo)(Ne);var Fe=function(e){let t=(0,n.useRef)();return(0,n.useEffect)((()=>{t.current=e}),[e]),t.current},Ve=new Map;var Be=function({defaultValue:e,defaultLanguage:t,defaultPath:a,value:i,language:r,path:c,theme:s="light",line:o,loading:l="Loading...",options:d={},overrideServices:m={},saveViewState:u=!0,keepCurrentModel:y=!1,width:p="100%",height:g="100%",className:f,wrapperProps:D={},beforeMount:v=ke,onMount:_=ke,onChange:h,onValidate:b=ke}){let[E,w]=(0,n.useState)(!1),[j,T]=(0,n.useState)(!0),A=(0,n.useRef)(null),C=(0,n.useRef)(null),O=(0,n.useRef)(null),R=(0,n.useRef)(_),I=(0,n.useRef)(v),M=(0,n.useRef)(),L=(0,n.useRef)(i),P=Fe(c),S=(0,n.useRef)(!1),k=(0,n.useRef)(!1);Pe((()=>{let e=Ce.init();return e.then((e=>(A.current=e)&&T(!1))).catch((e=>"cancelation"!==e?.type&&console.error("Monaco initialization: error:",e))),()=>C.current?(M.current?.dispose(),y?u&&Ve.set(c,C.current.saveViewState()):C.current.getModel()?.dispose(),void C.current.dispose()):e.cancel()})),Se((()=>{let n=xe(A.current,e||i||"",t||r||"",c||a||"");n!==C.current?.getModel()&&(u&&Ve.set(P,C.current?.saveViewState()),C.current?.setModel(n),u&&C.current?.restoreViewState(Ve.get(c)))}),[c],E),Se((()=>{C.current?.updateOptions(d)}),[d],E),Se((()=>{!C.current||void 0===i||(C.current.getOption(A.current.editor.EditorOption.readOnly)?C.current.setValue(i):i!==C.current.getValue()&&(k.current=!0,C.current.executeEdits("",[{range:C.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),C.current.pushUndoStop(),k.current=!1))}),[i],E),Se((()=>{let e=C.current?.getModel();e&&r&&A.current?.editor.setModelLanguage(e,r)}),[r],E),Se((()=>{void 0!==o&&C.current?.revealLine(o)}),[o],E),Se((()=>{A.current?.editor.setTheme(s)}),[s],E);let x=(0,n.useCallback)((()=>{if(O.current&&A.current&&!S.current){I.current(A.current);let n=c||a,l=xe(A.current,i||e||"",t||r||"",n||"");C.current=A.current?.editor.create(O.current,{model:l,automaticLayout:!0,...d},m),u&&C.current.restoreViewState(Ve.get(n)),A.current.editor.setTheme(s),void 0!==o&&C.current.revealLine(o),w(!0),S.current=!0}}),[e,t,a,i,r,c,d,m,u,s,o]);return(0,n.useEffect)((()=>{E&&R.current(C.current,A.current)}),[E]),(0,n.useEffect)((()=>{!j&&!E&&x()}),[j,E,x]),L.current=i,(0,n.useEffect)((()=>{E&&h&&(M.current?.dispose(),M.current=C.current?.onDidChangeModelContent((e=>{k.current||h(C.current.getValue(),e)})))}),[E,h]),(0,n.useEffect)((()=>{if(E){let e=A.current.editor.onDidChangeMarkers((e=>{let t=C.current.getModel()?.uri;if(t&&e.find((e=>e.path===t.path))){let e=A.current.editor.getModelMarkers({resource:t});b?.(e)}}));return()=>{e?.dispose()}}return()=>{}}),[E,b]),n.createElement(Le,{width:p,height:g,isEditorReady:E,loading:l,_ref:O,className:f,wrapperProps:D})},Ue=(0,n.memo)(Be),ze=a(31573),He=a(42430),Ge=a(6423),$e=a(56237),Ke=a(99323),We=a(23507),Ye=a(89152),Je=a(39023);function Qe({children:e,target:t,overrides:a,open:i}){const[r,c]=(0,n.useState)(null),s=(0,n.useRef)(null),o=(0,n.useRef)(null),l=(0,n.useCallback)((e=>{if(o.current=e,e&&i){const t=e.getBoundingClientRect();s.current=t,c({position:"absolute",left:t.x+window.scrollX,top:t.y+window.scrollY,width:t.width,height:t.height,...a})}}),[a,i]);return(0,n.useEffect)((()=>{if(!o.current||!i)return;const e=setInterval((()=>{if(!o.current)return;const e=o.current.getBoundingClientRect();var t,a;s.current&&(t=e,a=s.current,t.x!==a.x||t.y!==a.y||t.width!==a.width||t.height!==a.height)&&l(o.current)}),100);return()=>clearInterval(e)}),[o,l,i]),n.createElement(n.Fragment,null,n.createElement("div",{ref:l,style:{display:i?"block":"none"}},t),n.createElement(Je.A,{open:null!==r&&i},n.createElement("div",{style:r},e)))}Qe.propTypes={children:o().node.isRequired,target:o().node.isRequired,overrides:o().object,open:o().bool},Qe.defaultProps={overrides:{},open:!1};const Xe=c.Ay.bind(null,{endpoint:"receipts.template_list",rules:[{args:["event_id","object_type"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1}]},{args:["category_id","object_type"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/");Ce.config({monaco:ze});const Ze={html:{syntax:"html",fileName:"template.html"},css:{syntax:"css",fileName:"theme.css"},yaml:{syntax:"yaml",fileName:"metadata.yaml"}};function et({template:e,onChange:t,onSubmit:a,editorHeight:i,targetLocator:r,loading:c,add:s}){const[o,l]=(0,n.useState)("html"),u=x()(e,["html","css","yaml"]),y=(0,n.useRef)(null);return(0,n.useEffect)((()=>{y.current?.focus()}),[o]),n.createElement(He.Form,{onSubmit:a,initialValues:{title:e?.title||null,default_filename:e?.default_filename||"",...u},initialValuesEqual:B()},(({handleSubmit:a,values:u})=>n.createElement(Ge.A,{onSubmit:a,subscription:{dirty:!0}},n.createElement(He.FormSpy,{subscription:{dirtyFieldsSinceLastSubmit:!0}},(({dirtyFieldsSinceLastSubmit:t})=>(!!e.owner||Object.values(t).some((e=>e)))&&n.createElement(Ye.FinalUnloadPrompt,{router:!0}))),n.createElement(Ge.A.Group,{widths:"equal"},n.createElement(Ye.FinalInput,{name:"title",label:p.Translate.string("Title"),type:"text",disabled:c,required:!0,rows:24}),n.createElement(Ye.FinalInput,{name:"default_filename",label:p.Translate.string("Default filename"),type:"text",componentLabel:"-{n}.pdf",labelPosition:"right",format:Ye.formatters.slugify,disabled:c,formatOnBlur:!0})),n.createElement($e.A.Group,{attached:"top"},["html","css","yaml"].map((e=>n.createElement($e.A,{type:"button",primary:e===o,key:e,onClick:()=>l(e)},Ze[e].fileName)))),["html","css","yaml"].map((r=>n.createElement(Ye.FinalField,{key:r,name:r,initialValue:e[r],parse:e=>e},(({input:e,meta:s})=>n.createElement(n.Fragment,null,n.createElement(Qe,{target:n.createElement("div",{style:{height:`${i}px`,width:"100%"}}),open:r===o},c?n.createElement(N.A,{style:{height:`${i}px`},className:"receipts-client-js-templates-___Editor-module__loading-segment___jWKQs"},n.createElement(Ke.A,{active:!0},n.createElement(We.A,null))):n.createElement(Ue,{height:`${i}px`,theme:"vs-dark",path:Ze[r].fileName,defaultLanguage:Ze[r].syntax,value:e.value,onChange:a=>{t({...u,[r]:a}),e.onChange(a)},onMount:(e,t)=>{y.current=e,e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyS,a)},options:{minimap:{enabled:!1}}})),n.createElement(m.A,{error:!0,visible:!!s.submitError},s.submitError)))))),n.createElement(Ge.A.Group,{className:"receipts-client-js-templates-___Editor-module__buttons___L50a6"},n.createElement(Ye.FinalSubmitButton,{label:p.Translate.string("Save"),disabledUntilChange:!s}),n.createElement(d.Link,{to:Xe(r),className:"ui button"},n.createElement(p.Translate,null,"Cancel"))))))}et.propTypes={template:j.isRequired,onChange:o().func.isRequired,onSubmit:o().func.isRequired,editorHeight:o().number.isRequired,targetLocator:w.isRequired,loading:o().bool,add:o().bool},et.defaultProps={loading:!1,add:!1};var tt=a(50081);const at=c.Ay.bind(null,{endpoint:"receipts.images",rules:[{args:["event_id"],converters:{event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"images",isDynamic:!1}]}]},"/"),nt=c.Ay.bind(null,{endpoint:"receipts.template_live_preview",rules:[{args:["event_id","object_type"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"live-preview",isDynamic:!1}]},{args:["category_id","object_type"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"live-preview",isDynamic:!1}]}]},"/");function it({template:e,onSubmit:t,targetLocator:a,editorHeight:i,add:r,loading:c}){const[s,o]=(0,n.useState)({});return(0,n.useEffect)((()=>{o({title:e.title,...x()(e,["html","css","yaml"])})}),[e]),n.createElement(n.Fragment,null,n.createElement(u.ManagementPageSubTitle,{title:r?p.Translate.string("Add document template"):p.Translate.string("Edit document template")}),n.createElement(q.A,{columns:2,divided:!0},n.createElement(q.A.Row,null,n.createElement(q.A.Column,null,n.createElement(et,{onSubmit:t,template:e,editorHeight:i,targetLocator:a,onChange:o,loading:c,add:r})),n.createElement(q.A.Column,null,s.html&&s.html.length>=3?n.createElement(tt.A,{url:nt(a),data:s,fetchImagesURL:"event_id"in a?at(a):null}):n.createElement(N.A,{placeholder:!0},n.createElement(F.A,{icon:!0},n.createElement(h.A,{name:"eye"}),n.createElement(p.Translate,null,"Start writing a template to see the preview here...")))))))}it.propTypes={onSubmit:o().func.isRequired,template:j,targetLocator:w.isRequired,editorHeight:o().number,add:o().bool,loading:o().bool},it.defaultProps={template:{html:"",css:"",yaml:""},editorHeight:800,add:!1,loading:!1};const rt=c.Ay.bind(null,{endpoint:"receipts.add_default_template",rules:[{args:["event_id","object_type","template_name"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_name",isDynamic:!0}]},{args:["category_id","object_type","template_name"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_name",isDynamic:!0}]}]},"/"),ct=c.Ay.bind(null,{endpoint:"receipts.add_template",rules:[{args:["event_id","object_type"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1}]},{args:["category_id","object_type"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1}]}]},"/"),st=c.Ay.bind(null,{endpoint:"receipts.edit_template",rules:[{args:["event_id","object_type","template_id"],converters:{event_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]},{args:["category_id","object_type","template_id"],converters:{category_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]}]},"/"),ot=c.Ay.bind(null,{endpoint:"receipts.get_default_template",rules:[{args:["template_name"],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"default-templates",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_name",isDynamic:!0}]}]},"/"),lt=c.Ay.bind(null,{endpoint:"receipts.template",rules:[{args:["event_id","object_type","template_id"],converters:{event_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]},{args:["category_id","object_type","template_id"],converters:{category_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]}]},"/"),dt=c.Ay.bind(null,{endpoint:"receipts.template_list",rules:[{args:["event_id","object_type"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1}]},{args:["category_id","object_type"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/"),mt=o().shape({event_id:o().number,category_id:o().number});function ut(e,t){switch(t.type){case"ADD_TEMPLATE":return{...e,ownTemplates:[...e.ownTemplates,t.template],message:p.Translate.string('Template "{title}" was added',{title:t.template.title})};case"UPDATE_TEMPLATE":return{...e,ownTemplates:e.ownTemplates.map((e=>e.id===t.id?{...e,...t.changes}:e)),message:p.Translate.string('Template "{title}" was updated',{title:t.changes.title})};case"DELETE_TEMPLATE":return{...e,ownTemplates:e.ownTemplates.filter((e=>e.id!==t.id)),message:p.Translate.string("Template deleted")};case"RESET_MESSAGE":return{...e,message:null};default:return e}}function yt({templates:e,dispatch:t,targetLocator:a}){const i=(0,g.Uf)("template_id");return n.createElement(n.Fragment,null,n.createElement(u.ManagementPageBackButton,{url:dt(a)}),n.createElement(it,{targetLocator:a,template:e.find((e=>e.id===i)),onSubmit:async e=>{try{await f.indicoAxios.patch(st({template_id:i,...a}),e),t({type:"UPDATE_TEMPLATE",id:i,changes:e})}catch({response:{data:{webargs_errors:e}}}){return e}}}))}function pt({dispatch:e,targetLocator:t,defaultTemplate:a}){const i=(0,l.useHistory)(),{data:r,loading:c}=(0,y.Ku)({url:a&&ot({template_name:a})},{manual:!a});return n.createElement(n.Fragment,null,n.createElement(u.ManagementPageBackButton,{url:dt(t)}),n.createElement(it,{onSubmit:async a=>{try{const{data:n}=await f.indicoAxios.post(ct(t),a);e({type:"ADD_TEMPLATE",template:n}),i.push(dt(t))}catch({response:{data:{webargs_errors:e}}}){return e}},targetLocator:t,template:r||void 0,loading:c,add:!0}))}function gt({initialState:e,defaultTemplates:t,targetLocator:a}){const[i,c]=(0,n.useReducer)(ut,e),s=Object.keys(a);return(0,n.useEffect)((()=>{i.message&&setTimeout((()=>c({type:"RESET_MESSAGE"})),2500)}),[i.message]),n.createElement(n.Fragment,null,i.message&&n.createElement(m.A,{success:!0},n.createElement(m.A.Content,null,i.message)),n.createElement(d.BrowserRouter,null,n.createElement(l.Switch,null,n.createElement(l.Route,{exact:!0,path:(0,g.kA)(ct,s),render:()=>n.createElement(pt,{dispatch:c,targetLocator:a})}),n.createElement(l.Route,{exact:!0,path:(0,g.kA)(rt,[...s,"template_name"]),render:({match:{params:{template_name:e}}})=>n.createElement(pt,{dispatch:c,targetLocator:a,defaultTemplate:e})}),n.createElement(l.Route,{exact:!0,path:[(0,g.kA)(lt,[...s,"template_id"])],render:()=>n.createElement(yt,{templates:i.ownTemplates,dispatch:c,targetLocator:a})}),n.createElement(l.Route,{exact:!0,path:(0,g.kA)(dt,s),render:()=>n.createElement(S,(0,r.A)({dispatch:c,defaultTemplates:t,targetLocator:a},i))}))))}yt.propTypes={dispatch:o().func.isRequired,targetLocator:mt.isRequired,templates:o().arrayOf(j).isRequired},pt.propTypes={dispatch:o().func.isRequired,targetLocator:mt.isRequired,defaultTemplate:o().string},pt.defaultProps={defaultTemplate:""},gt.propTypes={initialState:o().shape({ownTemplates:o().arrayOf(j),inheritedTemplates:o().arrayOf(j)}).isRequired,defaultTemplates:o().objectOf(T).isRequired,targetLocator:mt.isRequired},window.setupReceiptTemplateList=function(e,t,a,r,c,s){document.addEventListener("DOMContentLoaded",(()=>{i.render(n.createElement(gt,{initialState:{ownTemplates:t,inheritedTemplates:a,otherTemplates:r},defaultTemplates:c,targetLocator:s}),e)}))}}},e=>{e.O(0,[4644,4394,8502,2076],(()=>{return t=37168,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=module_receipts.admin.b4d05d6a.bundle.js.map