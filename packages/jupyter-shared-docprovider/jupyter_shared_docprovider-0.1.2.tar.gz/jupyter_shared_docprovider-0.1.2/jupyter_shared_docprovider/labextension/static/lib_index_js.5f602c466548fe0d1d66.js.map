{"version":3,"file":"lib_index_js.5f602c466548fe0d1d66.js","mappings":"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","sources":["webpack://@jupyter/shared-docprovider-extension/./src/filebrowser.ts","webpack://@jupyter/shared-docprovider-extension/./src/index.ts"],"sourcesContent":["/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\nimport { listIcon, refreshIcon } from '@jupyterlab/ui-components';\n//import { listIcon, fileIcon, refreshIcon } from '@jupyterlab/ui-components';\nimport {\n  ILabShell,\n  IRouter,\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin\n} from '@jupyterlab/application';\nimport { ToolbarButton } from '@jupyterlab/apputils';\nimport {\n  IDefaultFileBrowser,\n  IFileBrowserFactory\n} from '@jupyterlab/filebrowser';\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\nimport { ITranslator } from '@jupyterlab/translation';\n\nimport { YFile, YNotebook } from '@jupyter/ydoc';\n\nimport { IGlobalAwareness } from '@jupyter/shared-drive';\nimport { ISharedDrive, SharedDrive } from '@jupyter/shared-docprovider';\nimport { Awareness } from 'y-protocols/awareness';\n\n/**\n * The shared drive provider.\n */\nexport const drive: JupyterFrontEndPlugin<ISharedDrive> = {\n  id: '@jupyter/docprovider-extension:drive',\n  description: 'The default collaborative drive provider',\n  provides: ISharedDrive,\n  requires: [IDefaultFileBrowser, ITranslator],\n  optional: [IGlobalAwareness],\n  activate: (\n    app: JupyterFrontEnd,\n    defaultFileBrowser: IDefaultFileBrowser,\n    translator: ITranslator,\n    globalAwareness: Awareness | null\n  ): ISharedDrive => {\n    const trans = translator.load('jupyter-shared-drive');\n    const drive = new SharedDrive(\n      app.serviceManager.user,\n      defaultFileBrowser,\n      trans,\n      globalAwareness,\n      'Shared'\n    );\n    return drive;\n  }\n};\n\n/**\n * Plugin to register the shared model factory for the content type 'file'.\n */\nexport const yfile: JupyterFrontEndPlugin<void> = {\n  id: '@jupyter/docprovider-extension:yfile',\n  description:\n    \"Plugin to register the shared model factory for the content type 'file'\",\n  autoStart: true,\n  requires: [ISharedDrive],\n  optional: [],\n  activate: (app: JupyterFrontEnd, drive: ISharedDrive): void => {\n    const yFileFactory = () => {\n      return new YFile();\n    };\n    drive.sharedModelFactory.registerDocumentFactory('file', yFileFactory);\n  }\n};\n\n/**\n * Plugin to register the shared model factory for the content type 'notebook'.\n */\nexport const ynotebook: JupyterFrontEndPlugin<void> = {\n  id: '@jupyter/docprovider-extension:ynotebook',\n  description:\n    \"Plugin to register the shared model factory for the content type 'notebook'\",\n  autoStart: true,\n  requires: [ISharedDrive],\n  optional: [ISettingRegistry],\n  activate: (\n    app: JupyterFrontEnd,\n    drive: ISharedDrive,\n    settingRegistry: ISettingRegistry | null\n  ): void => {\n    let disableDocumentWideUndoRedo = true;\n\n    // Fetch settings if possible.\n    if (settingRegistry) {\n      settingRegistry\n        .load('@jupyterlab/notebook-extension:tracker')\n        .then(settings => {\n          const updateSettings = (settings: ISettingRegistry.ISettings) => {\n            const enableDocWideUndo = settings?.get(\n              'experimentalEnableDocumentWideUndoRedo'\n            ).composite as boolean;\n\n            disableDocumentWideUndoRedo = !enableDocWideUndo ?? true;\n          };\n\n          updateSettings(settings);\n          settings.changed.connect((settings: ISettingRegistry.ISettings) =>\n            updateSettings(settings)\n          );\n        });\n    }\n\n    const yNotebookFactory = () => {\n      return new YNotebook({\n        disableDocumentWideUndoRedo\n      });\n    };\n    drive.sharedModelFactory.registerDocumentFactory(\n      'notebook',\n      yNotebookFactory\n    );\n  }\n};\n\n/**\n * The shared file browser factory provider.\n */\nexport const sharedFileBrowser: JupyterFrontEndPlugin<void> = {\n  id: 'jupyterlab-shared-contents:sharedFileBrowser',\n  description: 'The shared file browser factory provider',\n  autoStart: true,\n  requires: [ISharedDrive, IFileBrowserFactory],\n  optional: [\n    IRouter,\n    JupyterFrontEnd.ITreeResolver,\n    ILabShell,\n    ISettingRegistry,\n    ITranslator\n  ],\n  activate: async (\n    app: JupyterFrontEnd,\n    drive: ISharedDrive,\n    fileBrowserFactory: IFileBrowserFactory,\n    router: IRouter | null,\n    tree: JupyterFrontEnd.ITreeResolver | null,\n    labShell: ILabShell | null,\n    translator: ITranslator\n  ): Promise<void> => {\n    const { createFileBrowser } = fileBrowserFactory;\n    //const trans = (translator ?? nullTranslator).load('jupyterlab-shared-contents');\n    app.serviceManager.contents.addDrive(drive);\n\n    const widget = createFileBrowser('jp-shared-contents-browser', {\n      driveName: drive.name,\n      // We don't want to restore old state, we don't have a drive handle ready\n      restore: false\n    });\n    //widget.title.caption = trans.__('Shared Contents');\n    widget.title.caption = 'Shared Contents';\n    widget.title.icon = listIcon;\n\n    //const importButton = new ToolbarButton({\n    //  icon: fileIcon,\n    //  onClick: async () => {\n    //    let path = prompt('Please enter the path of the file to import:');\n    //    if (path !== null) {\n    //      await drive.importFile(path);\n    //    }\n    //  },\n    //  tooltip: 'Import File'\n    //});\n\n    const refreshButton = new ToolbarButton({\n      icon: refreshIcon,\n      onClick: async () => {\n        widget.model.refresh();\n      },\n      tooltip: 'Refresh File Browser'\n    });\n\n    widget.toolbar.insertItem(0, 'refresh', refreshButton);\n    //widget.toolbar.insertItem(1, 'import', importButton);\n\n    app.shell.add(widget, 'left');\n  }\n};\n","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n/**\n * @packageDocumentation\n * @module shared-drive-extension\n */\n\nimport { JupyterFrontEndPlugin } from '@jupyterlab/application';\n\nimport { drive, yfile, ynotebook, sharedFileBrowser } from './filebrowser';\n\n/**\n * Export the plugins as default.\n */\nconst plugins: JupyterFrontEndPlugin<any>[] = [\n  drive,\n  yfile,\n  ynotebook,\n  sharedFileBrowser\n];\n\nexport default plugins;\n"],"names":[],"sourceRoot":""}