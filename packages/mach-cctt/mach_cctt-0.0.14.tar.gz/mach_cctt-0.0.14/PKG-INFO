Metadata-Version: 2.3
Name: mach_cctt
Version: 0.0.14
Summary: Test automated trades on the Mach exchange.
Project-URL: Homepage, https://github.com/tristeroresearch/cross-chain-trade-test
Project-URL: Issues, https://github.com/tristeroresearch/cross-chain-trade-test/issues
Author: Marwan Hassanien
Author-email: Richard Dong <richard@tristero.xyz>
License-File: LICENSE
Keywords: crypto,cryptocurrencies,cryptocurrency,defi,exchange,liquidity,mach,pool,swap,tristero
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Requires-Python: >=3.12.5
Requires-Dist: eth-account
Requires-Dist: eth-typing
Requires-Dist: hexbytes
Requires-Dist: requests
Requires-Dist: web3
Provides-Extra: dev
Requires-Dist: twine; extra == 'dev'
Description-Content-Type: text/markdown

# Cross Chain Trade Test

Test automated trades between multiple chains on Mach.

## Overview

Test automated trades on Mach. Specify a start chain and symbol, and a policy determining how the destination token will be chosen (randomize chain and symbol, randomize chain and fix symbol). In each trade, the test wallet's entire balance of the source token will be sold for the destination token, and then the destination token because the new source token for the next trade. This continues until the script is killed by the user.

## Usage

1. Install

    ```bash
    python -m pip install mach-cctt
    ```

1. Usage

    ```bash
    cctt --help
    ```

## Development

### Requirements

You need the [`just`](https://github.com/casey/just) command runner and either Python 3.12.5+ with `virtualenv`, or `pyenv`.

### Setup

1. **Clone the repository**

    ```bash
    git clone https://github.com/tristeroresearch/cross-chain-trade-test.git
    cd cross-chain-trade-test
    ```

1. **Create and activate a virtual environment**

    Using `venv`:

    ```bash
    python -m venv .venv
    source .venv/bin/activate
    ```

    Or using `pyenv`:

    ```bash
    pyenv virtualenv 3.12.5 cctt
    pyenv activate
    ```

1. **Install dependencies**

    ```bash
    just init
    ```

1. **View available recipes**

    ```bash
    just -l
    ```

    Note that there are recipes that allow you to run the application in-source without needed to build and package to PyPI first:

    ```bash
    just account_file=account.json import <private key> # Import a new account
    just decrypt # Show public and private key
    just balances # List balances of account
    just source=arbitrum-USDC run # Run the trade tester, starting from arbitrum-USDC
    just wallet=<public key> withdraw # Withdraw funds from the stored account to the given wallet
    ```

1. **Building**

    ```bash
    ```

#### Packaging

Once you've made your changes, make sure to bump the version in `pyproject.toml`.

To upload to the test PyPI:

```bash
just build upload-test
```

To upload to the main PyPI:

```bash
just build upload
```

## TODO

- `drain_eth` is being skipped during withdrawals as we aren't calculating L1 gas fees, making it impossible to determine the amount to withdraw
- Use type 2 (EIP 1559) txs
- Resolve duplication between transfers.py and transactions.py
- Logging
- Use Quote class from backend and deserialize with pydantic
- Unit tests
