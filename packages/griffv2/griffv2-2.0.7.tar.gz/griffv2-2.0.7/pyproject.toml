[tool.poetry]
name = "griffv2"
version = "2.0.7"
description = "DDD Library"
authors = ["Wedge Digital"]
packages = [{ include = "griff" }]
exclude = ["**/_tests/*", "**/test_*.py"]
readme = "README.md"
repository = "https://github.com/Wedge-Digital/griff"
license = "MIT"

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[tool.poetry.dependencies]
python = "^3.12"
pydantic = "^2.7.2"
injector = "^0.21.0"
pydantic-settings = "^2.3.0"
email-validator = "^2.1.1"
asyncpg = "^0.29.0"
loguru = "^0.7.2"
arrow = "^1.3.0"
aiosql = "^10.2"
orjson = "^3.10.3"
fastapi = "^0.111.0"
typer = "^0.12.3"
yoyo-migrations = "^8.2.0"
argon2-cffi = "^23.1.0"
returns = "^0.22.0"
pyjwt = "^2.8.0"
pydantic-i18n = "^0.4.4"
psycopg2-binary = "^2.9.9"
fastapi-babel = "^0.0.9"

[tool.poetry.group.dev.dependencies]
pytest = "^8.2.1"
flake8 = "^7.0.0"
pytest-asyncio = "^0.23.6"
pytest-cov = "^5.0.0"
mypy = "^1.10.0"
setuptools = "^70.0.0"
black = "23.12.1"


[tool.pytest.ini_options]
python_files = "test_*.py"
addopts = "-p no:warnings --tb=short"
asyncio_mode = "auto"
testpaths = "**/_tests"

[tool.mypy]
plugins = [
  "pydantic.mypy"
]
disable_error_code = "import-untyped"

[tool.coverage.run]
omit = [
    "conftest.py",
    "griff/**/_tests/**",
    "griff/test_utils/*",
    "griff/**/abstract_*.py",
    "griff/**/cli/*",
    "griff/**/settings/*",
    "griff/appli/command/*",
    "griff/appli/event/*",
    "griff/appli/query/*",
    "griff/appli/policies/*",
    "griff/runtime/components/*",
    "griff/utils/errors.py",
    "griff/infra/persistence/dict_domain_persistence.py",
    "griff/infra/registry/cli_decorator_processor.py",
    "griff/infra/fastapi/exception_handlers/pydantic_exception_handler.py",
    "griff/runtime/factories/app_runtime_factory.py"
]
