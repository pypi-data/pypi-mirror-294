"use strict";(self.webpackChunkreact_admin_upgrade=self.webpackChunkreact_admin_upgrade||[]).push([[8980],{88980:(e,n,t)=>{t.r(n),t.d(n,{ApiAdminHome:()=>J,ApiGenerateField:()=>B,ApiShow:()=>I,ApiURL:()=>H,ApiUserPasswordTab:()=>y,CustomTab:()=>X,CustomerLabel:()=>Y,DBConnection:()=>V,EmployeeLabel:()=>G,MyComp:()=>W,SampleColumnField:()=>z,UserPasswordField:()=>K,UserPasswordTab:()=>A});var s=t(68903),i=t(85865),a=t(94698),o=t(73896),r=t(65043),l=t(85546),d=t(70579),c=t(11906),x=t(81e3),h=t(67784),p=t(53193),u=t(76738),j=t(46349),m=t(31335),g=t(4611);const A=()=>{const e=(0,m.wy)(),n=(0,g.l)(),t=(0,l.i)(),[a,o]=((0,u.L)(),(0,r.useState)("")),[A,y]=(0,r.useState)(""),[v,b]=(0,r.useState)("secondary");return(0,d.jsx)(x.A,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:(0,d.jsxs)(p.A,{children:[(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4,children:(0,d.jsx)(i.A,{variant:"body2",component:"p",children:(0,d.jsx)("b",{children:"Change the user password"})})}),(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4,children:(0,d.jsx)(h.A,{id:"outlined-password-input",label:"New Password",type:"password",onChange:e=>{let n=e.target.value;o(n),b(n===A&&n.length>5?"primary":"secondary")}})}),(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4,children:(0,d.jsx)(h.A,{id:"outlined-password-input",label:"Repeat Password",type:"password",onChange:e=>{let n=e.target.value;y(n),b(a===n&&a.length>5?"primary":"secondary")}})}),(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4,children:(0,d.jsx)(c.A,{variant:"contained",color:v,onClick:()=>{if(a!==A)return void n("Passwords don't match",{type:"warning"});if(a.length<6)return void n("Password too short",{type:"warning"});const s={password:a};(0,j.s9)("".concat(e.api_root,"/Users/").concat(t.id,"/change_password"),{method:"POST",body:JSON.stringify(s)}).then((()=>n("Password Changed!"))).catch((()=>n("Error Changing Password",{type:"warning"})))},children:"Submit"})})]})})},y=()=>{const e=(0,m.wy)(),n=(0,g.l)(),t=(0,l.i)(),[a,o]=((0,u.L)(),(0,r.useState)("")),[A,y]=(0,r.useState)(""),[v,b]=(0,r.useState)(""),[w,C]=(0,r.useState)("secondary");return(0,d.jsx)(x.A,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:(0,d.jsxs)(p.A,{children:[(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,d.jsx)(i.A,{variant:"body2",component:"p",children:(0,d.jsx)("b",{children:"Current user password"})})}),(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,d.jsx)(h.A,{id:"outlined-password-input",label:"Current Password",type:"password",onChange:e=>{let n=e.target.value;o(n),C(n===v&&n.length>5?"primary":"secondary")}})}),(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,d.jsx)(i.A,{variant:"body2",component:"p",children:(0,d.jsx)("b",{children:"New user password"})})}),(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,d.jsx)(h.A,{id:"outlined-password-input",label:"New Password",type:"password",onChange:e=>{let n=e.target.value;y(n),C(n===v&&n.length>5?"primary":"secondary")}})}),(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,d.jsx)(h.A,{id:"outlined-password-input",label:"Repeat Password",type:"password",onChange:e=>{let n=e.target.value;b(n),C(A===n&&A.length>5?"primary":"secondary")}})}),(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,d.jsx)(c.A,{variant:"contained",color:w,onClick:()=>{if(A!==v)return void n("Passwords don't match",{type:"warning"});if(A.length<1)return void n("Password too short",{type:"warning"});const s={password:A};(0,j.s9)("".concat(e.api_root,"/Users/").concat(t.id,"/change_password"),{method:"POST",body:JSON.stringify(s)}).then((()=>n("Password Changed!"))).catch((()=>n("Error Changing Password",{type:"warning"})))},children:"Submit"})})]})})};var v=t(1243),b=t(87014),w=t(88027),C=t(1455),S=t(57767),f=t(75037),P=t(14256),_=t(78492),k=t(74605),F=t(51292);const T={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"75%",bgcolor:"background.paper",border:"0px solid #000",boxShadow:24,p:4,textAlign:"left"},M={position:"absolute",top:"10%",left:"10%",overflow:"scroll",height:"100%",fontWeight:600,display:"flex"},N={cursor:"pointer",color:"#3f51b5"},O={height:"80%",position:"relative",top:"50%",transform:"translateY(-50%)"},L={"& .MuiTextField-root":{borderBottom:"4px solid white",paddingBottom:"1em",paddingRight:"1em"}},R={textAlign:"center","& button":{width:"99%"}},U={backgroundColor:"#ccc",fontFamily:"Consolas"},q=(e,n,t)=>{const s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))},body:JSON.stringify(n||{})},i=Object.assign(s,t||{});return fetch(e,i)},D=e=>{const[n,t]=r.useState(null),[s,a]=r.useState(!1),[o,l]=r.useState(T),h=(0,m.wy)(),p=e.record;return(0,d.jsxs)("span",{children:[(0,d.jsx)("span",{onClick:e=>{a(!0),e.stopPropagation()},style:N,title:" Relationship",children:(0,d.jsx)(b.A,{})}),(0,d.jsx)(v.A,{sx:M,open:s,onClose:e=>{e.stopPropagation(),a(!1)},onClick:e=>e.stopPropagation(),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,d.jsxs)(x.A,{sx:o,children:[(0,d.jsx)(i.A,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Create API"}),"Pressing the button will generate an API with the following properties:",(0,d.jsxs)("dl",{children:[(0,d.jsx)("dt",{children:"Name:"}),(0,d.jsx)("dd",{children:null===p||void 0===p?void 0:p.name}),(0,d.jsx)("dt",{children:"Database URL:"}),(0,d.jsx)("dd",{children:null===p||void 0===p?void 0:p.connection_string}),(0,d.jsx)("dt",{children:"Port:"}),(0,d.jsx)("dd",{children:null===p||void 0===p?void 0:p.port}),(0,d.jsx)("dt",{children:"Hostname:"}),(0,d.jsx)("dd",{children:null===p||void 0===p?void 0:p.hostname})]}),(0,d.jsxs)(c.A,{variant:"outlined",onClick:()=>(e=>{const n="".concat(h.api_root,"/Apis/").concat(e.id,"/generate");t((0,d.jsx)(w.R,{})),o.top="90%",l(o),q(n,{},{}).then((e=>e.json())).then((e=>{t((0,d.jsx)("pre",{children:e}))}))})(p),children:[" ","Start ",(0,d.jsx)(b.A,{})," "]}),(0,d.jsx)("hr",{}),n]})})]})},B=e=>"list"===e.mode?(0,d.jsx)(D,{...e}):(0,d.jsx)(d.Fragment,{}),I=e=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{children:"xxxx"}),(0,d.jsx)(D,{}),e.show]}),Q=e=>{const n=(0,f.mN)(),t=(0,l.i)();let a=t?t.connection_string:"";const[o,u]=r.useState(!1),[j]=r.useState(T),[g,A]=r.useState(a),[y,b]=r.useState("user"),[S,N]=r.useState("pass"),[D,B]=r.useState("dbhost"),[I,Q]=r.useState("dbname"),[V,E]=r.useState("Other"),[H,J]=r.useState(null),W=(0,m.wy)(),z=()=>{let e="".concat(V,"://");return"Other"===V?e=g:e+="sqlite"===V?"/".concat(I):"".concat(y,":").concat(S,"@").concat(D,"/").concat(I),e};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4}),(0,d.jsx)(s.Ay,{item:!0,xs:4,spacing:4,children:(0,d.jsx)(C.k,{source:"connection_string",defaultValue:z(),helperText:"SQLAlchemy connection string syntax",fullWidth:!0})}),(0,d.jsx)(s.Ay,{item:!0,xs:4,spacing:4,children:(0,d.jsx)(c.A,{variant:"outlined",onClick:()=>u(!0),color:"primary",size:"large",sx:O,children:"Configure Connection"})}),(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4}),(0,d.jsx)(v.A,{open:o,onClose:()=>u(!1),sx:M,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,d.jsx)(x.A,{sx:j,children:(0,d.jsxs)(s.Ay,{container:!0,sx:L,children:[(0,d.jsxs)(s.Ay,{item:!0,xs:12,spacing:4,children:[(0,d.jsx)(i.A,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Database Configuration"}),(0,d.jsx)("hr",{})]}),(0,d.jsx)(s.Ay,{item:!0,xs:6,spacing:4,children:(0,d.jsxs)(p.A,{children:[(0,d.jsx)(F.A,{id:"demo-radio-buttons-group-label",children:"DB Dialect"}),(0,d.jsxs)(_.A,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"Other",name:"radio-buttons-group",onChange:e=>{const n=e.target.value;E(n),"sqlite"===n&&(b(""),N(""),B(""))},children:[(0,d.jsx)(k.A,{value:"mysql+pymysql",control:(0,d.jsx)(P.A,{}),label:"MySQL"}),(0,d.jsx)(k.A,{value:"oracle",control:(0,d.jsx)(P.A,{}),label:"Oracle"}),(0,d.jsx)(k.A,{value:"postgresql",control:(0,d.jsx)(P.A,{}),label:"Postgres"}),(0,d.jsx)(k.A,{value:"sqlite",control:(0,d.jsx)(P.A,{}),label:"SQLite"}),(0,d.jsx)(k.A,{value:"mssql+pyodbc",control:(0,d.jsx)(P.A,{}),label:"SQLServer"}),(0,d.jsx)(k.A,{value:"Other",control:(0,d.jsx)(P.A,{}),label:"Manual:"})]}),(0,d.jsx)(h.A,{id:"outlined-basic",label:"Manual",variant:"outlined",fullWidth:!0,value:g,onChange:e=>A(e.target.value),helperText:"Manual connection string configuration"})]})}),(0,d.jsxs)(s.Ay,{item:!0,xs:6,spacing:4,children:[(0,d.jsx)(h.A,{label:"Username",variant:"outlined",onChange:e=>b(e.target.value),value:y}),(0,d.jsx)(h.A,{label:"Password",variant:"outlined",onChange:e=>N(e.target.value),value:S}),(0,d.jsx)(h.A,{label:"Database host",variant:"outlined",onChange:e=>B(e.target.value),value:D}),(0,d.jsx)(h.A,{label:"Database name",variant:"outlined",onChange:e=>Q(e.target.value),value:I})]}),(0,d.jsx)(s.Ay,{item:!0,xs:6,spacing:4,children:(0,d.jsxs)(i.A,{children:["Connection String:"," ",(0,d.jsx)("span",{style:U,children:z()})]})}),(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4,sx:R,children:(0,d.jsx)("hr",{})}),(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4}),(0,d.jsx)(s.Ay,{item:!0,xs:2,spacing:4,sx:R,children:(0,d.jsxs)(c.A,{variant:"outlined",color:"primary",onClick:()=>(e=>{const n="".concat(W.api_root,"/Apis/test_conn");q(n,{connection_string:e},{}).then((e=>e.json())).then((e=>{J((0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.A,{variant:"h6",component:"h2",children:"Result:"}),(0,d.jsx)("pre",{children:e})]}))})).catch((e=>alert()))})(z()),children:[" ","Test Connection"]})}),(0,d.jsx)(s.Ay,{item:!0,xs:2,spacing:4,sx:R,children:(0,d.jsx)(c.A,{variant:"outlined",color:"primary",onClick:()=>{u(!1),n.change("connection_string",z())},children:"Save & Close"})}),(0,d.jsx)(s.Ay,{item:!0,xs:2,spacing:4,sx:R,children:(0,d.jsx)(c.A,{variant:"outlined",color:"primary",onClick:()=>(()=>{if(void 0===t.id){const e="you must first save the api";return alert(e),void J(e)}const e="".concat(W.api_root,"/Apis/").concat(t.id,"/generate");J((0,d.jsx)(w.R,{})),j.top="90%",q(e,{},{}).then((e=>e.json())).then((e=>{J((0,d.jsx)("pre",{children:e}))}))})(),disabled:!t.id,title:t.id?"":"you must first save the api",children:"Generate API"})}),(0,d.jsx)(s.Ay,{item:!0,xs:2,spacing:4,sx:R,children:(0,d.jsx)(c.A,{variant:"outlined",color:"primary",onClick:()=>u(!1),children:"Close"})}),(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4,className:classes.logdata,children:H})]})})})]})},V=e=>{console.log("props: ",e);const n=(0,l.i)();let t=n?n.connection_string:"";return"edit"!==e.mode&&"create"!==e.mode?(0,d.jsx)(i.A,{children:t}):(0,d.jsx)(Q,{...e})},E=e=>{const n="/".concat(e.name,"/api");return(0,d.jsx)(i.A,{children:(0,d.jsx)("a",{href:n,children:n})})},H=()=>{const e=(0,l.i)();return e.id?E(e):null},J=()=>{const{data:e}=(0,S.M)("Apis",{pagination:{page:0,perPage:100}}),n=null===e||void 0===e?void 0:e.map((e=>(0,d.jsx)("li",{children:E(e)})));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(i.A,{variant:"h6",component:"h2",children:[" ","APIs"]}),(0,d.jsx)(i.A,{children:(0,d.jsx)("ul",{children:n})})]})},W=e=>(0,d.jsx)("div",{children:"HMMMM"}),z=e=>{let{attribute:n}=e;return console.log("attribute: ",n),(0,d.jsx)(a.A,{source:n.name,style:{color:"red"}},n.name)},G=e=>{var n,t;const s=e.instance;return(0,d.jsxs)("div",{children:[" ",null===(n=s.attributes)||void 0===n?void 0:n.FirstName," ",null===(t=s.attributes)||void 0===t?void 0:t.LastName]})},Y=e=>{var n,t;const s=e.instance;return(0,d.jsxs)("div",{children:[" ",(0,d.jsx)("b",{children:null===(n=s.attributes)||void 0===n?void 0:n.CompanyName})," ",(0,d.jsx)("i",{children:null===(t=s.attributes)||void 0===t?void 0:t.ContactName})]})},K=e=>"list"===e.mode?(0,d.jsx)("span",{}):"edit"===e.mode?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.Ay,{item:!0,xs:12,spacing:4,children:(0,d.jsx)(i.A,{variant:"h6",component:"h6",children:"Change Password"})}),(0,d.jsxs)(s.Ay,{item:!0,xs:4,spacing:4,children:[(0,d.jsx)(o.y,{source:"_password"})," "]}),(0,d.jsxs)(s.Ay,{item:!0,xs:4,spacing:4,children:[(0,d.jsx)(o.y,{source:"_password"})," "]}),(0,d.jsx)(s.Ay,{item:!0,xs:4,spacing:4})]}):(0,d.jsx)(d.Fragment,{}),X=e=>{(0,l.i)();return(0,d.jsx)("div",{children:"Some Text"})}}}]);
//# sourceMappingURL=8980.cff85857.chunk.js.map