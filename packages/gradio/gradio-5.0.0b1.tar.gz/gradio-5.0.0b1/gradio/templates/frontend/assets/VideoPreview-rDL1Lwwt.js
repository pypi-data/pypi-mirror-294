import{I as $t}from"./Index-DmELy3F_.js";import{B as St}from"./BlockLabel-BFDmAMU7.js";import{E as Vt}from"./Empty-i_-7WnjX.js";import{S as Dt}from"./ShareButton-0ema9xiJ.js";import{D as qt}from"./Download-DVtk-Jv3.js";import{V as kt}from"./Video-fsmLZWjA.js";import{f as _e,u as Ct}from"./Blocks-CLiYArz7.js";import{D as Rt}from"./DownloadLink-bOXpZH3e.js";import{T as Lt,P as Mt}from"./Trim-JQYgj7Jd.js";import{P as Pt}from"./Play-B0Q0U1Qz.js";import{U as yt}from"./Undo-CpmTQw3B.js";import{b as Bt,t as At,V as Ht}from"./Video-zkenuhlU.js";import{b as Xt}from"./index-PmUrmWf3.js";const{SvelteComponent:It,append:Nt,attr:z,detach:Ut,init:jt,insert:Ft,noop:Fe,safe_not_equal:Ot,svg_element:tt}=window.__gradio__svelte__internal;function zt(i){let e,n;return{c(){e=tt("svg"),n=tt("path"),z(n,"d","M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"),z(e,"xmlns","http://www.w3.org/2000/svg"),z(e,"width","100%"),z(e,"height","100%"),z(e,"viewBox","0 0 24 24"),z(e,"fill","none"),z(e,"stroke","currentColor"),z(e,"stroke-width","1.5"),z(e,"stroke-linecap","round"),z(e,"stroke-linejoin","round")},m(t,l){Ft(t,e,l),Nt(e,n)},p:Fe,i:Fe,o:Fe,d(t){t&&Ut(e)}}}class Wt extends It{constructor(e){super(),jt(this,e,null,zt,Ot,{})}}const{SvelteComponent:Gt,append:ue,attr:R,destroy_block:Jt,detach:He,element:oe,ensure_array_like:nt,flush:ve,init:Kt,insert:Xe,listen:de,noop:Je,run_all:Qt,safe_not_equal:Yt,set_style:ee,space:Oe,src_url_equal:it,update_keyed_each:Zt}=window.__gradio__svelte__internal,{onMount:lt,onDestroy:xt}=window.__gradio__svelte__internal;function ot(i,e,n){const t=i.slice();return t[20]=e[n],t[22]=n,t}function en(i){let e,n,t,l,r,o=[],d=new Map,s,c,u,h,m=nt(i[1]);const a=_=>_[22];for(let _=0;_<m.length;_+=1){let b=ot(i,m,_),w=a(b);d.set(w,o[_]=rt(w,b))}return{c(){e=oe("div"),n=oe("button"),t=Oe(),l=oe("div"),r=Oe();for(let _=0;_<o.length;_+=1)o[_].c();s=Oe(),c=oe("button"),R(n,"aria-label","start drag handle for trimming video"),R(n,"class","handle left svelte-10c4beq"),ee(n,"left",i[2]+"%"),R(l,"class","opaque-layer svelte-10c4beq"),ee(l,"left",i[2]+"%"),ee(l,"right",100-i[3]+"%"),R(c,"aria-label","end drag handle for trimming video"),R(c,"class","handle right svelte-10c4beq"),ee(c,"left",i[3]+"%"),R(e,"id","timeline"),R(e,"class","thumbnail-wrapper svelte-10c4beq")},m(_,b){Xe(_,e,b),ue(e,n),ue(e,t),ue(e,l),ue(e,r);for(let w=0;w<o.length;w+=1)o[w]&&o[w].m(e,null);ue(e,s),ue(e,c),u||(h=[de(n,"mousedown",i[10]),de(n,"blur",i[5]),de(n,"keydown",i[11]),de(c,"mousedown",i[12]),de(c,"blur",i[5]),de(c,"keydown",i[13])],u=!0)},p(_,b){b&4&&ee(n,"left",_[2]+"%"),b&4&&ee(l,"left",_[2]+"%"),b&8&&ee(l,"right",100-_[3]+"%"),b&2&&(m=nt(_[1]),o=Zt(o,b,a,1,_,m,d,e,Jt,rt,s,ot)),b&8&&ee(c,"left",_[3]+"%")},d(_){_&&He(e);for(let b=0;b<o.length;b+=1)o[b].d();u=!1,Qt(h)}}}function tn(i){let e;return{c(){e=oe("div"),e.innerHTML='<span aria-label="loading timeline" class="loader svelte-10c4beq"></span>',R(e,"class","load-wrap svelte-10c4beq")},m(n,t){Xe(n,e,t)},p:Je,d(n){n&&He(e)}}}function rt(i,e){let n,t,l;return{key:i,first:null,c(){n=oe("img"),it(n.src,t=e[20])||R(n,"src",t),R(n,"alt",l=`frame-${e[22]}`),R(n,"draggable","false"),R(n,"class","svelte-10c4beq"),this.first=n},m(r,o){Xe(r,n,o)},p(r,o){e=r,o&2&&!it(n.src,t=e[20])&&R(n,"src",t),o&2&&l!==(l=`frame-${e[22]}`)&&R(n,"alt",l)},d(r){r&&He(n)}}}function nn(i){let e;function n(r,o){return r[0]?tn:en}let t=n(i),l=t(i);return{c(){e=oe("div"),l.c(),R(e,"class","container svelte-10c4beq")},m(r,o){Xe(r,e,o),l.m(e,null)},p(r,[o]){t===(t=n(r))&&l?l.p(r,o):(l.d(1),l=t(r),l&&(l.c(),l.m(e,null)))},i:Je,o:Je,d(r){r&&He(e),l.d()}}}let ze=10;function ln(i,e,n){let{videoElement:t}=e,{trimmedDuration:l}=e,{dragStart:r}=e,{dragEnd:o}=e,{loadingTimeline:d}=e,s=[],c,u=0,h=100,m=null;const a=f=>{m=f},_=()=>{m=null},b=(f,E)=>{if(m){const v=document.getElementById("timeline");if(!v)return;const T=v.getBoundingClientRect();let C=(f.clientX-T.left)/T.width*100;if(E?C=m==="left"?u+E:h+E:C=(f.clientX-T.left)/T.width*100,C=Math.max(0,Math.min(C,100)),m==="left"){n(2,u=Math.min(C,h));const q=u/100*c;n(6,t.currentTime=q,t),n(8,r=q)}else if(m==="right"){n(3,h=Math.max(C,u));const q=h/100*c;n(6,t.currentTime=q,t),n(9,o=q)}const te=u/100*c,Y=h/100*c;n(7,l=Y-te),n(2,u),n(3,h)}},w=f=>{if(m){const E=1/c*100;f.key==="ArrowLeft"?b({clientX:0},-E):f.key==="ArrowRight"&&b({clientX:0},E)}},D=()=>{const f=document.createElement("canvas"),E=f.getContext("2d");if(!E)return;f.width=t.videoWidth,f.height=t.videoHeight,E.drawImage(t,0,0,f.width,f.height);const v=f.toDataURL("image/jpeg",.7);n(1,s=[...s,v])};lt(()=>{const f=()=>{c=t.duration;const E=c/ze;let v=0;const T=()=>{D(),v++,v<ze?n(6,t.currentTime+=E,t):t.removeEventListener("seeked",T)};t.addEventListener("seeked",T),n(6,t.currentTime=0,t)};t.readyState>=1?f():t.addEventListener("loadedmetadata",f)}),xt(()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",_),window.removeEventListener("keydown",w)}),lt(()=>{window.addEventListener("mousemove",b),window.addEventListener("mouseup",_),window.addEventListener("keydown",w)});const H=()=>a("left"),y=f=>{(f.key==="ArrowLeft"||f.key=="ArrowRight")&&a("left")},A=()=>a("right"),O=f=>{(f.key==="ArrowLeft"||f.key=="ArrowRight")&&a("right")};return i.$$set=f=>{"videoElement"in f&&n(6,t=f.videoElement),"trimmedDuration"in f&&n(7,l=f.trimmedDuration),"dragStart"in f&&n(8,r=f.dragStart),"dragEnd"in f&&n(9,o=f.dragEnd),"loadingTimeline"in f&&n(0,d=f.loadingTimeline)},i.$$.update=()=>{i.$$.dirty&2&&n(0,d=s.length!==ze)},[d,s,u,h,a,_,t,l,r,o,H,y,A,O]}class on extends Gt{constructor(e){super(),Kt(this,e,ln,nn,Yt,{videoElement:6,trimmedDuration:7,dragStart:8,dragEnd:9,loadingTimeline:0})}get videoElement(){return this.$$.ctx[6]}set videoElement(e){this.$$set({videoElement:e}),ve()}get trimmedDuration(){return this.$$.ctx[7]}set trimmedDuration(e){this.$$set({trimmedDuration:e}),ve()}get dragStart(){return this.$$.ctx[8]}set dragStart(e){this.$$set({dragStart:e}),ve()}get dragEnd(){return this.$$.ctx[9]}set dragEnd(e){this.$$set({dragEnd:e}),ve()}get loadingTimeline(){return this.$$.ctx[0]}set loadingTimeline(e){this.$$set({loadingTimeline:e}),ve()}}const{SvelteComponent:rn,add_flush_callback:Te,append:fe,attr:B,bind:$e,binding_callbacks:Se,check_outros:Ve,create_component:Ye,destroy_component:Ze,detach:J,element:K,empty:sn,flush:ne,group_outros:De,init:an,insert:Q,listen:Pe,mount_component:xe,noop:Ke,run_all:un,safe_not_equal:dn,set_data:fn,space:qe,text:_n,toggle_class:ce,transition_in:P,transition_out:F}=window.__gradio__svelte__internal,{onMount:cn}=window.__gradio__svelte__internal;function st(i){let e,n,t,l,r,o,d;function s(a){i[13](a)}function c(a){i[14](a)}function u(a){i[15](a)}function h(a){i[16](a)}let m={videoElement:i[2]};return i[9]!==void 0&&(m.dragStart=i[9]),i[10]!==void 0&&(m.dragEnd=i[10]),i[7]!==void 0&&(m.trimmedDuration=i[7]),i[11]!==void 0&&(m.loadingTimeline=i[11]),n=new on({props:m}),Se.push(()=>$e(n,"dragStart",s)),Se.push(()=>$e(n,"dragEnd",c)),Se.push(()=>$e(n,"trimmedDuration",u)),Se.push(()=>$e(n,"loadingTimeline",h)),{c(){e=K("div"),Ye(n.$$.fragment),B(e,"class","timeline-wrapper svelte-sxyn79")},m(a,_){Q(a,e,_),xe(n,e,null),d=!0},p(a,_){const b={};_&4&&(b.videoElement=a[2]),!t&&_&512&&(t=!0,b.dragStart=a[9],Te(()=>t=!1)),!l&&_&1024&&(l=!0,b.dragEnd=a[10],Te(()=>l=!1)),!r&&_&128&&(r=!0,b.trimmedDuration=a[7],Te(()=>r=!1)),!o&&_&2048&&(o=!0,b.loadingTimeline=a[11],Te(()=>o=!1)),n.$set(b)},i(a){d||(P(n.$$.fragment,a),d=!0)},o(a){F(n.$$.fragment,a),d=!1},d(a){a&&J(e),Ze(n)}}}function mn(i){let e;return{c(){e=K("div"),B(e,"class","svelte-sxyn79")},m(n,t){Q(n,e,t)},p:Ke,d(n){n&&J(e)}}}function hn(i){let e,n=_e(i[7])+"",t;return{c(){e=K("time"),t=_n(n),B(e,"aria-label","duration of selected region in seconds"),B(e,"class","svelte-sxyn79"),ce(e,"hidden",i[11])},m(l,r){Q(l,e,r),fe(e,t)},p(l,r){r&128&&n!==(n=_e(l[7])+"")&&fn(t,n),r&2048&&ce(e,"hidden",l[11])},d(l){l&&J(e)}}}function at(i){let e,n,t,l,r;return n=new yt({}),{c(){e=K("button"),Ye(n.$$.fragment),B(e,"class","action icon svelte-sxyn79"),e.disabled=i[1],B(e,"aria-label","Reset video to initial value")},m(o,d){Q(o,e,d),xe(n,e,null),t=!0,l||(r=Pe(e,"click",i[17]),l=!0)},p(o,d){(!t||d&2)&&(e.disabled=o[1])},i(o){t||(P(n.$$.fragment,o),t=!0)},o(o){F(n.$$.fragment,o),t=!1},d(o){o&&J(e),Ze(n),l=!1,r()}}}function ut(i){let e,n,t,l;const r=[bn,gn],o=[];function d(s,c){return s[0]===""?0:1}return e=d(i),n=o[e]=r[e](i),{c(){n.c(),t=sn()},m(s,c){o[e].m(s,c),Q(s,t,c),l=!0},p(s,c){let u=e;e=d(s),e===u?o[e].p(s,c):(De(),F(o[u],1,1,()=>{o[u]=null}),Ve(),n=o[e],n?n.p(s,c):(n=o[e]=r[e](s),n.c()),P(n,1),n.m(t.parentNode,t))},i(s){l||(P(n),l=!0)},o(s){F(n),l=!1},d(s){s&&J(t),o[e].d(s)}}}function gn(i){let e,n,t,l,r;return{c(){e=K("button"),e.textContent="Trim",n=qe(),t=K("button"),t.textContent="Cancel",B(e,"class","text-button svelte-sxyn79"),ce(e,"hidden",i[11]),B(t,"class","text-button svelte-sxyn79"),ce(t,"hidden",i[11])},m(o,d){Q(o,e,d),Q(o,n,d),Q(o,t,d),l||(r=[Pe(e,"click",i[18]),Pe(t,"click",i[12])],l=!0)},p(o,d){d&2048&&ce(e,"hidden",o[11]),d&2048&&ce(t,"hidden",o[11])},i:Ke,o:Ke,d(o){o&&(J(e),J(n),J(t)),l=!1,un(r)}}}function bn(i){let e,n,t,l,r;return n=new Lt({}),{c(){e=K("button"),Ye(n.$$.fragment),e.disabled=i[1],B(e,"class","action icon svelte-sxyn79"),B(e,"aria-label","Trim video to selection")},m(o,d){Q(o,e,d),xe(n,e,null),t=!0,l||(r=Pe(e,"click",i[12]),l=!0)},p(o,d){(!t||d&2)&&(e.disabled=o[1])},i(o){t||(P(n.$$.fragment,o),t=!0)},o(o){F(n.$$.fragment,o),t=!1},d(o){o&&J(e),Ze(n),l=!1,r()}}}function vn(i){let e,n,t,l,r,o,d,s=i[0]==="edit"&&st(i);function c(_,b){return _[0]==="edit"&&_[7]!==null?hn:mn}let u=c(i),h=u(i),m=i[3]&&i[0]===""&&at(i),a=i[4]&&ut(i);return{c(){e=K("div"),s&&s.c(),n=qe(),t=K("div"),h.c(),l=qe(),r=K("div"),m&&m.c(),o=qe(),a&&a.c(),B(r,"class","settings-wrapper svelte-sxyn79"),B(t,"class","controls svelte-sxyn79"),B(t,"data-testid","waveform-controls"),B(e,"class","container svelte-sxyn79")},m(_,b){Q(_,e,b),s&&s.m(e,null),fe(e,n),fe(e,t),h.m(t,null),fe(t,l),fe(t,r),m&&m.m(r,null),fe(r,o),a&&a.m(r,null),d=!0},p(_,[b]){_[0]==="edit"?s?(s.p(_,b),b&1&&P(s,1)):(s=st(_),s.c(),P(s,1),s.m(e,n)):s&&(De(),F(s,1,1,()=>{s=null}),Ve()),u===(u=c(_))&&h?h.p(_,b):(h.d(1),h=u(_),h&&(h.c(),h.m(t,l))),_[3]&&_[0]===""?m?(m.p(_,b),b&9&&P(m,1)):(m=at(_),m.c(),P(m,1),m.m(r,o)):m&&(De(),F(m,1,1,()=>{m=null}),Ve()),_[4]?a?(a.p(_,b),b&16&&P(a,1)):(a=ut(_),a.c(),P(a,1),a.m(r,null)):a&&(De(),F(a,1,1,()=>{a=null}),Ve())},i(_){d||(P(s),P(m),P(a),d=!0)},o(_){F(s),F(m),F(a),d=!1},d(_){_&&J(e),s&&s.d(),h.d(),m&&m.d(),a&&a.d()}}}function pn(i,e,n){let{videoElement:t}=e,{showRedo:l=!1}=e,{interactive:r=!0}=e,{mode:o=""}=e,{handle_reset_value:d}=e,{handle_trim_video:s}=e,{processingVideo:c=!1}=e,u;cn(async()=>{n(8,u=await Bt())});let h=null,m=0,a=0,_=!1;const b=()=>{o==="edit"?(n(0,o=""),n(7,h=t.duration)):n(0,o="edit")};function w(f){m=f,n(9,m)}function D(f){a=f,n(10,a)}function H(f){h=f,n(7,h),n(0,o),n(2,t)}function y(f){_=f,n(11,_)}const A=()=>{d(),n(0,o="")},O=()=>{n(0,o=""),n(1,c=!0),At(u,m,a,t).then(f=>{s(f)}).then(()=>{n(1,c=!1)})};return i.$$set=f=>{"videoElement"in f&&n(2,t=f.videoElement),"showRedo"in f&&n(3,l=f.showRedo),"interactive"in f&&n(4,r=f.interactive),"mode"in f&&n(0,o=f.mode),"handle_reset_value"in f&&n(5,d=f.handle_reset_value),"handle_trim_video"in f&&n(6,s=f.handle_trim_video),"processingVideo"in f&&n(1,c=f.processingVideo)},i.$$.update=()=>{i.$$.dirty&133&&o==="edit"&&h===null&&t&&n(7,h=t.duration)},[o,c,t,l,r,d,s,h,u,m,a,_,b,w,D,H,y,A,O]}class wn extends rn{constructor(e){super(),an(this,e,pn,vn,dn,{videoElement:2,showRedo:3,interactive:4,mode:0,handle_reset_value:5,handle_trim_video:6,processingVideo:1})}get videoElement(){return this.$$.ctx[2]}set videoElement(e){this.$$set({videoElement:e}),ne()}get showRedo(){return this.$$.ctx[3]}set showRedo(e){this.$$set({showRedo:e}),ne()}get interactive(){return this.$$.ctx[4]}set interactive(e){this.$$set({interactive:e}),ne()}get mode(){return this.$$.ctx[0]}set mode(e){this.$$set({mode:e}),ne()}get handle_reset_value(){return this.$$.ctx[5]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),ne()}get handle_trim_video(){return this.$$.ctx[6]}set handle_trim_video(e){this.$$set({handle_trim_video:e}),ne()}get processingVideo(){return this.$$.ctx[1]}set processingVideo(e){this.$$set({processingVideo:e}),ne()}}const{SvelteComponent:kn,add_flush_callback:we,append:M,attr:S,bind:ke,binding_callbacks:ye,bubble:We,check_outros:dt,create_component:me,destroy_component:he,detach:Ce,element:x,empty:yn,flush:N,group_outros:ft,init:En,insert:Re,listen:ie,mount_component:ge,prevent_default:_t,run_all:Tn,safe_not_equal:$n,set_data:ct,space:pe,src_url_equal:mt,stop_propagation:Sn,text:Ge,toggle_class:ht,transition_in:j,transition_out:G}=window.__gradio__svelte__internal,{createEventDispatcher:Vn}=window.__gradio__svelte__internal;function Dn(i){let e,n;return{c(){e=x("track"),S(e,"kind","captions"),mt(e.src,n=i[1])||S(e,"src",n),e.default=!0},m(t,l){Re(t,e,l)},p(t,l){l[0]&2&&!mt(e.src,n=t[1])&&S(e,"src",n)},d(t){t&&Ce(e)}}}function qn(i){let e,n;return e=new Mt({}),{c(){me(e.$$.fragment)},m(t,l){ge(e,t,l),n=!0},i(t){n||(j(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){he(e,t)}}}function Cn(i){let e,n;return e=new Pt({}),{c(){me(e.$$.fragment)},m(t,l){ge(e,t,l),n=!0},i(t){n||(j(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){he(e,t)}}}function Rn(i){let e,n;return e=new yt({}),{c(){me(e.$$.fragment)},m(t,l){ge(e,t,l),n=!0},i(t){n||(j(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){he(e,t)}}}function gt(i){let e,n,t;function l(o){i[30](o)}let r={videoElement:i[12],showRedo:!0,handle_trim_video:i[18],handle_reset_value:i[7]};return i[13]!==void 0&&(r.processingVideo=i[13]),e=new wn({props:r}),ye.push(()=>ke(e,"processingVideo",l)),{c(){me(e.$$.fragment)},m(o,d){ge(e,o,d),t=!0},p(o,d){const s={};d[0]&4096&&(s.videoElement=o[12]),d[0]&128&&(s.handle_reset_value=o[7]),!n&&d[0]&8192&&(n=!0,s.processingVideo=o[13],we(()=>n=!1)),e.$set(s)},i(o){t||(j(e.$$.fragment,o),t=!0)},o(o){G(e.$$.fragment,o),t=!1},d(o){he(e,o)}}}function Ln(i){let e,n,t,l,r,o,d,s,c,u,h,m,a,_,b,w=_e(i[9])+"",D,H,y=_e(i[10])+"",A,O,f,E,v,T,C,te,Y,q,be,Ee;function Ie(p){i[23](p)}function Ne(p){i[24](p)}function Ue(p){i[25](p)}function g(p){i[26](p)}let X={src:i[0],preload:"auto",autoplay:i[3],loop:i[4],is_stream:i[8],"data-testid":`${i[5]}-player`,processingVideo:i[13],$$slots:{default:[Dn]},$$scope:{ctx:i}};i[9]!==void 0&&(X.currentTime=i[9]),i[10]!==void 0&&(X.duration=i[10]),i[11]!==void 0&&(X.paused=i[11]),i[12]!==void 0&&(X.node=i[12]),t=new Ht({props:X}),ye.push(()=>ke(t,"currentTime",Ie)),ye.push(()=>ke(t,"duration",Ne)),ye.push(()=>ke(t,"paused",Ue)),ye.push(()=>ke(t,"node",g)),t.$on("click",i[15]),t.$on("play",i[27]),t.$on("pause",i[28]),t.$on("ended",i[17]),t.$on("load",i[29]);const Z=[Rn,Cn,qn],U=[];function et(p,k){return p[9]===p[10]?0:p[11]?1:2}m=et(i),a=U[m]=Z[m](i),C=new Wt({});let $=i[6]&&gt(i);return{c(){e=x("div"),n=x("div"),me(t.$$.fragment),s=pe(),c=x("div"),u=x("div"),h=x("span"),a.c(),_=pe(),b=x("span"),D=Ge(w),H=Ge(" / "),A=Ge(y),O=pe(),f=x("progress"),v=pe(),T=x("div"),me(C.$$.fragment),te=pe(),$&&$.c(),Y=yn(),S(n,"class","mirror-wrap svelte-euo1cw"),ht(n,"mirror",i[2]),S(h,"role","button"),S(h,"tabindex","0"),S(h,"class","icon svelte-euo1cw"),S(h,"aria-label","play-pause-replay-button"),S(b,"class","time svelte-euo1cw"),f.value=E=i[9]/i[10]||0,S(f,"class","svelte-euo1cw"),S(T,"role","button"),S(T,"tabindex","0"),S(T,"class","icon svelte-euo1cw"),S(T,"aria-label","full-screen"),S(u,"class","inner svelte-euo1cw"),S(c,"class","controls svelte-euo1cw"),S(e,"class","wrap svelte-euo1cw")},m(p,k){Re(p,e,k),M(e,n),ge(t,n,null),M(e,s),M(e,c),M(c,u),M(u,h),U[m].m(h,null),M(u,_),M(u,b),M(b,D),M(b,H),M(b,A),M(u,O),M(u,f),M(u,v),M(u,T),ge(C,T,null),Re(p,te,k),$&&$.m(p,k),Re(p,Y,k),q=!0,be||(Ee=[ie(h,"click",i[15]),ie(h,"keydown",i[15]),ie(f,"mousemove",i[14]),ie(f,"touchmove",_t(i[14])),ie(f,"click",Sn(_t(i[16]))),ie(T,"click",i[19]),ie(T,"keypress",i[19])],be=!0)},p(p,k){const I={};k[0]&1&&(I.src=p[0]),k[0]&8&&(I.autoplay=p[3]),k[0]&16&&(I.loop=p[4]),k[0]&256&&(I.is_stream=p[8]),k[0]&32&&(I["data-testid"]=`${p[5]}-player`),k[0]&8192&&(I.processingVideo=p[13]),k[0]&2|k[1]&2&&(I.$$scope={dirty:k,ctx:p}),!l&&k[0]&512&&(l=!0,I.currentTime=p[9],we(()=>l=!1)),!r&&k[0]&1024&&(r=!0,I.duration=p[10],we(()=>r=!1)),!o&&k[0]&2048&&(o=!0,I.paused=p[11],we(()=>o=!1)),!d&&k[0]&4096&&(d=!0,I.node=p[12],we(()=>d=!1)),t.$set(I),(!q||k[0]&4)&&ht(n,"mirror",p[2]);let je=m;m=et(p),m!==je&&(ft(),G(U[je],1,1,()=>{U[je]=null}),dt(),a=U[m],a||(a=U[m]=Z[m](p),a.c()),j(a,1),a.m(h,null)),(!q||k[0]&512)&&w!==(w=_e(p[9])+"")&&ct(D,w),(!q||k[0]&1024)&&y!==(y=_e(p[10])+"")&&ct(A,y),(!q||k[0]&1536&&E!==(E=p[9]/p[10]||0))&&(f.value=E),p[6]?$?($.p(p,k),k[0]&64&&j($,1)):($=gt(p),$.c(),j($,1),$.m(Y.parentNode,Y)):$&&(ft(),G($,1,1,()=>{$=null}),dt())},i(p){q||(j(t.$$.fragment,p),j(a),j(C.$$.fragment,p),j($),q=!0)},o(p){G(t.$$.fragment,p),G(a),G(C.$$.fragment,p),G($),q=!1},d(p){p&&(Ce(e),Ce(te),Ce(Y)),he(t),U[m].d(),he(C),$&&$.d(p),be=!1,Tn(Ee)}}}function Mn(i,e,n){let{root:t=""}=e,{src:l}=e,{subtitle:r=null}=e,{mirror:o}=e,{autoplay:d}=e,{loop:s}=e,{label:c="test"}=e,{interactive:u=!1}=e,{handle_change:h=()=>{}}=e,{handle_reset_value:m=()=>{}}=e,{upload:a}=e,{is_stream:_}=e;const b=Vn();let w=0,D,H=!0,y,A=!1;function O(g){if(!D)return;if(g.type==="click"){E(g);return}if(g.type!=="touchmove"&&!(g.buttons&1))return;const X=g.type==="touchmove"?g.touches[0].clientX:g.clientX,{left:Z,right:U}=g.currentTarget.getBoundingClientRect();n(9,w=D*(X-Z)/(U-Z))}async function f(){document.fullscreenElement!=y&&(y.currentTime>0&&!y.paused&&!y.ended&&y.readyState>y.HAVE_CURRENT_DATA?y.pause():await y.play())}function E(g){const{left:X,right:Z}=g.currentTarget.getBoundingClientRect();n(9,w=D*(g.clientX-X)/(Z-X))}function v(){b("stop"),b("end")}const T=async g=>{let X=new File([g],"video.mp4");const Z=await Xt([X]);let U=(await a(Z,t))?.filter(Boolean)[0];h(U)};function C(){y.requestFullscreen()}function te(g){w=g,n(9,w)}function Y(g){D=g,n(10,D)}function q(g){H=g,n(11,H)}function be(g){y=g,n(12,y)}function Ee(g){We.call(this,i,g)}function Ie(g){We.call(this,i,g)}function Ne(g){We.call(this,i,g)}function Ue(g){A=g,n(13,A)}return i.$$set=g=>{"root"in g&&n(20,t=g.root),"src"in g&&n(0,l=g.src),"subtitle"in g&&n(1,r=g.subtitle),"mirror"in g&&n(2,o=g.mirror),"autoplay"in g&&n(3,d=g.autoplay),"loop"in g&&n(4,s=g.loop),"label"in g&&n(5,c=g.label),"interactive"in g&&n(6,u=g.interactive),"handle_change"in g&&n(21,h=g.handle_change),"handle_reset_value"in g&&n(7,m=g.handle_reset_value),"upload"in g&&n(22,a=g.upload),"is_stream"in g&&n(8,_=g.is_stream)},[l,r,o,d,s,c,u,m,_,w,D,H,y,A,O,f,E,v,T,C,t,h,a,te,Y,q,be,Ee,Ie,Ne,Ue]}class Pn extends kn{constructor(e){super(),En(this,e,Mn,Ln,$n,{root:20,src:0,subtitle:1,mirror:2,autoplay:3,loop:4,label:5,interactive:6,handle_change:21,handle_reset_value:7,upload:22,is_stream:8},null,[-1,-1])}get root(){return this.$$.ctx[20]}set root(e){this.$$set({root:e}),N()}get src(){return this.$$.ctx[0]}set src(e){this.$$set({src:e}),N()}get subtitle(){return this.$$.ctx[1]}set subtitle(e){this.$$set({subtitle:e}),N()}get mirror(){return this.$$.ctx[2]}set mirror(e){this.$$set({mirror:e}),N()}get autoplay(){return this.$$.ctx[3]}set autoplay(e){this.$$set({autoplay:e}),N()}get loop(){return this.$$.ctx[4]}set loop(e){this.$$set({loop:e}),N()}get label(){return this.$$.ctx[5]}set label(e){this.$$set({label:e}),N()}get interactive(){return this.$$.ctx[6]}set interactive(e){this.$$set({interactive:e}),N()}get handle_change(){return this.$$.ctx[21]}set handle_change(e){this.$$set({handle_change:e}),N()}get handle_reset_value(){return this.$$.ctx[7]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),N()}get upload(){return this.$$.ctx[22]}set upload(e){this.$$set({upload:e}),N()}get is_stream(){return this.$$.ctx[8]}set is_stream(e){this.$$set({is_stream:e}),N()}}const Bn=Pn,{SvelteComponent:An,append:Hn,attr:bt,bubble:le,check_outros:Le,create_component:re,destroy_component:se,detach:Be,element:Xn,empty:In,flush:W,group_outros:Me,init:Nn,insert:Ae,mount_component:ae,noop:Et,safe_not_equal:Tt,space:Qe,transition_in:V,transition_out:L}=window.__gradio__svelte__internal,{createEventDispatcher:Un,afterUpdate:jn,tick:Fn}=window.__gradio__svelte__internal;function On(i){let e=i[0].url,n,t,l,r,o=vt(i),d=i[6]&&pt(i),s=i[5]&&wt(i);return{c(){o.c(),n=Qe(),t=Xn("div"),d&&d.c(),l=Qe(),s&&s.c(),bt(t,"class","icon-buttons svelte-rvdo70"),bt(t,"data-testid","download-div")},m(c,u){o.m(c,u),Ae(c,n,u),Ae(c,t,u),d&&d.m(t,null),Hn(t,l),s&&s.m(t,null),r=!0},p(c,u){u&1&&Tt(e,e=c[0].url)?(Me(),L(o,1,1,Et),Le(),o=vt(c),o.c(),V(o,1),o.m(n.parentNode,n)):o.p(c,u),c[6]?d?(d.p(c,u),u&64&&V(d,1)):(d=pt(c),d.c(),V(d,1),d.m(t,l)):d&&(Me(),L(d,1,1,()=>{d=null}),Le()),c[5]?s?(s.p(c,u),u&32&&V(s,1)):(s=wt(c),s.c(),V(s,1),s.m(t,null)):s&&(Me(),L(s,1,1,()=>{s=null}),Le())},i(c){r||(V(o),V(d),V(s),r=!0)},o(c){L(o),L(d),L(s),r=!1},d(c){c&&(Be(n),Be(t)),o.d(c),d&&d.d(),s&&s.d()}}}function zn(i){let e,n;return e=new Vt({props:{unpadded_box:!0,size:"large",$$slots:{default:[Gn]},$$scope:{ctx:i}}}),{c(){re(e.$$.fragment)},m(t,l){ae(e,t,l),n=!0},p(t,l){const r={};l&2097152&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(V(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){se(e,t)}}}function vt(i){let e,n;return e=new Bn({props:{src:i[0].url,subtitle:i[1]?.url,is_stream:i[0].is_stream,autoplay:i[4],mirror:!1,label:i[2],loop:i[7],interactive:!1,upload:i[9]}}),e.$on("play",i[10]),e.$on("pause",i[11]),e.$on("stop",i[12]),e.$on("end",i[13]),e.$on("load",i[14]),{c(){re(e.$$.fragment)},m(t,l){ae(e,t,l),n=!0},p(t,l){const r={};l&1&&(r.src=t[0].url),l&2&&(r.subtitle=t[1]?.url),l&1&&(r.is_stream=t[0].is_stream),l&16&&(r.autoplay=t[4]),l&4&&(r.label=t[2]),l&128&&(r.loop=t[7]),l&512&&(r.upload=t[9]),e.$set(r)},i(t){n||(V(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){se(e,t)}}}function pt(i){let e,n;return e=new Rt({props:{href:i[0].is_stream?i[0].url?.replace("playlist.m3u8","playlist-file"):i[0].url,download:i[0].orig_name||i[0].path,$$slots:{default:[Wn]},$$scope:{ctx:i}}}),{c(){re(e.$$.fragment)},m(t,l){ae(e,t,l),n=!0},p(t,l){const r={};l&1&&(r.href=t[0].is_stream?t[0].url?.replace("playlist.m3u8","playlist-file"):t[0].url),l&1&&(r.download=t[0].orig_name||t[0].path),l&2097152&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(V(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){se(e,t)}}}function Wn(i){let e,n;return e=new $t({props:{Icon:qt,label:"Download"}}),{c(){re(e.$$.fragment)},m(t,l){ae(e,t,l),n=!0},p:Et,i(t){n||(V(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){se(e,t)}}}function wt(i){let e,n;return e=new Dt({props:{i18n:i[8],value:i[0],formatter:i[15]}}),e.$on("error",i[16]),e.$on("share",i[17]),{c(){re(e.$$.fragment)},m(t,l){ae(e,t,l),n=!0},p(t,l){const r={};l&256&&(r.i18n=t[8]),l&1&&(r.value=t[0]),e.$set(r)},i(t){n||(V(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){se(e,t)}}}function Gn(i){let e,n;return e=new kt({}),{c(){re(e.$$.fragment)},m(t,l){ae(e,t,l),n=!0},i(t){n||(V(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){se(e,t)}}}function Jn(i){let e,n,t,l,r,o;e=new St({props:{show_label:i[3],Icon:kt,label:i[2]||"Video"}});const d=[zn,On],s=[];function c(u,h){return!u[0]||u[0].url===void 0?0:1}return t=c(i),l=s[t]=d[t](i),{c(){re(e.$$.fragment),n=Qe(),l.c(),r=In()},m(u,h){ae(e,u,h),Ae(u,n,h),s[t].m(u,h),Ae(u,r,h),o=!0},p(u,[h]){const m={};h&8&&(m.show_label=u[3]),h&4&&(m.label=u[2]||"Video"),e.$set(m);let a=t;t=c(u),t===a?s[t].p(u,h):(Me(),L(s[a],1,1,()=>{s[a]=null}),Le(),l=s[t],l?l.p(u,h):(l=s[t]=d[t](u),l.c()),V(l,1),l.m(r.parentNode,r))},i(u){o||(V(e.$$.fragment,u),V(l),o=!0)},o(u){L(e.$$.fragment,u),L(l),o=!1},d(u){u&&(Be(n),Be(r)),se(e,u),s[t].d(u)}}}function Kn(i,e,n){let{value:t=null}=e,{subtitle:l=null}=e,{label:r=void 0}=e,{show_label:o=!0}=e,{autoplay:d}=e,{show_share_button:s=!0}=e,{show_download_button:c=!0}=e,{loop:u}=e,{i18n:h}=e,{upload:m}=e,a=null,_=null;const b=Un();jn(async()=>{t!==a&&l!==_&&_!==null&&(a=t,n(0,t=null),await Fn(),n(0,t=a)),a=t,_=l});function w(v){le.call(this,i,v)}function D(v){le.call(this,i,v)}function H(v){le.call(this,i,v)}function y(v){le.call(this,i,v)}function A(v){le.call(this,i,v)}const O=async v=>v?await Ct(v.data):"";function f(v){le.call(this,i,v)}function E(v){le.call(this,i,v)}return i.$$set=v=>{"value"in v&&n(0,t=v.value),"subtitle"in v&&n(1,l=v.subtitle),"label"in v&&n(2,r=v.label),"show_label"in v&&n(3,o=v.show_label),"autoplay"in v&&n(4,d=v.autoplay),"show_share_button"in v&&n(5,s=v.show_share_button),"show_download_button"in v&&n(6,c=v.show_download_button),"loop"in v&&n(7,u=v.loop),"i18n"in v&&n(8,h=v.i18n),"upload"in v&&n(9,m=v.upload)},i.$$.update=()=>{i.$$.dirty&1&&t&&b("change",t)},[t,l,r,o,d,s,c,u,h,m,w,D,H,y,A,O,f,E]}class Qn extends An{constructor(e){super(),Nn(this,e,Kn,Jn,Tt,{value:0,subtitle:1,label:2,show_label:3,autoplay:4,show_share_button:5,show_download_button:6,loop:7,i18n:8,upload:9})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),W()}get subtitle(){return this.$$.ctx[1]}set subtitle(e){this.$$set({subtitle:e}),W()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),W()}get show_label(){return this.$$.ctx[3]}set show_label(e){this.$$set({show_label:e}),W()}get autoplay(){return this.$$.ctx[4]}set autoplay(e){this.$$set({autoplay:e}),W()}get show_share_button(){return this.$$.ctx[5]}set show_share_button(e){this.$$set({show_share_button:e}),W()}get show_download_button(){return this.$$.ctx[6]}set show_download_button(e){this.$$set({show_download_button:e}),W()}get loop(){return this.$$.ctx[7]}set loop(e){this.$$set({loop:e}),W()}get i18n(){return this.$$.ctx[8]}set i18n(e){this.$$set({i18n:e}),W()}get upload(){return this.$$.ctx[9]}set upload(e){this.$$set({upload:e}),W()}}const di=Object.freeze(Object.defineProperty({__proto__:null,default:Qn},Symbol.toStringTag,{value:"Module"}));export{Bn as P,Qn as V,di as a};
//# sourceMappingURL=VideoPreview-rDL1Lwwt.js.map
