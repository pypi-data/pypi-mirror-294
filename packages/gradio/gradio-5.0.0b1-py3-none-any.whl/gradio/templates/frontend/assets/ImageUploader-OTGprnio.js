import{I as rt,C as at}from"./Index-DmELy3F_.js";import{B as ot}from"./BlockLabel-BFDmAMU7.js";import{I as st}from"./Image-Bsh8Umrh.js";import{W as ct,a as ut,S as _t}from"./SelectSource-drTLFExz.js";import{g as ft}from"./utils-Gtzs_Zla.js";import{D as nt}from"./DropdownArrow-BbyxIEQP.js";import{S as mt}from"./Square-C-9GHszC.js";import{f as dt}from"./Button-D6vjqmf0.js";import{S as gt}from"./StreamingBar-CFluBwxi.js";import{b as ht}from"./index-PmUrmWf3.js";import{U as pt}from"./Upload-C859DIh0.js";/* empty css                                                   */import{I as bt}from"./Image-DdxZNCNa.js";const{SvelteComponent:vt,append:Pe,attr:H,detach:wt,init:kt,insert:yt,noop:Me,safe_not_equal:$t,svg_element:Be}=window.__gradio__svelte__internal;function It(i){let e,t,n;return{c(){e=Be("svg"),t=Be("path"),n=Be("circle"),H(t,"d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"),H(n,"cx","12"),H(n,"cy","13"),H(n,"r","4"),H(e,"xmlns","http://www.w3.org/2000/svg"),H(e,"width","100%"),H(e,"height","100%"),H(e,"viewBox","0 0 24 24"),H(e,"fill","none"),H(e,"stroke","currentColor"),H(e,"stroke-width","1.5"),H(e,"stroke-linecap","round"),H(e,"stroke-linejoin","round"),H(e,"class","feather feather-camera")},m(l,o){yt(l,e,o),Pe(e,t),Pe(e,n)},p:Me,i:Me,o:Me,d(l){l&&wt(e)}}}class St extends vt{constructor(e){super(),kt(this,e,null,It,$t,{})}}const{SvelteComponent:Ct,append:qt,attr:P,detach:Dt,init:Et,insert:zt,noop:Te,safe_not_equal:Wt,svg_element:Fe}=window.__gradio__svelte__internal;function Mt(i){let e,t;return{c(){e=Fe("svg"),t=Fe("circle"),P(t,"cx","12"),P(t,"cy","12"),P(t,"r","10"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"width","100%"),P(e,"height","100%"),P(e,"viewBox","0 0 24 24"),P(e,"stroke-width","1.5"),P(e,"stroke-linecap","round"),P(e,"stroke-linejoin","round"),P(e,"class","feather feather-circle")},m(n,l){zt(n,e,l),qt(e,t)},p:Te,i:Te,o:Te,d(n){n&&Dt(e)}}}class Bt extends Ct{constructor(e){super(),Et(this,e,null,Mt,Wt,{})}}const{SvelteComponent:Tt,append:me,attr:je,create_component:jt,destroy_component:Rt,detach:Ut,element:Re,init:Nt,insert:Lt,listen:At,mount_component:Ht,noop:Ot,safe_not_equal:Pt,set_style:Ft,space:Vt,text:Gt,transition_in:Jt,transition_out:Kt}=window.__gradio__svelte__internal,{createEventDispatcher:Qt}=window.__gradio__svelte__internal;function Xt(i){let e,t,n,l,o,r="Click to Access Webcam",s,a,f,c;return l=new ct({}),{c(){e=Re("button"),t=Re("div"),n=Re("span"),jt(l.$$.fragment),o=Vt(),s=Gt(r),je(n,"class","icon-wrap svelte-qbrfs"),je(t,"class","wrap svelte-qbrfs"),je(e,"class","svelte-qbrfs"),Ft(e,"height","100%")},m(m,$){Lt(m,e,$),me(e,t),me(t,n),Ht(l,n,null),me(t,o),me(t,s),a=!0,f||(c=At(e,"click",i[1]),f=!0)},p:Ot,i(m){a||(Jt(l.$$.fragment,m),a=!0)},o(m){Kt(l.$$.fragment,m),a=!1},d(m){m&&Ut(e),Rt(l),f=!1,c()}}}function Yt(i){const e=Qt();return[e,()=>e("click")]}class Zt extends Tt{constructor(e){super(),Nt(this,e,Yt,Xt,Pt,{})}}function xt(){return navigator.mediaDevices.enumerateDevices()}function en(i,e){e.srcObject=i,e.muted=!0,e.play()}async function Ve(i,e,t){const n={width:{ideal:1920},height:{ideal:1440}},l={video:t?{deviceId:{exact:t},...n}:n,audio:i};return navigator.mediaDevices.getUserMedia(l).then(o=>(en(o,e),o))}function tn(i){return i.filter(t=>t.kind==="videoinput")}const{SvelteComponent:nn,action_destroyer:ln,add_render_callback:rn,append:I,attr:k,binding_callbacks:an,check_outros:oe,create_component:K,create_in_transition:on,destroy_component:Q,destroy_each:sn,detach:L,element:W,empty:Le,ensure_array_like:Ge,flush:G,group_outros:se,init:cn,insert:A,listen:we,mount_component:X,noop:Ae,run_all:un,safe_not_equal:_n,set_data:_e,set_input_value:Ue,set_style:it,space:J,src_url_equal:Je,stop_propagation:fn,text:fe,toggle_class:Z,transition_in:S,transition_out:z}=window.__gradio__svelte__internal,{createEventDispatcher:mn,onMount:dn}=window.__gradio__svelte__internal;function Ke(i,e,t){const n=i.slice();return n[37]=e[t],n}function gn(i){let e,t,n,l,o,r,s,a,f,c,m;const $=[bn,pn],w=[];function q(b,v){return b[2]==="video"||b[1]?0:1}n=q(i),l=w[n]=$[n](i);let _=!i[11]&&Qe(i),p=i[13]&&i[8]&&Xe(i);return{c(){e=W("div"),t=W("button"),l.c(),r=J(),_&&_.c(),s=J(),p&&p.c(),a=Le(),k(t,"aria-label",o=i[2]==="image"?"capture photo":"start recording"),k(t,"class","svelte-aipan1"),k(e,"class","button-wrap svelte-aipan1")},m(b,v){A(b,e,v),I(e,t),w[n].m(t,null),I(e,r),_&&_.m(e,null),A(b,s,v),p&&p.m(b,v),A(b,a,v),f=!0,c||(m=we(t,"click",i[16]),c=!0)},p(b,v){let O=n;n=q(b),n===O?w[n].p(b,v):(se(),z(w[O],1,1,()=>{w[O]=null}),oe(),l=w[n],l?l.p(b,v):(l=w[n]=$[n](b),l.c()),S(l,1),l.m(t,null)),(!f||v[0]&4&&o!==(o=b[2]==="image"?"capture photo":"start recording"))&&k(t,"aria-label",o),b[11]?_&&(se(),z(_,1,1,()=>{_=null}),oe()):_?(_.p(b,v),v[0]&2048&&S(_,1)):(_=Qe(b),_.c(),S(_,1),_.m(e,null)),b[13]&&b[8]?p?(p.p(b,v),v[0]&8448&&S(p,1)):(p=Xe(b),p.c(),S(p,1),p.m(a.parentNode,a)):p&&(se(),z(p,1,1,()=>{p=null}),oe())},i(b){f||(S(l),S(_),S(p),f=!0)},o(b){z(l),z(_),z(p),f=!1},d(b){b&&(L(e),L(s),L(a)),w[n].d(),_&&_.d(),p&&p.d(b),c=!1,m()}}}function hn(i){let e,t,n,l;return t=new Zt({}),t.$on("click",i[26]),{c(){e=W("div"),K(t.$$.fragment),k(e,"title","grant webcam access"),it(e,"height","100%")},m(o,r){A(o,e,r),X(t,e,null),l=!0},p:Ae,i(o){l||(S(t.$$.fragment,o),o&&(n||rn(()=>{n=on(e,dt,{delay:100,duration:200}),n.start()})),l=!0)},o(o){z(t.$$.fragment,o),l=!1},d(o){o&&L(e),Q(t)}}}function pn(i){let e,t,n;return t=new St({}),{c(){e=W("div"),K(t.$$.fragment),k(e,"class","icon svelte-aipan1"),k(e,"title","capture photo")},m(l,o){A(l,e,o),X(t,e,null),n=!0},p:Ae,i(l){n||(S(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){l&&L(e),Q(t)}}}function bn(i){let e,t,n,l;const o=[kn,wn,vn],r=[];function s(a,f){return a[1]&&a[10]==="waiting"?0:a[1]&&a[10]==="open"||!a[1]&&a[11]?1:2}return e=s(i),t=r[e]=o[e](i),{c(){t.c(),n=Le()},m(a,f){r[e].m(a,f),A(a,n,f),l=!0},p(a,f){let c=e;e=s(a),e===c?r[e].p(a,f):(se(),z(r[c],1,1,()=>{r[c]=null}),oe(),t=r[e],t?t.p(a,f):(t=r[e]=o[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){l||(S(t),l=!0)},o(a){z(t),l=!1},d(a){a&&L(n),r[e].d(a)}}}function vn(i){let e,t,n,l,o=i[4]("audio.record")+"",r,s;return n=new Bt({}),{c(){e=W("div"),t=W("div"),K(n.$$.fragment),l=J(),r=fe(o),k(t,"class","icon color-primary svelte-aipan1"),k(t,"title","start recording"),k(e,"class","icon-with-text svelte-aipan1")},m(a,f){A(a,e,f),I(e,t),X(n,t,null),I(e,l),I(e,r),s=!0},p(a,f){(!s||f[0]&16)&&o!==(o=a[4]("audio.record")+"")&&_e(r,o)},i(a){s||(S(n.$$.fragment,a),s=!0)},o(a){z(n.$$.fragment,a),s=!1},d(a){a&&L(e),Q(n)}}}function wn(i){let e,t,n,l,o=i[4]("audio.stop")+"",r,s;return n=new mt({}),{c(){e=W("div"),t=W("div"),K(n.$$.fragment),l=J(),r=fe(o),k(t,"class","icon color-primary svelte-aipan1"),k(t,"title","stop recording"),k(e,"class","icon-with-text svelte-aipan1")},m(a,f){A(a,e,f),I(e,t),X(n,t,null),I(e,l),I(e,r),s=!0},p(a,f){(!s||f[0]&16)&&o!==(o=a[4]("audio.stop")+"")&&_e(r,o)},i(a){s||(S(n.$$.fragment,a),s=!0)},o(a){z(n.$$.fragment,a),s=!1},d(a){a&&L(e),Q(n)}}}function kn(i){let e,t,n,l,o=i[4]("audio.waiting")+"",r,s;return n=new ut({}),{c(){e=W("div"),t=W("div"),K(n.$$.fragment),l=J(),r=fe(o),k(t,"class","icon color-primary svelte-aipan1"),k(t,"title","spinner"),k(e,"class","icon-with-text svelte-aipan1"),it(e,"width","var(--size-24)")},m(a,f){A(a,e,f),I(e,t),X(n,t,null),I(e,l),I(e,r),s=!0},p(a,f){(!s||f[0]&16)&&o!==(o=a[4]("audio.waiting")+"")&&_e(r,o)},i(a){s||(S(n.$$.fragment,a),s=!0)},o(a){z(n.$$.fragment,a),s=!1},d(a){a&&L(e),Q(n)}}}function Qe(i){let e,t,n,l,o;return t=new nt({}),{c(){e=W("button"),K(t.$$.fragment),k(e,"class","icon svelte-aipan1"),k(e,"aria-label","select input source")},m(r,s){A(r,e,s),X(t,e,null),n=!0,l||(o=we(e,"click",i[27]),l=!0)},p:Ae,i(r){n||(S(t.$$.fragment,r),n=!0)},o(r){z(t.$$.fragment,r),n=!1},d(r){r&&L(e),Q(t),l=!1,o()}}}function Xe(i){let e,t,n,l,o,r,s;n=new nt({});function a(m,$){return m[7].length===0?$n:yn}let f=a(i),c=f(i);return{c(){e=W("select"),t=W("button"),K(n.$$.fragment),l=J(),c.c(),k(t,"class","inset-icon svelte-aipan1"),k(e,"class","select-wrap svelte-aipan1"),k(e,"aria-label","select source")},m(m,$){A(m,e,$),I(e,t),X(n,t,null),I(t,l),c.m(e,null),o=!0,r||(s=[we(t,"click",fn(i[28])),ln(He.call(null,e,i[17])),we(e,"change",i[14])],r=!0)},p(m,$){f===(f=a(m))&&c?c.p(m,$):(c.d(1),c=f(m),c&&(c.c(),c.m(e,null)))},i(m){o||(S(n.$$.fragment,m),o=!0)},o(m){z(n.$$.fragment,m),o=!1},d(m){m&&L(e),Q(n),c.d(),r=!1,un(s)}}}function yn(i){let e,t=Ge(i[7]),n=[];for(let l=0;l<t.length;l+=1)n[l]=Ye(Ke(i,t,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=Le()},m(l,o){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(l,o);A(l,e,o)},p(l,o){if(o[0]&384){t=Ge(l[7]);let r;for(r=0;r<t.length;r+=1){const s=Ke(l,t,r);n[r]?n[r].p(s,o):(n[r]=Ye(s),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(l){l&&L(e),sn(n,l)}}}function $n(i){let e,t=i[4]("common.no_devices")+"",n;return{c(){e=W("option"),n=fe(t),e.__value="",Ue(e,e.__value),k(e,"class","svelte-aipan1")},m(l,o){A(l,e,o),I(e,n)},p(l,o){o[0]&16&&t!==(t=l[4]("common.no_devices")+"")&&_e(n,t)},d(l){l&&L(e)}}}function Ye(i){let e,t=i[37].label+"",n,l,o,r;return{c(){e=W("option"),n=fe(t),l=J(),e.__value=o=i[37].deviceId,Ue(e,e.__value),e.selected=r=i[8].deviceId===i[37].deviceId,k(e,"class","svelte-aipan1")},m(s,a){A(s,e,a),I(e,n),I(e,l)},p(s,a){a[0]&128&&t!==(t=s[37].label+"")&&_e(n,t),a[0]&128&&o!==(o=s[37].deviceId)&&(e.__value=o,Ue(e,e.__value)),a[0]&384&&r!==(r=s[8].deviceId===s[37].deviceId)&&(e.selected=r)},d(s){s&&L(e)}}}function In(i){let e,t,n,l,o,r,s,a,f,c,m;t=new gt({props:{time_limit:i[9]}});const $=[hn,gn],w=[];function q(_,p){return _[12]?1:0}return f=q(i),c=w[f]=$[f](i),{c(){e=W("div"),K(t.$$.fragment),n=J(),l=W("video"),o=J(),r=W("img"),a=J(),c.c(),k(l,"class","svelte-aipan1"),Z(l,"flip",i[3]),Z(l,"hide",!i[12]||i[12]&&!!i[0]),Je(r.src,s=i[0]?.url)||k(r,"src",s),k(r,"class","svelte-aipan1"),Z(r,"hide",!i[12]||i[12]&&!i[0]),k(e,"class","wrap svelte-aipan1")},m(_,p){A(_,e,p),X(t,e,null),I(e,n),I(e,l),i[25](l),I(e,o),I(e,r),I(e,a),w[f].m(e,null),m=!0},p(_,p){const b={};p[0]&512&&(b.time_limit=_[9]),t.$set(b),(!m||p[0]&8)&&Z(l,"flip",_[3]),(!m||p[0]&4097)&&Z(l,"hide",!_[12]||_[12]&&!!_[0]),(!m||p[0]&1&&!Je(r.src,s=_[0]?.url))&&k(r,"src",s),(!m||p[0]&4097)&&Z(r,"hide",!_[12]||_[12]&&!_[0]);let v=f;f=q(_),f===v?w[f].p(_,p):(se(),z(w[v],1,1,()=>{w[v]=null}),oe(),c=w[f],c?c.p(_,p):(c=w[f]=$[f](_),c.c()),S(c,1),c.m(e,null))},i(_){m||(S(t.$$.fragment,_),S(c),m=!0)},o(_){z(t.$$.fragment,_),z(c),m=!1},d(_){_&&L(e),Q(t),i[25](null),w[f].d()}}}function He(i,e){const t=n=>{i&&!i.contains(n.target)&&!n.defaultPrevented&&e(n)};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function Sn(i,e,t){let n,l=[],o=null,r=null,s="closed";const a=g=>{g==="closed"?(t(9,r=null),t(10,s="closed"),t(0,C=null)):g==="waiting"?t(10,s="waiting"):t(10,s="open")},f=g=>{B&&t(9,r=g)};let c,{streaming:m=!1}=e,{pending:$=!1}=e,{root:w=""}=e,{stream_every:q=1}=e,{mode:_="image"}=e,{mirror_webcam:p}=e,{include_audio:b}=e,{i18n:v}=e,{upload:O}=e,{value:C=null}=e;const T=mn();dn(()=>c=document.createElement("canvas"));const y=async g=>{const V=g.target.value;await Ve(b,n,V).then(async le=>{j=le,t(8,o=l.find(re=>re.deviceId===V)||null),t(13,Y=!1)})};async function d(){try{Ve(b,n).then(async g=>{t(12,ie=!0),t(7,l=await xt()),j=g}).then(()=>tn(l)).then(g=>{t(7,l=g);const U=j.getTracks().map(V=>V.getSettings()?.deviceId)[0];t(8,o=U&&g.find(V=>V.deviceId===U)||l[0])}),(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&T("error",v("image.no_webcam_support"))}catch(g){if(g instanceof DOMException&&g.name=="NotAllowedError")T("error",v("image.allow_webcam_access"));else throw g}}function h(){var g=c.getContext("2d");if((!m||m&&B)&&n.videoWidth&&n.videoHeight){if(c.width=n.videoWidth,c.height=n.videoHeight,g.drawImage(n,0,0,n.videoWidth,n.videoHeight),p&&(g.scale(-1,1),g.drawImage(n,-n.videoWidth,0)),m&&(!B||s==="waiting"))return;c.toBlob(U=>{T(m?"stream":"capture",U)},`image/${m?"jpeg":"png"}`,.8)}}let B=!1,M=[],j,R,F;function Ie(){if(B){F.stop();let g=new Blob(M,{type:R}),U=new FileReader;U.onload=async function(V){if(V.target){let le=new File([g],"sample."+R.substring(6));const re=await ht([le]);let We=(await O(re,w))?.filter(Boolean)[0];T("capture",We),T("stop_recording")}},U.readAsDataURL(g)}else{T("start_recording"),M=[];let g=["video/webm","video/mp4"];for(let U of g)if(MediaRecorder.isTypeSupported(U)){R=U;break}if(R===null){console.error("No supported MediaRecorder mimeType");return}F=new MediaRecorder(j,{mimeType:R}),F.addEventListener("dataavailable",function(U){M.push(U.data)}),F.start(200)}t(11,B=!B)}let ie=!1;function Se(){_==="image"&&m&&t(11,B=!B),_==="image"?h():Ie(),!B&&j&&(T("close_stream"),j.getTracks().forEach(g=>g.stop()),t(6,n.srcObject=null,n),t(12,ie=!1),window.setTimeout(()=>{t(0,C=null)},500),t(0,C=null))}m&&_==="image"&&window.setInterval(()=>{n&&!$&&h()},q*1e3);let Y=!1;function Ce(g){g.preventDefault(),g.stopPropagation(),t(13,Y=!1)}function qe(g){an[g?"unshift":"push"](()=>{n=g,t(6,n)})}const De=async()=>d(),Ee=()=>t(13,Y=!0),ze=()=>t(13,Y=!1);return i.$$set=g=>{"streaming"in g&&t(1,m=g.streaming),"pending"in g&&t(20,$=g.pending),"root"in g&&t(21,w=g.root),"stream_every"in g&&t(22,q=g.stream_every),"mode"in g&&t(2,_=g.mode),"mirror_webcam"in g&&t(3,p=g.mirror_webcam),"include_audio"in g&&t(23,b=g.include_audio),"i18n"in g&&t(4,v=g.i18n),"upload"in g&&t(24,O=g.upload),"value"in g&&t(0,C=g.value)},[C,m,_,p,v,He,n,l,o,r,s,B,ie,Y,y,d,Se,Ce,a,f,$,w,q,b,O,qe,De,Ee,ze]}class Cn extends nn{constructor(e){super(),cn(this,e,Sn,In,_n,{modify_stream:18,set_time_limit:19,streaming:1,pending:20,root:21,stream_every:22,mode:2,mirror_webcam:3,include_audio:23,i18n:4,upload:24,value:0,click_outside:5},null,[-1,-1])}get modify_stream(){return this.$$.ctx[18]}get set_time_limit(){return this.$$.ctx[19]}get streaming(){return this.$$.ctx[1]}set streaming(e){this.$$set({streaming:e}),G()}get pending(){return this.$$.ctx[20]}set pending(e){this.$$set({pending:e}),G()}get root(){return this.$$.ctx[21]}set root(e){this.$$set({root:e}),G()}get stream_every(){return this.$$.ctx[22]}set stream_every(e){this.$$set({stream_every:e}),G()}get mode(){return this.$$.ctx[2]}set mode(e){this.$$set({mode:e}),G()}get mirror_webcam(){return this.$$.ctx[3]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),G()}get include_audio(){return this.$$.ctx[23]}set include_audio(e){this.$$set({include_audio:e}),G()}get i18n(){return this.$$.ctx[4]}set i18n(e){this.$$set({i18n:e}),G()}get upload(){return this.$$.ctx[24]}set upload(e){this.$$set({upload:e}),G()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),G()}get click_outside(){return He}}const qn=Cn,{SvelteComponent:Dn,attr:En,create_component:zn,destroy_component:Wn,detach:Mn,element:Bn,init:Tn,insert:jn,mount_component:Rn,noop:Un,safe_not_equal:Nn,transition_in:Ln,transition_out:An}=window.__gradio__svelte__internal,{createEventDispatcher:Hn}=window.__gradio__svelte__internal;function On(i){let e,t,n;return t=new rt({props:{Icon:at,label:"Remove Image"}}),t.$on("click",i[1]),{c(){e=Bn("div"),zn(t.$$.fragment),En(e,"class","svelte-s6ybro")},m(l,o){jn(l,e,o),Rn(t,e,null),n=!0},p:Un,i(l){n||(Ln(t.$$.fragment,l),n=!0)},o(l){An(t.$$.fragment,l),n=!1},d(l){l&&Mn(e),Wn(t)}}}function Pn(i){const e=Hn();return[e,n=>{e("remove_image"),n.stopPropagation()}]}class Fn extends Dn{constructor(e){super(),Tn(this,e,Pn,On,Nn,{})}}const{SvelteComponent:Vn,add_flush_callback:ce,append:de,attr:pe,bind:ue,binding_callbacks:x,bubble:ge,check_outros:be,create_component:ee,create_slot:Gn,destroy_component:te,detach:ke,element:Ne,empty:Jn,flush:D,get_all_dirty_from_scope:Kn,get_slot_changes:Qn,group_outros:ve,init:Xn,insert:ye,listen:Yn,mount_component:ne,noop:Zn,safe_not_equal:xn,set_style:Ze,space:he,toggle_class:$e,transition_in:E,transition_out:N,update_slot_base:ei}=window.__gradio__svelte__internal,{createEventDispatcher:ti,tick:ni}=window.__gradio__svelte__internal;function xe(i){let e,t;return e=new Fn({}),e.$on("remove_image",i[28]),{c(){ee(e.$$.fragment)},m(n,l){ne(e,n,l),t=!0},p:Zn,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){te(e,n)}}}function et(i){let e;const t=i[27].default,n=Gn(t,i,i[42],null);return{c(){n&&n.c()},m(l,o){n&&n.m(l,o),e=!0},p(l,o){n&&n.p&&(!e||o[1]&2048)&&ei(n,t,l,l[42],e?Qn(t,l[42],o,null):Kn(l[42]),null)},i(l){e||(E(n,l),e=!0)},o(l){N(n,l),e=!1},d(l){n&&n.d(l)}}}function ii(i){let e,t,n=i[2]===null&&et(i);return{c(){n&&n.c(),e=Jn()},m(l,o){n&&n.m(l,o),ye(l,e,o),t=!0},p(l,o){l[2]===null?n?(n.p(l,o),o[0]&4&&E(n,1)):(n=et(l),n.c(),E(n,1),n.m(e.parentNode,e)):n&&(ve(),N(n,1,1,()=>{n=null}),be())},i(l){t||(E(n),t=!0)},o(l){N(n),t=!1},d(l){l&&ke(e),n&&n.d(l)}}}function li(i){let e,t,n,l,o;return t=new bt({props:{src:i[2].url,alt:i[2].alt_text}}),{c(){e=Ne("div"),ee(t.$$.fragment),pe(e,"class","image-frame svelte-1ti4ehe"),$e(e,"selectable",i[10])},m(r,s){ye(r,e,s),ne(t,e,null),n=!0,l||(o=Yn(e,"click",i[24]),l=!0)},p(r,s){const a={};s[0]&4&&(a.src=r[2].url),s[0]&4&&(a.alt=r[2].alt_text),t.$set(a),(!n||s[0]&1024)&&$e(e,"selectable",r[10])},i(r){n||(E(t.$$.fragment,r),n=!0)},o(r){N(t.$$.fragment,r),n=!1},d(r){r&&ke(e),te(t),l=!1,o()}}}function ri(i){let e,t,n,l;function o(a){i[33](a)}function r(a){i[34](a)}let s={root:i[11],value:i[2],mirror_webcam:i[9],stream_every:i[16],streaming:i[8],mode:"image",include_audio:!1,i18n:i[12],upload:i[14]};return i[3]!==void 0&&(s.modify_stream=i[3]),i[4]!==void 0&&(s.set_time_limit=i[4]),e=new qn({props:s}),x.push(()=>ue(e,"modify_stream",o)),x.push(()=>ue(e,"set_time_limit",r)),e.$on("capture",i[35]),e.$on("stream",i[36]),e.$on("error",i[37]),e.$on("drag",i[38]),e.$on("upload",i[39]),e.$on("close_stream",i[40]),{c(){ee(e.$$.fragment)},m(a,f){ne(e,a,f),l=!0},p(a,f){const c={};f[0]&2048&&(c.root=a[11]),f[0]&4&&(c.value=a[2]),f[0]&512&&(c.mirror_webcam=a[9]),f[0]&65536&&(c.stream_every=a[16]),f[0]&256&&(c.streaming=a[8]),f[0]&4096&&(c.i18n=a[12]),f[0]&16384&&(c.upload=a[14]),!t&&f[0]&8&&(t=!0,c.modify_stream=a[3],ce(()=>t=!1)),!n&&f[0]&16&&(n=!0,c.set_time_limit=a[4],ce(()=>n=!1)),e.$set(c)},i(a){l||(E(e.$$.fragment,a),l=!0)},o(a){N(e.$$.fragment,a),l=!1},d(a){te(e,a)}}}function tt(i){let e,t,n;function l(r){i[41](r)}let o={sources:i[7],handle_clear:i[21],handle_select:i[25]};return i[0]!==void 0&&(o.active_source=i[0]),e=new _t({props:o}),x.push(()=>ue(e,"active_source",l)),{c(){ee(e.$$.fragment)},m(r,s){ne(e,r,s),n=!0},p(r,s){const a={};s[0]&128&&(a.sources=r[7]),!t&&s[0]&1&&(t=!0,a.active_source=r[0],ce(()=>t=!1)),e.$set(a)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){N(e.$$.fragment,r),n=!1},d(r){te(e,r)}}}function ai(i){let e,t,n,l,o,r,s,a,f,c,m,$,w=i[7].length>1||i[7].includes("clipboard"),q;e=new ot({props:{show_label:i[6],Icon:st,label:i[5]||"Image"}});let _=i[2]?.url&&!i[18]&&xe(i);function p(d){i[30](d)}function b(d){i[31](d)}let v={hidden:i[2]!==null||i[0]==="webcam",filetype:i[0]==="clipboard"?"clipboard":"image/*",root:i[11],max_file_size:i[13],disable_click:!i[7].includes("upload")||i[2]!==null,upload:i[14],stream_handler:i[15],$$slots:{default:[ii]},$$scope:{ctx:i}};i[17]!==void 0&&(v.uploading=i[17]),i[1]!==void 0&&(v.dragging=i[1]),r=new pt({props:v}),i[29](r),x.push(()=>ue(r,"uploading",p)),x.push(()=>ue(r,"dragging",b)),r.$on("load",i[20]),r.$on("error",i[32]);const O=[ri,li],C=[];function T(d,h){return d[0]==="webcam"&&(d[8]||!d[8]&&!d[2])?0:d[2]!==null&&!d[8]?1:-1}~(c=T(i))&&(m=C[c]=O[c](i));let y=w&&tt(i);return{c(){ee(e.$$.fragment),t=he(),n=Ne("div"),_&&_.c(),l=he(),o=Ne("div"),ee(r.$$.fragment),f=he(),m&&m.c(),$=he(),y&&y.c(),pe(o,"class","upload-container svelte-1ti4ehe"),$e(o,"reduced-height",i[7].length>1),Ze(o,"width",i[2]?"auto":"100%"),pe(n,"data-testid","image"),pe(n,"class","image-container svelte-1ti4ehe")},m(d,h){ne(e,d,h),ye(d,t,h),ye(d,n,h),_&&_.m(n,null),de(n,l),de(n,o),ne(r,o,null),de(o,f),~c&&C[c].m(o,null),de(n,$),y&&y.m(n,null),q=!0},p(d,h){const B={};h[0]&64&&(B.show_label=d[6]),h[0]&32&&(B.label=d[5]||"Image"),e.$set(B),d[2]?.url&&!d[18]?_?(_.p(d,h),h[0]&262148&&E(_,1)):(_=xe(d),_.c(),E(_,1),_.m(n,l)):_&&(ve(),N(_,1,1,()=>{_=null}),be());const M={};h[0]&5&&(M.hidden=d[2]!==null||d[0]==="webcam"),h[0]&1&&(M.filetype=d[0]==="clipboard"?"clipboard":"image/*"),h[0]&2048&&(M.root=d[11]),h[0]&8192&&(M.max_file_size=d[13]),h[0]&132&&(M.disable_click=!d[7].includes("upload")||d[2]!==null),h[0]&16384&&(M.upload=d[14]),h[0]&32768&&(M.stream_handler=d[15]),h[0]&4|h[1]&2048&&(M.$$scope={dirty:h,ctx:d}),!s&&h[0]&131072&&(s=!0,M.uploading=d[17],ce(()=>s=!1)),!a&&h[0]&2&&(a=!0,M.dragging=d[1],ce(()=>a=!1)),r.$set(M);let j=c;c=T(d),c===j?~c&&C[c].p(d,h):(m&&(ve(),N(C[j],1,1,()=>{C[j]=null}),be()),~c?(m=C[c],m?m.p(d,h):(m=C[c]=O[c](d),m.c()),E(m,1),m.m(o,null)):m=null),(!q||h[0]&128)&&$e(o,"reduced-height",d[7].length>1),h[0]&4&&Ze(o,"width",d[2]?"auto":"100%"),h[0]&128&&(w=d[7].length>1||d[7].includes("clipboard")),w?y?(y.p(d,h),h[0]&128&&E(y,1)):(y=tt(d),y.c(),E(y,1),y.m(n,null)):y&&(ve(),N(y,1,1,()=>{y=null}),be())},i(d){q||(E(e.$$.fragment,d),E(_),E(r.$$.fragment,d),E(m),E(y),q=!0)},o(d){N(e.$$.fragment,d),N(_),N(r.$$.fragment,d),N(m),N(y),q=!1},d(d){d&&(ke(t),ke(n)),te(e,d),_&&_.d(),i[29](null),te(r),~c&&C[c].d(),y&&y.d()}}}function oi(i,e,t){let n,{$$slots:l={},$$scope:o}=e,{value:r}=e,{label:s=void 0}=e,{show_label:a}=e,{sources:f=["upload","clipboard","webcam"]}=e,{streaming:c=!1}=e,{pending:m=!1}=e,{mirror_webcam:$}=e,{selectable:w=!1}=e,{root:q}=e,{i18n:_}=e,{max_file_size:p=null}=e,{upload:b}=e,{stream_handler:v}=e,{stream_every:O}=e,{modify_stream:C}=e,{set_time_limit:T}=e,y,d=!1,{active_source:h=null}=e;function B({detail:u}){c||(t(2,r=u),R("upload"))}function M(){t(2,r=null),R("clear"),R("change",null)}async function j(u,ae){t(26,m=!0);const Oe=await y.load_files([new File([u],`image/${c?"jpeg":"png"}`)]);ae==="change"||ae==="upload"?(t(2,r=Oe?.[0]||null),await ni(),R("change")):R("stream",{value:Oe?.[0]||null,is_value_data:!0}),t(26,m=!1)}const R=ti();let{dragging:F=!1}=e;function Ie(u){let ae=ft(u);ae&&R("select",{index:ae,value:null})}async function ie(u){switch(u){case"clipboard":y.paste_clipboard();break}}const Se=()=>{t(2,r=null),R("clear")};function Y(u){x[u?"unshift":"push"](()=>{y=u,t(19,y)})}function Ce(u){d=u,t(17,d)}function qe(u){F=u,t(1,F)}function De(u){ge.call(this,i,u)}function Ee(u){C=u,t(3,C)}function ze(u){T=u,t(4,T)}const g=u=>j(u.detail,"change"),U=u=>j(u.detail,"stream");function V(u){ge.call(this,i,u)}function le(u){ge.call(this,i,u)}const re=u=>j(u.detail,"upload");function We(u){ge.call(this,i,u)}function lt(u){h=u,t(0,h),t(7,f)}return i.$$set=u=>{"value"in u&&t(2,r=u.value),"label"in u&&t(5,s=u.label),"show_label"in u&&t(6,a=u.show_label),"sources"in u&&t(7,f=u.sources),"streaming"in u&&t(8,c=u.streaming),"pending"in u&&t(26,m=u.pending),"mirror_webcam"in u&&t(9,$=u.mirror_webcam),"selectable"in u&&t(10,w=u.selectable),"root"in u&&t(11,q=u.root),"i18n"in u&&t(12,_=u.i18n),"max_file_size"in u&&t(13,p=u.max_file_size),"upload"in u&&t(14,b=u.upload),"stream_handler"in u&&t(15,v=u.stream_handler),"stream_every"in u&&t(16,O=u.stream_every),"modify_stream"in u&&t(3,C=u.modify_stream),"set_time_limit"in u&&t(4,T=u.set_time_limit),"active_source"in u&&t(0,h=u.active_source),"dragging"in u&&t(1,F=u.dragging),"$$scope"in u&&t(42,o=u.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&129&&!h&&f&&t(0,h=f[0]),i.$$.dirty[0]&257&&t(18,n=c&&h==="webcam"),i.$$.dirty[0]&393216&&d&&!n&&t(2,r=null),i.$$.dirty[0]&2&&R("drag",F)},[h,F,r,C,T,s,a,f,c,$,w,q,_,p,b,v,O,d,n,y,B,M,j,R,Ie,ie,m,l,Se,Y,Ce,qe,De,Ee,ze,g,U,V,le,re,We,lt,o]}class si extends Vn{constructor(e){super(),Xn(this,e,oi,ai,xn,{value:2,label:5,show_label:6,sources:7,streaming:8,pending:26,mirror_webcam:9,selectable:10,root:11,i18n:12,max_file_size:13,upload:14,stream_handler:15,stream_every:16,modify_stream:3,set_time_limit:4,active_source:0,dragging:1},null,[-1,-1])}get value(){return this.$$.ctx[2]}set value(e){this.$$set({value:e}),D()}get label(){return this.$$.ctx[5]}set label(e){this.$$set({label:e}),D()}get show_label(){return this.$$.ctx[6]}set show_label(e){this.$$set({show_label:e}),D()}get sources(){return this.$$.ctx[7]}set sources(e){this.$$set({sources:e}),D()}get streaming(){return this.$$.ctx[8]}set streaming(e){this.$$set({streaming:e}),D()}get pending(){return this.$$.ctx[26]}set pending(e){this.$$set({pending:e}),D()}get mirror_webcam(){return this.$$.ctx[9]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),D()}get selectable(){return this.$$.ctx[10]}set selectable(e){this.$$set({selectable:e}),D()}get root(){return this.$$.ctx[11]}set root(e){this.$$set({root:e}),D()}get i18n(){return this.$$.ctx[12]}set i18n(e){this.$$set({i18n:e}),D()}get max_file_size(){return this.$$.ctx[13]}set max_file_size(e){this.$$set({max_file_size:e}),D()}get upload(){return this.$$.ctx[14]}set upload(e){this.$$set({upload:e}),D()}get stream_handler(){return this.$$.ctx[15]}set stream_handler(e){this.$$set({stream_handler:e}),D()}get stream_every(){return this.$$.ctx[16]}set stream_every(e){this.$$set({stream_every:e}),D()}get modify_stream(){return this.$$.ctx[3]}set modify_stream(e){this.$$set({modify_stream:e}),D()}get set_time_limit(){return this.$$.ctx[4]}set set_time_limit(e){this.$$set({set_time_limit:e}),D()}get active_source(){return this.$$.ctx[0]}set active_source(e){this.$$set({active_source:e}),D()}get dragging(){return this.$$.ctx[1]}set dragging(e){this.$$set({dragging:e}),D()}}const yi=si;export{yi as I,qn as W};
//# sourceMappingURL=ImageUploader-OTGprnio.js.map
