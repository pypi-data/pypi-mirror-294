const __vite__fileDeps=["./module-CVOMZVHM.js","./module-C-VadMaF.js","./index-PmUrmWf3.js","./index-b6vQhz8R.css","./module-BA06XY8_.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{s as Et,W as Rn,p as Mt,a as gt,A as Sn,S as En}from"./StaticAudio-D6e1k7vh.js";import{_ as At,b as Mn}from"./index-PmUrmWf3.js";import{U as An}from"./Upload-C859DIh0.js";import{M as $t}from"./ModifyUpload-BlTDeGPD.js";import{S as xt}from"./Index-DmELy3F_.js";import{B as Cn}from"./BlockLabel-BFDmAMU7.js";import{M as Pn}from"./Music-CDm0RGMk.js";import{a as Bn,S as Ln}from"./SelectSource-drTLFExz.js";import{S as zn}from"./StreamingBar-CFluBwxi.js";import{P as In}from"./Trim-JQYgj7Jd.js";import{f as de}from"./Blocks-CLiYArz7.js";import{B as en}from"./Button-D6vjqmf0.js";import{U as Tn}from"./UploadText-YzMgjHoE.js";import{default as Fo}from"./Example-BQyGztrG.js";import"./Empty-i_-7WnjX.js";import"./ShareButton-0ema9xiJ.js";import"./Community-CC3ywblm.js";import"./Download-DVtk-Jv3.js";import"./Play-B0Q0U1Qz.js";import"./Undo-CpmTQw3B.js";import"./file-url-BoqKM9uW.js";import"./hls-CnVhpNcu.js";import"./DownloadLink-bOXpZH3e.js";import"./svelte/svelte.js";/* empty css                                                   */import"./Upload-Cp8Go_XF.js";function ft(n,e,t,i){return new(t||(t=Promise))(function(o,l){function s(_){try{r(i.next(_))}catch(a){l(a)}}function u(_){try{r(i.throw(_))}catch(a){l(a)}}function r(_){var a;_.done?o(_.value):(a=_.value,a instanceof t?a:new t(function(c){c(a)})).then(s,u)}r((i=i.apply(n,[])).next())})}class Un{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,i){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),i?.once){const o=()=>{this.removeEventListener(e,o),this.removeEventListener(e,t)};return this.addEventListener(e,o),o}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var i;(i=this.listeners[e])===null||i===void 0||i.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(i=>i(...t))}}class qn extends Un{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}}const jn=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class Le extends qn{constructor(e){var t;super(Object.assign(Object.assign({},e),{audioBitsPerSecond:(t=e.audioBitsPerSecond)!==null&&t!==void 0?t:128e3})),this.stream=null,this.mediaRecorder=null}static create(e){return new Le(e||{})}renderMicStream(e){const t=new AudioContext,i=t.createMediaStreamSource(e),o=t.createAnalyser();i.connect(o);const l=o.frequencyBinCount,s=new Float32Array(l),u=l/t.sampleRate;let r;const _=()=>{o.getFloatTimeDomainData(s),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[s],u)),r=requestAnimationFrame(_)};return _(),()=>{cancelAnimationFrame(r),i?.disconnect(),t?.close()}}startMic(e){return ft(this,void 0,void 0,function*(){let t;try{t=yield navigator.mediaDevices.getUserMedia({audio:!e?.deviceId||{deviceId:e.deviceId}})}catch(o){throw new Error("Error accessing the microphone: "+o.message)}const i=this.renderMicStream(t);return this.subscriptions.push(this.once("destroy",i)),this.stream=t,t})}stopMic(){this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(e){return ft(this,void 0,void 0,function*(){const t=this.stream||(yield this.startMic(e)),i=this.mediaRecorder||new MediaRecorder(t,{mimeType:this.options.mimeType||jn.find(l=>MediaRecorder.isTypeSupported(l)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=i,this.stopRecording();const o=[];i.ondataavailable=l=>{l.data.size>0&&o.push(l.data)},i.onstop=()=>{var l;const s=new Blob(o,{type:i.mimeType});this.emit("record-end",s),this.options.renderRecordedAudio!==!1&&((l=this.wavesurfer)===null||l===void 0||l.load(URL.createObjectURL(s)))},i.start(),this.emit("record-start")})}isRecording(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="recording"}isPaused(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="paused"}stopRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.stop())}pauseRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.pause(),this.emit("record-pause"))}resumeRecording(){var e;this.isPaused()&&((e=this.mediaRecorder)===null||e===void 0||e.resume(),this.emit("record-resume"))}static getAvailableAudioDevices(){return ft(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(e=>e.filter(t=>t.kind==="audioinput"))})}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}}const{SvelteComponent:On,append:tn,attr:Ct,destroy_each:Wn,detach:Fe,element:pt,empty:Nn,ensure_array_like:Pt,flush:Bt,init:Fn,insert:He,noop:Lt,safe_not_equal:Hn,set_data:nn,set_input_value:bt,text:on}=window.__gradio__svelte__internal,{createEventDispatcher:Vn}=window.__gradio__svelte__internal;function zt(n,e,t){const i=n.slice();return i[3]=e[t],i}function Jn(n){let e,t=Pt(n[0]),i=[];for(let o=0;o<t.length;o+=1)i[o]=It(zt(n,t,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=Nn()},m(o,l){for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(o,l);He(o,e,l)},p(o,l){if(l&1){t=Pt(o[0]);let s;for(s=0;s<t.length;s+=1){const u=zt(o,t,s);i[s]?i[s].p(u,l):(i[s]=It(u),i[s].c(),i[s].m(e.parentNode,e))}for(;s<i.length;s+=1)i[s].d(1);i.length=t.length}},d(o){o&&Fe(e),Wn(i,o)}}}function Gn(n){let e,t=n[1]("audio.no_microphone")+"",i;return{c(){e=pt("option"),i=on(t),e.__value="",bt(e,e.__value)},m(o,l){He(o,e,l),tn(e,i)},p(o,l){l&2&&t!==(t=o[1]("audio.no_microphone")+"")&&nn(i,t)},d(o){o&&Fe(e)}}}function It(n){let e,t=n[3].label+"",i,o;return{c(){e=pt("option"),i=on(t),e.__value=o=n[3].deviceId,bt(e,e.__value)},m(l,s){He(l,e,s),tn(e,i)},p(l,s){s&1&&t!==(t=l[3].label+"")&&nn(i,t),s&1&&o!==(o=l[3].deviceId)&&(e.__value=o,bt(e,e.__value))},d(l){l&&Fe(e)}}}function Yn(n){let e,t;function i(s,u){return s[0].length===0?Gn:Jn}let o=i(n),l=o(n);return{c(){e=pt("select"),l.c(),Ct(e,"class","mic-select svelte-1ya9x7a"),Ct(e,"aria-label","Select input device"),e.disabled=t=n[0].length===0},m(s,u){He(s,e,u),l.m(e,null)},p(s,[u]){o===(o=i(s))&&l?l.p(s,u):(l.d(1),l=o(s),l&&(l.c(),l.m(e,null))),u&1&&t!==(t=s[0].length===0)&&(e.disabled=t)},i:Lt,o:Lt,d(s){s&&Fe(e),l.d()}}}function Kn(n,e,t){let{i18n:i}=e,{micDevices:o=[]}=e;const l=Vn();return n.$$set=s=>{"i18n"in s&&t(1,i=s.i18n),"micDevices"in s&&t(0,o=s.micDevices)},n.$$.update=()=>{if(n.$$.dirty&2)try{let s=[];Le.getAvailableAudioDevices().then(u=>{t(0,o=u),u.forEach(r=>{r.deviceId&&s.push(r)}),t(0,o=s)})}catch(s){throw s instanceof DOMException&&s.name=="NotAllowedError"&&l("error",i("audio.allow_recording_access")),s}},[o,i]}class sn extends On{constructor(e){super(),Fn(this,e,Kn,Yn,Hn,{i18n:1,micDevices:0})}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),Bt()}get micDevices(){return this.$$.ctx[0]}set micDevices(e){this.$$set({micDevices:e}),Bt()}}const{SvelteComponent:Qn,add_flush_callback:Xn,append:j,attr:Q,bind:Zn,binding_callbacks:ke,create_component:Tt,destroy_component:Ut,detach:rn,element:_e,flush:Ee,init:$n,insert:ln,listen:Me,mount_component:qt,run_all:xn,safe_not_equal:ei,set_data:Ae,space:ve,text:Ce,transition_in:jt,transition_out:Ot}=window.__gradio__svelte__internal;function Wt(n){let e,t;return{c(){e=_e("time"),t=Ce(n[2]),Q(e,"class","duration-button duration svelte-11fum4b")},m(i,o){ln(i,e,o),j(e,t)},p(i,o){o&4&&Ae(t,i[2])},d(i){i&&rn(e)}}}function ti(n){let e,t,i,o=n[1]("audio.record")+"",l,s,u,r=n[1]("audio.stop")+"",_,a,c,h,v=n[1]("audio.stop")+"",m,p,w,f,D,E,P=n[1]("audio.resume")+"",y,A,F,T,k,U,q,le;f=new In({});let z=n[4]&&!n[3]&&Wt(n);function H(S){n[21](S)}let R={i18n:n[1]};return n[5]!==void 0&&(R.micDevices=n[5]),T=new sn({props:R}),ke.push(()=>Zn(T,"micDevices",H)),{c(){e=_e("div"),t=_e("div"),i=_e("button"),l=Ce(o),s=ve(),u=_e("button"),_=Ce(r),c=ve(),h=_e("button"),m=Ce(v),p=ve(),w=_e("button"),Tt(f.$$.fragment),D=ve(),E=_e("button"),y=Ce(P),A=ve(),z&&z.c(),F=ve(),Tt(T.$$.fragment),Q(i,"class","record record-button svelte-11fum4b"),Q(u,"class",a="stop-button "+(n[0].isPaused()?"stop-button-paused":"")+" svelte-11fum4b"),Q(h,"id","stop-paused"),Q(h,"class","stop-button-paused svelte-11fum4b"),Q(w,"aria-label","pause"),Q(w,"class","pause-button svelte-11fum4b"),Q(E,"class","resume-button svelte-11fum4b"),Q(t,"class","wrapper svelte-11fum4b"),Q(e,"class","controls svelte-11fum4b")},m(S,C){ln(S,e,C),j(e,t),j(t,i),j(i,l),n[11](i),j(t,s),j(t,u),j(u,_),n[13](u),j(t,c),j(t,h),j(h,m),n[15](h),j(t,p),j(t,w),qt(f,w,null),n[17](w),j(t,D),j(t,E),j(E,y),n[19](E),j(t,A),z&&z.m(t,null),j(e,F),qt(T,e,null),U=!0,q||(le=[Me(i,"click",n[12]),Me(u,"click",n[14]),Me(h,"click",n[16]),Me(w,"click",n[18]),Me(E,"click",n[20])],q=!0)},p(S,[C]){(!U||C&2)&&o!==(o=S[1]("audio.record")+"")&&Ae(l,o),(!U||C&2)&&r!==(r=S[1]("audio.stop")+"")&&Ae(_,r),(!U||C&1&&a!==(a="stop-button "+(S[0].isPaused()?"stop-button-paused":"")+" svelte-11fum4b"))&&Q(u,"class",a),(!U||C&2)&&v!==(v=S[1]("audio.stop")+"")&&Ae(m,v),(!U||C&2)&&P!==(P=S[1]("audio.resume")+"")&&Ae(y,P),S[4]&&!S[3]?z?z.p(S,C):(z=Wt(S),z.c(),z.m(t,null)):z&&(z.d(1),z=null);const I={};C&2&&(I.i18n=S[1]),!k&&C&32&&(k=!0,I.micDevices=S[5],Xn(()=>k=!1)),T.$set(I)},i(S){U||(jt(f.$$.fragment,S),jt(T.$$.fragment,S),U=!0)},o(S){Ot(f.$$.fragment,S),Ot(T.$$.fragment,S),U=!1},d(S){S&&rn(e),n[11](null),n[13](null),n[15](null),Ut(f),n[17](null),n[19](null),z&&z.d(),Ut(T),q=!1,xn(le)}}}function ni(n,e,t){let{record:i}=e,{i18n:o}=e,l=[],s,u,r,_,a,{record_time:c}=e,{show_recording_waveform:h}=e,{timing:v=!1}=e;function m(k){ke[k?"unshift":"push"](()=>{s=k,t(6,s),t(0,i)})}const p=()=>i.startRecording();function w(k){ke[k?"unshift":"push"](()=>{_=k,t(9,_),t(0,i)})}const f=()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopRecording()};function D(k){ke[k?"unshift":"push"](()=>{a=k,t(10,a),t(0,i)})}const E=()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopRecording()};function P(k){ke[k?"unshift":"push"](()=>{u=k,t(7,u),t(0,i)})}const y=()=>i.pauseRecording();function A(k){ke[k?"unshift":"push"](()=>{r=k,t(8,r),t(0,i)})}const F=()=>i.resumeRecording();function T(k){l=k,t(5,l)}return n.$$set=k=>{"record"in k&&t(0,i=k.record),"i18n"in k&&t(1,o=k.i18n),"record_time"in k&&t(2,c=k.record_time),"show_recording_waveform"in k&&t(3,h=k.show_recording_waveform),"timing"in k&&t(4,v=k.timing)},n.$$.update=()=>{n.$$.dirty&1&&i.on("record-start",()=>{i.startMic(),t(6,s.style.display="none",s),t(9,_.style.display="flex",_),t(7,u.style.display="block",u)}),n.$$.dirty&1&&i.on("record-end",()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopMic(),t(6,s.style.display="flex",s),t(9,_.style.display="none",_),t(7,u.style.display="none",u),t(6,s.disabled=!1,s)}),n.$$.dirty&1&&i.on("record-pause",()=>{t(7,u.style.display="none",u),t(8,r.style.display="block",r),t(9,_.style.display="none",_),t(10,a.style.display="flex",a)}),n.$$.dirty&1&&i.on("record-resume",()=>{t(7,u.style.display="block",u),t(8,r.style.display="none",r),t(6,s.style.display="none",s),t(9,_.style.display="flex",_),t(10,a.style.display="none",a)})},[i,o,c,h,v,l,s,u,r,_,a,m,p,w,f,D,E,P,y,A,F,T]}class ii extends Qn{constructor(e){super(),$n(this,e,ni,ti,ei,{record:0,i18n:1,record_time:2,show_recording_waveform:3,timing:4})}get record(){return this.$$.ctx[0]}set record(e){this.$$set({record:e}),Ee()}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),Ee()}get record_time(){return this.$$.ctx[2]}set record_time(e){this.$$set({record_time:e}),Ee()}get show_recording_waveform(){return this.$$.ctx[3]}set show_recording_waveform(e){this.$$set({show_recording_waveform:e}),Ee()}get timing(){return this.$$.ctx[4]}set timing(e){this.$$set({timing:e}),Ee()}}const{SvelteComponent:oi,add_flush_callback:qe,append:J,attr:$,bind:je,binding_callbacks:fe,check_outros:Nt,create_component:an,destroy_component:un,detach:ze,element:x,flush:he,group_outros:Ft,init:si,insert:Ie,mount_component:_n,noop:ri,safe_not_equal:li,set_data:cn,space:ye,text:fn,transition_in:ce,transition_out:De}=window.__gradio__svelte__internal,{onMount:ai}=window.__gradio__svelte__internal,{createEventDispatcher:ui}=window.__gradio__svelte__internal;function Ht(n){let e,t,i,o,l,s=n[0]==="edit"&&n[16]>0&&Vt(n);function u(a,c){return a[15]?ci:_i}let r=u(n),_=r(n);return{c(){e=x("div"),t=x("time"),t.textContent="0:00",i=ye(),o=x("div"),s&&s.c(),l=ye(),_.c(),$(t,"class","time svelte-9n45fh"),$(e,"class","timestamps svelte-9n45fh")},m(a,c){Ie(a,e,c),J(e,t),n[23](t),J(e,i),J(e,o),s&&s.m(o,null),J(o,l),_.m(o,null)},p(a,c){a[0]==="edit"&&a[16]>0?s?s.p(a,c):(s=Vt(a),s.c(),s.m(o,l)):s&&(s.d(1),s=null),r===(r=u(a))&&_?_.p(a,c):(_.d(1),_=r(a),_&&(_.c(),_.m(o,null)))},d(a){a&&ze(e),n[23](null),s&&s.d(),_.d()}}}function Vt(n){let e,t=de(n[16])+"",i;return{c(){e=x("time"),i=fn(t),$(e,"class","trim-duration svelte-9n45fh")},m(o,l){Ie(o,e,l),J(e,i)},p(o,l){l[0]&65536&&t!==(t=de(o[16])+"")&&cn(i,t)},d(o){o&&ze(e)}}}function _i(n){let e;return{c(){e=x("time"),e.textContent="0:00",$(e,"class","duration svelte-9n45fh")},m(t,i){Ie(t,e,i),n[24](e)},p:ri,d(t){t&&ze(e),n[24](null)}}}function ci(n){let e,t=de(n[14])+"",i;return{c(){e=x("time"),i=fn(t),$(e,"class","duration svelte-9n45fh")},m(o,l){Ie(o,e,l),J(e,i)},p(o,l){l[0]&16384&&t!==(t=de(o[14])+"")&&cn(i,t)},d(o){o&&ze(e)}}}function Jt(n){let e,t,i;function o(s){n[25](s)}let l={i18n:n[1],timing:n[15],show_recording_waveform:n[2].show_recording_waveform,record_time:de(n[14])};return n[8]!==void 0&&(l.record=n[8]),e=new ii({props:l}),fe.push(()=>je(e,"record",o)),{c(){an(e.$$.fragment)},m(s,u){_n(e,s,u),i=!0},p(s,u){const r={};u[0]&2&&(r.i18n=s[1]),u[0]&32768&&(r.timing=s[15]),u[0]&4&&(r.show_recording_waveform=s[2].show_recording_waveform),u[0]&16384&&(r.record_time=de(s[14])),!t&&u[0]&256&&(t=!0,r.record=s[8],qe(()=>t=!1)),e.$set(r)},i(s){i||(ce(e.$$.fragment,s),i=!0)},o(s){De(e.$$.fragment,s),i=!1},d(s){un(e,s)}}}function Gt(n){let e,t,i,o,l;function s(a){n[26](a)}function u(a){n[27](a)}function r(a){n[28](a)}let _={container:n[6],playing:n[12],audio_duration:n[13],i18n:n[1],editable:n[4],interactive:!0,handle_trim_audio:n[17],show_redo:!0,handle_reset_value:n[3],waveform_options:n[2]};return n[5]!==void 0&&(_.waveform=n[5]),n[16]!==void 0&&(_.trimDuration=n[16]),n[0]!==void 0&&(_.mode=n[0]),e=new Rn({props:_}),fe.push(()=>je(e,"waveform",s)),fe.push(()=>je(e,"trimDuration",u)),fe.push(()=>je(e,"mode",r)),{c(){an(e.$$.fragment)},m(a,c){_n(e,a,c),l=!0},p(a,c){const h={};c[0]&64&&(h.container=a[6]),c[0]&4096&&(h.playing=a[12]),c[0]&8192&&(h.audio_duration=a[13]),c[0]&2&&(h.i18n=a[1]),c[0]&16&&(h.editable=a[4]),c[0]&8&&(h.handle_reset_value=a[3]),c[0]&4&&(h.waveform_options=a[2]),!t&&c[0]&32&&(t=!0,h.waveform=a[5],qe(()=>t=!1)),!i&&c[0]&65536&&(i=!0,h.trimDuration=a[16],qe(()=>i=!1)),!o&&c[0]&1&&(o=!0,h.mode=a[0],qe(()=>o=!1)),e.$set(h)},i(a){l||(ce(e.$$.fragment,a),l=!0)},o(a){De(e.$$.fragment,a),l=!1},d(a){un(e,a)}}}function fi(n){let e,t,i,o,l,s,u,r,_=(n[15]||n[9])&&n[2].show_recording_waveform&&Ht(n),a=n[7]&&!n[9]&&Jt(n),c=n[5]&&n[9]&&Gt(n);return{c(){e=x("div"),t=x("div"),i=ye(),o=x("div"),l=ye(),_&&_.c(),s=ye(),a&&a.c(),u=ye(),c&&c.c(),$(t,"class","microphone svelte-9n45fh"),$(t,"data-testid","microphone-waveform"),$(o,"data-testid","recording-waveform"),$(e,"class","component-wrapper svelte-9n45fh")},m(h,v){Ie(h,e,v),J(e,t),n[21](t),J(e,i),J(e,o),n[22](o),J(e,l),_&&_.m(e,null),J(e,s),a&&a.m(e,null),J(e,u),c&&c.m(e,null),r=!0},p(h,v){(h[15]||h[9])&&h[2].show_recording_waveform?_?_.p(h,v):(_=Ht(h),_.c(),_.m(e,s)):_&&(_.d(1),_=null),h[7]&&!h[9]?a?(a.p(h,v),v[0]&640&&ce(a,1)):(a=Jt(h),a.c(),ce(a,1),a.m(e,u)):a&&(Ft(),De(a,1,1,()=>{a=null}),Nt()),h[5]&&h[9]?c?(c.p(h,v),v[0]&544&&ce(c,1)):(c=Gt(h),c.c(),ce(c,1),c.m(e,null)):c&&(Ft(),De(c,1,1,()=>{c=null}),Nt())},i(h){r||(ce(a),ce(c),r=!0)},o(h){De(a),De(c),r=!1},d(h){h&&ze(e),n[21](null),n[22](null),_&&_.d(),a&&a.d(),c&&c.d()}}}function di(n,e,t){let{mode:i}=e,{i18n:o}=e,{dispatch_blob:l}=e,{waveform_settings:s}=e,{waveform_options:u={show_recording_waveform:!0}}=e,{handle_reset_value:r}=e,{editable:_=!0}=e,a,c,h=!1,v,m,p,w=null,f,D,E,P=0,y,A=!1,F=0;const T=()=>{clearInterval(y),t(20,y=setInterval(()=>{t(14,P++,P)},1e3))},k=ui(),U=()=>{m&&t(7,m.innerHTML="",m),a!==void 0&&a.destroy(),m&&(a=gt.create({...s,normalize:!1,container:m}),t(8,p=a.registerPlugin(Le.create())),p.startMic())},q=()=>{let b=v;!w||!b||t(5,c=gt.create({container:b,url:w,...s}))},le=async(b,V)=>{t(0,i="edit");const Y=c.getDecodedData();Y&&await Mt(Y,b,V).then(async B=>{await l([B],"change"),await l([B],"stop_recording"),c.destroy(),q()}),k("edit")};ai(()=>{U(),window.addEventListener("keydown",b=>{b.key==="ArrowRight"?Et(c,.1):b.key==="ArrowLeft"&&Et(c,-.1)})});function z(b){fe[b?"unshift":"push"](()=>{m=b,t(7,m)})}function H(b){fe[b?"unshift":"push"](()=>{v=b,t(6,v)})}function R(b){fe[b?"unshift":"push"](()=>{f=b,t(10,f),t(5,c)})}function S(b){fe[b?"unshift":"push"](()=>{D=b,t(11,D),t(5,c)})}function C(b){p=b,t(8,p)}function I(b){c=b,t(5,c)}function ae(b){F=b,t(16,F)}function X(b){i=b,t(0,i)}return n.$$set=b=>{"mode"in b&&t(0,i=b.mode),"i18n"in b&&t(1,o=b.i18n),"dispatch_blob"in b&&t(18,l=b.dispatch_blob),"waveform_settings"in b&&t(19,s=b.waveform_settings),"waveform_options"in b&&t(2,u=b.waveform_options),"handle_reset_value"in b&&t(3,r=b.handle_reset_value),"editable"in b&&t(4,_=b.editable)},n.$$.update=()=>{n.$$.dirty[0]&388&&p?.on("record-start",()=>{if(T(),t(15,A=!0),k("start_recording"),u.show_recording_waveform){let b=m;b&&(b.style.display="block")}}),n.$$.dirty[0]&1835264&&p?.on("record-end",async b=>{t(14,P=0),t(15,A=!1),clearInterval(y);try{const V=await b.arrayBuffer(),B=await new AudioContext({sampleRate:s.sampleRate}).decodeAudioData(V);B&&await Mt(B).then(async K=>{await l([K],"change"),await l([K],"stop_recording")})}catch(V){console.error(V)}}),n.$$.dirty[0]&1048832&&p?.on("record-pause",()=>{k("pause_recording"),clearInterval(y)}),n.$$.dirty[0]&256&&p?.on("record-resume",()=>{T()}),n.$$.dirty[0]&2080&&c?.on("decode",b=>{t(13,E=b),D&&t(11,D.textContent=de(b),D)}),n.$$.dirty[0]&1056&&c?.on("timeupdate",b=>f&&t(10,f.textContent=de(b),f)),n.$$.dirty[0]&32&&c?.on("pause",()=>{k("pause"),t(12,h=!1)}),n.$$.dirty[0]&32&&c?.on("play",()=>{k("play"),t(12,h=!0)}),n.$$.dirty[0]&32&&c?.on("finish",()=>{k("stop"),t(12,h=!1)}),n.$$.dirty[0]&960&&p?.on("record-end",b=>{t(9,w=URL.createObjectURL(b));const V=m,Y=v;V&&(V.style.display="none"),Y&&w&&(Y.innerHTML="",q())})},[i,o,u,r,_,c,v,m,p,w,f,D,h,E,P,A,F,le,l,s,y,z,H,R,S,C,I,ae,X]}class mi extends oi{constructor(e){super(),si(this,e,di,fi,li,{mode:0,i18n:1,dispatch_blob:18,waveform_settings:19,waveform_options:2,handle_reset_value:3,editable:4},null,[-1,-1])}get mode(){return this.$$.ctx[0]}set mode(e){this.$$set({mode:e}),he()}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),he()}get dispatch_blob(){return this.$$.ctx[18]}set dispatch_blob(e){this.$$set({dispatch_blob:e}),he()}get waveform_settings(){return this.$$.ctx[19]}set waveform_settings(e){this.$$set({waveform_settings:e}),he()}get waveform_options(){return this.$$.ctx[2]}set waveform_options(e){this.$$set({waveform_options:e}),he()}get handle_reset_value(){return this.$$.ctx[3]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),he()}get editable(){return this.$$.ctx[4]}set editable(e){this.$$set({editable:e}),he()}}const{SvelteComponent:hi,add_flush_callback:gi,append:G,attr:ee,bind:bi,binding_callbacks:dn,check_outros:pi,create_component:mn,destroy_component:hn,detach:Te,element:oe,flush:ue,group_outros:wi,init:vi,insert:Ue,listen:wt,mount_component:gn,noop:Ne,null_to_empty:Yt,safe_not_equal:ki,set_data:vt,set_style:Kt,space:Be,text:kt,transition_in:Oe,transition_out:We}=window.__gradio__svelte__internal,{onMount:yi}=window.__gradio__svelte__internal;function Qt(n){let e;return{c(){e=oe("div"),Kt(e,"display",n[0]?"block":"none")},m(t,i){Ue(t,e,i),n[11](e)},p(t,i){i&1&&Kt(e,"display",t[0]?"block":"none")},d(t){t&&Te(e),n[11](null)}}}function Di(n){let e,t,i,o=n[4]("audio.record")+"",l,s,u;return{c(){e=oe("button"),t=oe("span"),t.innerHTML='<span class="dot"></span>',i=Be(),l=kt(o),ee(t,"class","record-icon"),ee(e,"class","record-button svelte-1fz19cj")},m(r,_){Ue(r,e,_),G(e,t),G(e,i),G(e,l),s||(u=wt(e,"click",n[14]),s=!0)},p(r,_){_&16&&o!==(o=r[4]("audio.record")+"")&&vt(l,o)},i:Ne,o:Ne,d(r){r&&Te(e),s=!1,u()}}}function Ri(n){let e,t,i,o,l=n[4]("audio.waiting")+"",s,u,r,_;return i=new Bn({}),{c(){e=oe("button"),t=oe("div"),mn(i.$$.fragment),o=Be(),s=kt(l),ee(t,"class","icon svelte-1fz19cj"),ee(e,"class","spinner-button svelte-1fz19cj")},m(a,c){Ue(a,e,c),G(e,t),gn(i,t,null),G(e,o),G(e,s),u=!0,r||(_=wt(e,"click",n[13]),r=!0)},p(a,c){(!u||c&16)&&l!==(l=a[4]("audio.waiting")+"")&&vt(s,l)},i(a){u||(Oe(i.$$.fragment,a),u=!0)},o(a){We(i.$$.fragment,a),u=!1},d(a){a&&Te(e),hn(i),r=!1,_()}}}function Si(n){let e,t,i,o=(n[1]?n[4]("audio.pause"):n[4]("audio.stop"))+"",l,s,u,r;return{c(){e=oe("button"),t=oe("span"),t.innerHTML='<span class="pinger"></span> <span class="dot"></span>',i=Be(),l=kt(o),ee(t,"class","record-icon"),ee(e,"class",s=Yt(n[1]?"stop-button-paused":"stop-button")+" svelte-1fz19cj")},m(_,a){Ue(_,e,a),G(e,t),G(e,i),G(e,l),u||(r=wt(e,"click",n[12]),u=!0)},p(_,a){a&18&&o!==(o=(_[1]?_[4]("audio.pause"):_[4]("audio.stop"))+"")&&vt(l,o),a&2&&s!==(s=Yt(_[1]?"stop-button-paused":"stop-button")+" svelte-1fz19cj")&&ee(e,"class",s)},i:Ne,o:Ne,d(_){_&&Te(e),u=!1,r()}}}function Ei(n){let e,t,i,o,l,s,u,r,_,a=n[5].show_recording_waveform&&Qt(n);const c=[Si,Ri,Di],h=[];function v(w,f){return w[0]&&!w[6]?0:w[0]&&w[6]?1:2}o=v(n),l=h[o]=c[o](n);function m(w){n[15](w)}let p={i18n:n[4]};return n[9]!==void 0&&(p.micDevices=n[9]),u=new sn({props:p}),dn.push(()=>bi(u,"micDevices",m)),{c(){e=oe("div"),a&&a.c(),t=Be(),i=oe("div"),l.c(),s=Be(),mn(u.$$.fragment),ee(i,"class","controls svelte-1fz19cj"),ee(e,"class","mic-wrap svelte-1fz19cj")},m(w,f){Ue(w,e,f),a&&a.m(e,null),G(e,t),G(e,i),h[o].m(i,null),G(i,s),gn(u,i,null),_=!0},p(w,[f]){w[5].show_recording_waveform?a?a.p(w,f):(a=Qt(w),a.c(),a.m(e,t)):a&&(a.d(1),a=null);let D=o;o=v(w),o===D?h[o].p(w,f):(wi(),We(h[D],1,1,()=>{h[D]=null}),pi(),l=h[o],l?l.p(w,f):(l=h[o]=c[o](w),l.c()),Oe(l,1),l.m(i,s));const E={};f&16&&(E.i18n=w[4]),!r&&f&512&&(r=!0,E.micDevices=w[9],gi(()=>r=!1)),u.$set(E)},i(w){_||(Oe(l),Oe(u.$$.fragment,w),_=!0)},o(w){We(l),We(u.$$.fragment,w),_=!1},d(w){w&&Te(e),a&&a.d(),h[o].d(),hn(u)}}}function Mi(n,e,t){let{recording:i=!1}=e,{paused_recording:o=!1}=e,{stop:l}=e,{record:s}=e,{i18n:u}=e,{waveform_settings:r}=e,{waveform_options:_={show_recording_waveform:!0}}=e,{waiting:a=!1}=e,c,h,v,m=[];yi(()=>{p()});const p=()=>{c!==void 0&&c.destroy(),v&&(c=gt.create({...r,height:100,container:v}),t(7,h=c.registerPlugin(Le.create())))};function w(y){dn[y?"unshift":"push"](()=>{v=y,t(8,v)})}const f=()=>{h?.stopMic(),l()},D=()=>{l()},E=()=>{h?.startMic(),s()};function P(y){m=y,t(9,m)}return n.$$set=y=>{"recording"in y&&t(0,i=y.recording),"paused_recording"in y&&t(1,o=y.paused_recording),"stop"in y&&t(2,l=y.stop),"record"in y&&t(3,s=y.record),"i18n"in y&&t(4,u=y.i18n),"waveform_settings"in y&&t(10,r=y.waveform_settings),"waveform_options"in y&&t(5,_=y.waveform_options),"waiting"in y&&t(6,a=y.waiting)},[i,o,l,s,u,_,a,h,v,m,r,w,f,D,E,P]}class Ai extends hi{constructor(e){super(),vi(this,e,Mi,Ei,ki,{recording:0,paused_recording:1,stop:2,record:3,i18n:4,waveform_settings:10,waveform_options:5,waiting:6})}get recording(){return this.$$.ctx[0]}set recording(e){this.$$set({recording:e}),ue()}get paused_recording(){return this.$$.ctx[1]}set paused_recording(e){this.$$set({paused_recording:e}),ue()}get stop(){return this.$$.ctx[2]}set stop(e){this.$$set({stop:e}),ue()}get record(){return this.$$.ctx[3]}set record(e){this.$$set({record:e}),ue()}get i18n(){return this.$$.ctx[4]}set i18n(e){this.$$set({i18n:e}),ue()}get waveform_settings(){return this.$$.ctx[10]}set waveform_settings(e){this.$$set({waveform_settings:e}),ue()}get waveform_options(){return this.$$.ctx[5]}set waveform_options(e){this.$$set({waveform_options:e}),ue()}get waiting(){return this.$$.ctx[6]}set waiting(e){this.$$set({waiting:e}),ue()}}const{SvelteComponent:Ci,add_flush_callback:Ve,append:Xt,attr:Pi,bind:Je,binding_callbacks:Ge,bubble:ge,check_outros:yt,create_component:te,create_slot:Bi,destroy_component:ne,detach:Re,element:Li,empty:bn,flush:L,get_all_dirty_from_scope:zi,get_slot_changes:Ii,group_outros:Dt,init:Ti,insert:Se,mount_component:ie,safe_not_equal:Ui,space:Pe,transition_in:W,transition_out:N,update_slot_base:qi}=window.__gradio__svelte__internal,{onDestroy:ji,createEventDispatcher:Oi}=window.__gradio__svelte__internal;function Wi(n){let e,t,i,o,l;e=new $t({props:{i18n:n[10],download:n[7]?n[1].url:null,absolute:!0}}),e.$on("clear",n[26]),e.$on("edit",n[43]);function s(r){n[44](r)}let u={value:n[1],label:n[3],i18n:n[10],dispatch_blob:n[24],waveform_settings:n[11],waveform_options:n[13],trim_region_settings:n[12],handle_reset_value:n[14],editable:n[15],loop:n[5],interactive:!0};return n[22]!==void 0&&(u.mode=n[22]),i=new Sn({props:u}),Ge.push(()=>Je(i,"mode",s)),i.$on("stop",n[45]),i.$on("play",n[46]),i.$on("pause",n[47]),i.$on("edit",n[48]),{c(){te(e.$$.fragment),t=Pe(),te(i.$$.fragment)},m(r,_){ie(e,r,_),Se(r,t,_),ie(i,r,_),l=!0},p(r,_){const a={};_[0]&1024&&(a.i18n=r[10]),_[0]&130&&(a.download=r[7]?r[1].url:null),e.$set(a);const c={};_[0]&2&&(c.value=r[1]),_[0]&8&&(c.label=r[3]),_[0]&1024&&(c.i18n=r[10]),_[0]&2048&&(c.waveform_settings=r[11]),_[0]&8192&&(c.waveform_options=r[13]),_[0]&4096&&(c.trim_region_settings=r[12]),_[0]&16384&&(c.handle_reset_value=r[14]),_[0]&32768&&(c.editable=r[15]),_[0]&32&&(c.loop=r[5]),!o&&_[0]&4194304&&(o=!0,c.mode=r[22],Ve(()=>o=!1)),i.$set(c)},i(r){l||(W(e.$$.fragment,r),W(i.$$.fragment,r),l=!0)},o(r){N(e.$$.fragment,r),N(i.$$.fragment,r),l=!1},d(r){r&&Re(t),ne(e,r),ne(i,r)}}}function Ni(n){let e,t,i,o;const l=[Hi,Fi],s=[];function u(r,_){return r[2]==="microphone"?0:r[2]==="upload"?1:-1}return~(e=u(n))&&(t=s[e]=l[e](n)),{c(){t&&t.c(),i=bn()},m(r,_){~e&&s[e].m(r,_),Se(r,i,_),o=!0},p(r,_){let a=e;e=u(r),e===a?~e&&s[e].p(r,_):(t&&(Dt(),N(s[a],1,1,()=>{s[a]=null}),yt()),~e?(t=s[e],t?t.p(r,_):(t=s[e]=l[e](r),t.c()),W(t,1),t.m(i.parentNode,i)):t=null)},i(r){o||(W(t),o=!0)},o(r){N(t),o=!1},d(r){r&&Re(i),~e&&s[e].d(r)}}}function Fi(n){let e,t,i;function o(s){n[41](s)}let l={filetype:"audio/aac,audio/midi,audio/mpeg,audio/ogg,audio/wav,audio/x-wav,audio/opus,audio/webm,audio/flac,audio/vnd.rn-realaudio,audio/x-ms-wma,audio/x-aiff,audio/amr,audio/*",root:n[4],max_file_size:n[16],upload:n[17],stream_handler:n[18],$$slots:{default:[Vi]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.dragging=n[0]),e=new An({props:l}),Ge.push(()=>Je(e,"dragging",o)),e.$on("load",n[27]),e.$on("error",n[42]),{c(){te(e.$$.fragment)},m(s,u){ie(e,s,u),i=!0},p(s,u){const r={};u[0]&16&&(r.root=s[4]),u[0]&65536&&(r.max_file_size=s[16]),u[0]&131072&&(r.upload=s[17]),u[0]&262144&&(r.stream_handler=s[18]),u[1]&524288&&(r.$$scope={dirty:u,ctx:s}),!t&&u[0]&1&&(t=!0,r.dragging=s[0],Ve(()=>t=!1)),e.$set(r)},i(s){i||(W(e.$$.fragment,s),i=!0)},o(s){N(e.$$.fragment,s),i=!1},d(s){ne(e,s)}}}function Hi(n){let e,t,i,o,l,s;e=new $t({props:{i18n:n[10],absolute:!0}}),e.$on("clear",n[26]);const u=[Gi,Ji],r=[];function _(a,c){return a[9]?0:1}return i=_(n),o=r[i]=u[i](n),{c(){te(e.$$.fragment),t=Pe(),o.c(),l=bn()},m(a,c){ie(e,a,c),Se(a,t,c),r[i].m(a,c),Se(a,l,c),s=!0},p(a,c){const h={};c[0]&1024&&(h.i18n=a[10]),e.$set(h);let v=i;i=_(a),i===v?r[i].p(a,c):(Dt(),N(r[v],1,1,()=>{r[v]=null}),yt(),o=r[i],o?o.p(a,c):(o=r[i]=u[i](a),o.c()),W(o,1),o.m(l.parentNode,l))},i(a){s||(W(e.$$.fragment,a),W(o),s=!0)},o(a){N(e.$$.fragment,a),N(o),s=!1},d(a){a&&(Re(t),Re(l)),ne(e,a),r[i].d(a)}}}function Vi(n){let e;const t=n[36].default,i=Bi(t,n,n[50],null);return{c(){i&&i.c()},m(o,l){i&&i.m(o,l),e=!0},p(o,l){i&&i.p&&(!e||l[1]&524288)&&qi(i,t,o,o[50],e?Ii(t,o[50],l,null):zi(o[50]),null)},i(o){e||(W(i,o),e=!0)},o(o){N(i,o),e=!1},d(o){i&&i.d(o)}}}function Ji(n){let e,t,i;function o(s){n[37](s)}let l={i18n:n[10],editable:n[15],dispatch_blob:n[24],waveform_settings:n[11],waveform_options:n[13],handle_reset_value:n[14]};return n[22]!==void 0&&(l.mode=n[22]),e=new mi({props:l}),Ge.push(()=>Je(e,"mode",o)),e.$on("start_recording",n[38]),e.$on("pause_recording",n[39]),e.$on("stop_recording",n[40]),{c(){te(e.$$.fragment)},m(s,u){ie(e,s,u),i=!0},p(s,u){const r={};u[0]&1024&&(r.i18n=s[10]),u[0]&32768&&(r.editable=s[15]),u[0]&2048&&(r.waveform_settings=s[11]),u[0]&8192&&(r.waveform_options=s[13]),u[0]&16384&&(r.handle_reset_value=s[14]),!t&&u[0]&4194304&&(t=!0,r.mode=s[22],Ve(()=>t=!1)),e.$set(r)},i(s){i||(W(e.$$.fragment,s),i=!0)},o(s){N(e.$$.fragment,s),i=!1},d(s){ne(e,s)}}}function Gi(n){let e,t;return e=new Ai({props:{record:n[25],recording:n[21],stop:n[28],i18n:n[10],waveform_settings:n[11],waveform_options:n[13],waiting:n[20]==="waiting"}}),{c(){te(e.$$.fragment)},m(i,o){ie(e,i,o),t=!0},p(i,o){const l={};o[0]&2097152&&(l.recording=i[21]),o[0]&1024&&(l.i18n=i[10]),o[0]&2048&&(l.waveform_settings=i[11]),o[0]&8192&&(l.waveform_options=i[13]),o[0]&1048576&&(l.waiting=i[20]==="waiting"),e.$set(l)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){N(e.$$.fragment,i),t=!1},d(i){ne(e,i)}}}function Yi(n){let e,t,i,o,l,s,u,r,_,a,c;e=new Cn({props:{show_label:n[6],Icon:Pn,float:n[2]==="upload"&&n[1]===null,label:n[3]||n[10]("audio.audio")}}),o=new zn({props:{time_limit:n[19]}});const h=[Ni,Wi],v=[];function m(f,D){return f[1]===null||f[9]?0:1}s=m(n),u=v[s]=h[s](n);function p(f){n[49](f)}let w={sources:n[8],handle_clear:n[26]};return n[2]!==void 0&&(w.active_source=n[2]),_=new Ln({props:w}),Ge.push(()=>Je(_,"active_source",p)),{c(){te(e.$$.fragment),t=Pe(),i=Li("div"),te(o.$$.fragment),l=Pe(),u.c(),r=Pe(),te(_.$$.fragment),Pi(i,"class","audio-container svelte-cbyffp")},m(f,D){ie(e,f,D),Se(f,t,D),Se(f,i,D),ie(o,i,null),Xt(i,l),v[s].m(i,null),Xt(i,r),ie(_,i,null),c=!0},p(f,D){const E={};D[0]&64&&(E.show_label=f[6]),D[0]&6&&(E.float=f[2]==="upload"&&f[1]===null),D[0]&1032&&(E.label=f[3]||f[10]("audio.audio")),e.$set(E);const P={};D[0]&524288&&(P.time_limit=f[19]),o.$set(P);let y=s;s=m(f),s===y?v[s].p(f,D):(Dt(),N(v[y],1,1,()=>{v[y]=null}),yt(),u=v[s],u?u.p(f,D):(u=v[s]=h[s](f),u.c()),W(u,1),u.m(i,r));const A={};D[0]&256&&(A.sources=f[8]),!a&&D[0]&4&&(a=!0,A.active_source=f[2],Ve(()=>a=!1)),_.$set(A)},i(f){c||(W(e.$$.fragment,f),W(o.$$.fragment,f),W(u),W(_.$$.fragment,f),c=!0)},o(f){N(e.$$.fragment,f),N(o.$$.fragment,f),N(u),N(_.$$.fragment,f),c=!1},d(f){f&&(Re(t),Re(i)),ne(e,f),ne(o),v[s].d(),ne(_)}}}const Zt=44;function Ki(n,e,t){let{$$slots:i={},$$scope:o}=e,{value:l=null}=e,{label:s}=e,{root:u}=e,{loop:r}=e,{show_label:_=!0}=e,{show_download_button:a=!1}=e,{sources:c=["microphone","upload"]}=e,{pending:h=!1}=e,{streaming:v=!1}=e,{i18n:m}=e,{waveform_settings:p}=e,{trim_region_settings:w={}}=e,{waveform_options:f={}}=e,{dragging:D}=e,{active_source:E}=e,{handle_reset_value:P=()=>{}}=e,{editable:y=!0}=e,{max_file_size:A=null}=e,{upload:F}=e,{stream_handler:T}=e,{stream_every:k}=e,U=null,q="closed";const le=d=>{d==="closed"?(t(19,U=null),t(20,q="closed")):d==="waiting"?t(20,q="waiting"):t(20,q="open")},z=d=>{H&&t(19,U=d)};let H=!1,R,S="",C,I=[],ae=!1,X=!1,b=[],V;function Y(){V=[At(()=>import("./module-CVOMZVHM.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),At(()=>import("./module-BA06XY8_.js"),__vite__mapDeps([4,1]),import.meta.url)]}v&&Y();const B=Oi(),K=async(d,O)=>{let Z=new File(d,"audio.wav");const me=await Mn([Z],O==="stream");t(1,l=(await F(me,u,void 0,A||void 0))?.filter(Boolean)[0]),B(O,l)};ji(()=>{v&&R&&R.state!=="inactive"&&R.stop()});async function Ye(){let d;try{d=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(O){if(!navigator.mediaDevices){B("error",m("audio.no_device_support"));return}if(O instanceof DOMException&&O.name=="NotAllowedError"){B("error",m("audio.allow_recording_access"));return}throw O}if(d!=null){if(v){const[{MediaRecorder:O,register:Z},{connect:me}]=await Promise.all(V);await Z(await me()),R=new O(d,{mimeType:"audio/wav"}),R.addEventListener("dataavailable",Ke)}else R=new MediaRecorder(d),R.addEventListener("dataavailable",O=>{b.push(O.data)});R.addEventListener("stop",async()=>{t(21,H=!1),await K(b,"change"),await K(b,"stop_recording"),b=[]}),X=!0}}async function Ke(d){let O=await d.data.arrayBuffer(),Z=new Uint8Array(O);if(C||(t(33,C=new Uint8Array(O.slice(0,Zt))),Z=new Uint8Array(O.slice(Zt))),h)I.push(Z);else{let me=[C].concat(I,[Z]);if(!H||q==="waiting")return;K(me,"stream"),t(34,I=[])}}async function Qe(){t(21,H=!0),B("start_recording"),X||await Ye(),t(33,C=void 0),v&&R.start(k*1e3)}function Xe(){B("change",null),B("clear"),t(22,S=""),t(1,l=null)}function Ze({detail:d}){t(1,l=d),B("change",d),B("upload",d)}function $e(){t(21,H=!1),v&&(B("close_stream"),B("stop_recording"),R.stop(),h&&t(35,ae=!0),K(b,"stop_recording"),B("clear"),t(22,S=""))}function xe(d){S=d,t(22,S)}function et(d){ge.call(this,n,d)}function tt(d){ge.call(this,n,d)}function nt(d){ge.call(this,n,d)}function it(d){D=d,t(0,D)}const ot=({detail:d})=>B("error",d),st=()=>t(22,S="edit");function rt(d){S=d,t(22,S)}function lt(d){ge.call(this,n,d)}function at(d){ge.call(this,n,d)}function ut(d){ge.call(this,n,d)}function _t(d){ge.call(this,n,d)}function ct(d){E=d,t(2,E)}return n.$$set=d=>{"value"in d&&t(1,l=d.value),"label"in d&&t(3,s=d.label),"root"in d&&t(4,u=d.root),"loop"in d&&t(5,r=d.loop),"show_label"in d&&t(6,_=d.show_label),"show_download_button"in d&&t(7,a=d.show_download_button),"sources"in d&&t(8,c=d.sources),"pending"in d&&t(29,h=d.pending),"streaming"in d&&t(9,v=d.streaming),"i18n"in d&&t(10,m=d.i18n),"waveform_settings"in d&&t(11,p=d.waveform_settings),"trim_region_settings"in d&&t(12,w=d.trim_region_settings),"waveform_options"in d&&t(13,f=d.waveform_options),"dragging"in d&&t(0,D=d.dragging),"active_source"in d&&t(2,E=d.active_source),"handle_reset_value"in d&&t(14,P=d.handle_reset_value),"editable"in d&&t(15,y=d.editable),"max_file_size"in d&&t(16,A=d.max_file_size),"upload"in d&&t(17,F=d.upload),"stream_handler"in d&&t(18,T=d.stream_handler),"stream_every"in d&&t(30,k=d.stream_every),"$$scope"in d&&t(50,o=d.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&1&&B("drag",D),n.$$.dirty[0]&536870912|n.$$.dirty[1]&28&&ae&&h===!1&&(t(35,ae=!1),C&&I)){let d=[C].concat(I);t(34,I=[]),K(d,"stream")}},[D,l,E,s,u,r,_,a,c,v,m,p,w,f,P,y,A,F,T,U,q,H,S,B,K,Qe,Xe,Ze,$e,h,k,le,z,C,I,ae,i,xe,et,tt,nt,it,ot,st,rt,lt,at,ut,_t,ct,o]}class Qi extends Ci{constructor(e){super(),Ti(this,e,Ki,Yi,Ui,{value:1,label:3,root:4,loop:5,show_label:6,show_download_button:7,sources:8,pending:29,streaming:9,i18n:10,waveform_settings:11,trim_region_settings:12,waveform_options:13,dragging:0,active_source:2,handle_reset_value:14,editable:15,max_file_size:16,upload:17,stream_handler:18,stream_every:30,modify_stream:31,set_time_limit:32},null,[-1,-1])}get value(){return this.$$.ctx[1]}set value(e){this.$$set({value:e}),L()}get label(){return this.$$.ctx[3]}set label(e){this.$$set({label:e}),L()}get root(){return this.$$.ctx[4]}set root(e){this.$$set({root:e}),L()}get loop(){return this.$$.ctx[5]}set loop(e){this.$$set({loop:e}),L()}get show_label(){return this.$$.ctx[6]}set show_label(e){this.$$set({show_label:e}),L()}get show_download_button(){return this.$$.ctx[7]}set show_download_button(e){this.$$set({show_download_button:e}),L()}get sources(){return this.$$.ctx[8]}set sources(e){this.$$set({sources:e}),L()}get pending(){return this.$$.ctx[29]}set pending(e){this.$$set({pending:e}),L()}get streaming(){return this.$$.ctx[9]}set streaming(e){this.$$set({streaming:e}),L()}get i18n(){return this.$$.ctx[10]}set i18n(e){this.$$set({i18n:e}),L()}get waveform_settings(){return this.$$.ctx[11]}set waveform_settings(e){this.$$set({waveform_settings:e}),L()}get trim_region_settings(){return this.$$.ctx[12]}set trim_region_settings(e){this.$$set({trim_region_settings:e}),L()}get waveform_options(){return this.$$.ctx[13]}set waveform_options(e){this.$$set({waveform_options:e}),L()}get dragging(){return this.$$.ctx[0]}set dragging(e){this.$$set({dragging:e}),L()}get active_source(){return this.$$.ctx[2]}set active_source(e){this.$$set({active_source:e}),L()}get handle_reset_value(){return this.$$.ctx[14]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),L()}get editable(){return this.$$.ctx[15]}set editable(e){this.$$set({editable:e}),L()}get max_file_size(){return this.$$.ctx[16]}set max_file_size(e){this.$$set({max_file_size:e}),L()}get upload(){return this.$$.ctx[17]}set upload(e){this.$$set({upload:e}),L()}get stream_handler(){return this.$$.ctx[18]}set stream_handler(e){this.$$set({stream_handler:e}),L()}get stream_every(){return this.$$.ctx[30]}set stream_every(e){this.$$set({stream_every:e}),L()}get modify_stream(){return this.$$.ctx[31]}get set_time_limit(){return this.$$.ctx[32]}}const Xi=Qi,{SvelteComponent:Zi,add_flush_callback:dt,assign:pn,bind:mt,binding_callbacks:ht,check_outros:$i,create_component:be,destroy_component:pe,detach:Rt,empty:xi,flush:M,get_spread_object:wn,get_spread_update:vn,group_outros:eo,init:to,insert:St,mount_component:we,safe_not_equal:no,space:kn,transition_in:se,transition_out:re}=window.__gradio__svelte__internal,{afterUpdate:io,onMount:oo}=window.__gradio__svelte__internal;function so(n){let e,t;return e=new en({props:{variant:n[0]===null&&n[23]==="upload"?"dashed":"solid",border_mode:n[25]?"focus":"base",padding:!1,allow_overflow:!1,elem_id:n[3],elem_classes:n[4],visible:n[5],container:n[11],scale:n[12],min_width:n[13],$$slots:{default:[ao]},$$scope:{ctx:n}}}),{c(){be(e.$$.fragment)},m(i,o){we(e,i,o),t=!0},p(i,o){const l={};o[0]&8388609&&(l.variant=i[0]===null&&i[23]==="upload"?"dashed":"solid"),o[0]&33554432&&(l.border_mode=i[25]?"focus":"base"),o[0]&8&&(l.elem_id=i[3]),o[0]&16&&(l.elem_classes=i[4]),o[0]&32&&(l.visible=i[5]),o[0]&2048&&(l.container=i[11]),o[0]&4096&&(l.scale=i[12]),o[0]&8192&&(l.min_width=i[13]),o[0]&134137735|o[2]&1&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){t||(se(e.$$.fragment,i),t=!0)},o(i){re(e.$$.fragment,i),t=!1},d(i){pe(e,i)}}}function ro(n){let e,t;return e=new en({props:{variant:"solid",border_mode:n[25]?"focus":"base",padding:!1,allow_overflow:!1,elem_id:n[3],elem_classes:n[4],visible:n[5],container:n[11],scale:n[12],min_width:n[13],$$slots:{default:[uo]},$$scope:{ctx:n}}}),{c(){be(e.$$.fragment)},m(i,o){we(e,i,o),t=!0},p(i,o){const l={};o[0]&33554432&&(l.border_mode=i[25]?"focus":"base"),o[0]&8&&(l.elem_id=i[3]),o[0]&16&&(l.elem_classes=i[4]),o[0]&32&&(l.visible=i[5]),o[0]&2048&&(l.container=i[11]),o[0]&4096&&(l.scale=i[12]),o[0]&8192&&(l.min_width=i[13]),o[0]&71812355|o[2]&1&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){t||(se(e.$$.fragment,i),t=!0)},o(i){re(e.$$.fragment,i),t=!1},d(i){pe(e,i)}}}function lo(n){let e,t;return e=new Tn({props:{i18n:n[22].i18n,type:"audio"}}),{c(){be(e.$$.fragment)},m(i,o){we(e,i,o),t=!0},p(i,o){const l={};o[0]&4194304&&(l.i18n=i[22].i18n),e.$set(l)},i(i){t||(se(e.$$.fragment,i),t=!0)},o(i){re(e.$$.fragment,i),t=!1},d(i){pe(e,i)}}}function ao(n){let e,t,i,o,l,s,u;const r=[{autoscroll:n[22].autoscroll},{i18n:n[22].i18n},n[1]];let _={};for(let m=0;m<r.length;m+=1)_=pn(_,r[m]);e=new xt({props:_}),e.$on("clear_status",n[42]);function a(m){n[43](m)}function c(m){n[44](m)}function h(m){n[45](m)}let v={label:n[8],show_label:n[10],show_download_button:n[15],value:n[0],root:n[9],sources:n[7],active_source:n[23],pending:n[19],streaming:n[20],loop:n[14],max_file_size:n[22].max_file_size,handle_reset_value:n[27],editable:n[17],i18n:n[22].i18n,waveform_settings:n[26],waveform_options:n[18],trim_region_settings:n[28],stream_every:n[21],upload:n[22].client.upload,stream_handler:n[22].client.stream,$$slots:{default:[lo]},$$scope:{ctx:n}};return n[25]!==void 0&&(v.dragging=n[25]),n[24]!==void 0&&(v.modify_stream=n[24]),n[2]!==void 0&&(v.set_time_limit=n[2]),i=new Xi({props:v}),ht.push(()=>mt(i,"dragging",a)),ht.push(()=>mt(i,"modify_stream",c)),ht.push(()=>mt(i,"set_time_limit",h)),i.$on("change",n[46]),i.$on("stream",n[47]),i.$on("drag",n[48]),i.$on("edit",n[49]),i.$on("play",n[50]),i.$on("pause",n[51]),i.$on("stop",n[52]),i.$on("start_recording",n[53]),i.$on("pause_recording",n[54]),i.$on("stop_recording",n[55]),i.$on("upload",n[56]),i.$on("clear",n[57]),i.$on("error",n[29]),i.$on("close_stream",n[58]),{c(){be(e.$$.fragment),t=kn(),be(i.$$.fragment)},m(m,p){we(e,m,p),St(m,t,p),we(i,m,p),u=!0},p(m,p){const w=p[0]&4194306?vn(r,[p[0]&4194304&&{autoscroll:m[22].autoscroll},p[0]&4194304&&{i18n:m[22].i18n},p[0]&2&&wn(m[1])]):{};e.$set(w);const f={};p[0]&256&&(f.label=m[8]),p[0]&1024&&(f.show_label=m[10]),p[0]&32768&&(f.show_download_button=m[15]),p[0]&1&&(f.value=m[0]),p[0]&512&&(f.root=m[9]),p[0]&128&&(f.sources=m[7]),p[0]&8388608&&(f.active_source=m[23]),p[0]&524288&&(f.pending=m[19]),p[0]&1048576&&(f.streaming=m[20]),p[0]&16384&&(f.loop=m[14]),p[0]&4194304&&(f.max_file_size=m[22].max_file_size),p[0]&131072&&(f.editable=m[17]),p[0]&4194304&&(f.i18n=m[22].i18n),p[0]&67108864&&(f.waveform_settings=m[26]),p[0]&262144&&(f.waveform_options=m[18]),p[0]&2097152&&(f.stream_every=m[21]),p[0]&4194304&&(f.upload=m[22].client.upload),p[0]&4194304&&(f.stream_handler=m[22].client.stream),p[0]&4194304|p[2]&1&&(f.$$scope={dirty:p,ctx:m}),!o&&p[0]&33554432&&(o=!0,f.dragging=m[25],dt(()=>o=!1)),!l&&p[0]&16777216&&(l=!0,f.modify_stream=m[24],dt(()=>l=!1)),!s&&p[0]&4&&(s=!0,f.set_time_limit=m[2],dt(()=>s=!1)),i.$set(f)},i(m){u||(se(e.$$.fragment,m),se(i.$$.fragment,m),u=!0)},o(m){re(e.$$.fragment,m),re(i.$$.fragment,m),u=!1},d(m){m&&Rt(t),pe(e,m),pe(i,m)}}}function uo(n){let e,t,i,o;const l=[{autoscroll:n[22].autoscroll},{i18n:n[22].i18n},n[1]];let s={};for(let u=0;u<l.length;u+=1)s=pn(s,l[u]);return e=new xt({props:s}),e.$on("clear_status",n[36]),i=new En({props:{i18n:n[22].i18n,show_label:n[10],show_download_button:n[15],show_share_button:n[16],value:n[0],label:n[8],loop:n[14],waveform_settings:n[26],waveform_options:n[18],editable:n[17]}}),i.$on("share",n[37]),i.$on("error",n[38]),i.$on("play",n[39]),i.$on("pause",n[40]),i.$on("stop",n[41]),{c(){be(e.$$.fragment),t=kn(),be(i.$$.fragment)},m(u,r){we(e,u,r),St(u,t,r),we(i,u,r),o=!0},p(u,r){const _=r[0]&4194306?vn(l,[r[0]&4194304&&{autoscroll:u[22].autoscroll},r[0]&4194304&&{i18n:u[22].i18n},r[0]&2&&wn(u[1])]):{};e.$set(_);const a={};r[0]&4194304&&(a.i18n=u[22].i18n),r[0]&1024&&(a.show_label=u[10]),r[0]&32768&&(a.show_download_button=u[15]),r[0]&65536&&(a.show_share_button=u[16]),r[0]&1&&(a.value=u[0]),r[0]&256&&(a.label=u[8]),r[0]&16384&&(a.loop=u[14]),r[0]&67108864&&(a.waveform_settings=u[26]),r[0]&262144&&(a.waveform_options=u[18]),r[0]&131072&&(a.editable=u[17]),i.$set(a)},i(u){o||(se(e.$$.fragment,u),se(i.$$.fragment,u),o=!0)},o(u){re(e.$$.fragment,u),re(i.$$.fragment,u),o=!1},d(u){u&&Rt(t),pe(e,u),pe(i,u)}}}function _o(n){let e,t,i,o;const l=[ro,so],s=[];function u(r,_){return r[6]?1:0}return e=u(n),t=s[e]=l[e](n),{c(){t.c(),i=xi()},m(r,_){s[e].m(r,_),St(r,i,_),o=!0},p(r,_){let a=e;e=u(r),e===a?s[e].p(r,_):(eo(),re(s[a],1,1,()=>{s[a]=null}),$i(),t=s[e],t?t.p(r,_):(t=s[e]=l[e](r),t.c()),se(t,1),t.m(i.parentNode,i))},i(r){o||(se(t),o=!0)},o(r){re(t),o=!1},d(r){r&&Rt(i),s[e].d(r)}}}function co(n,e,t){let{value_is_output:i=!1}=e,{elem_id:o=""}=e,{elem_classes:l=[]}=e,{visible:s=!0}=e,{interactive:u}=e,{value:r=null}=e,{sources:_}=e,{label:a}=e,{root:c}=e,{show_label:h}=e,{container:v=!0}=e,{scale:m=null}=e,{min_width:p=void 0}=e,{loading_status:w}=e,{autoplay:f=!1}=e,{loop:D=!1}=e,{show_download_button:E}=e,{show_share_button:P=!1}=e,{editable:y=!0}=e,{waveform_options:A={}}=e,{pending:F}=e,{streaming:T}=e,{stream_every:k}=e,U="closed",q;function le(g){U=g,q(g)}const z=()=>U;let{set_time_limit:H}=e,{gradio:R}=e,S=null,C,I=r;const ae=()=>{I===null||r===I||t(0,r=I)};let X,b,V="darkorange";oo(()=>{V=getComputedStyle(document?.documentElement).getPropertyValue("--color-accent"),B(),t(26,b.waveColor=A.waveform_color||"#9ca3af",b),t(26,b.progressColor=A.waveform_progress_color||V,b),t(26,b.mediaControls=A.show_controls,b),t(26,b.sampleRate=A.sample_rate||44100,b)});const Y={color:A.trim_region_color,drag:!0,resize:!0};function B(){document.documentElement.style.setProperty("--trim-region-color",Y.color||V)}function K({detail:g}){const[yn,Dn]=g.includes("Invalid file type")?["warning","complete"]:["error","error"];t(1,w=w||{}),t(1,w.status=Dn,w),t(1,w.message=g,w),R.dispatch(yn,g)}io(()=>{t(30,i=!1)});const Ye=()=>R.dispatch("clear_status",w),Ke=g=>R.dispatch("share",g.detail),Qe=g=>R.dispatch("error",g.detail),Xe=()=>R.dispatch("play"),Ze=()=>R.dispatch("pause"),$e=()=>R.dispatch("stop"),xe=()=>R.dispatch("clear_status",w);function et(g){X=g,t(25,X)}function tt(g){q=g,t(24,q)}function nt(g){H=g,t(2,H)}const it=({detail:g})=>t(0,r=g),ot=({detail:g})=>{t(0,r=g),R.dispatch("stream",r)},st=({detail:g})=>t(25,X=g),rt=()=>R.dispatch("edit"),lt=()=>R.dispatch("play"),at=()=>R.dispatch("pause"),ut=()=>R.dispatch("stop"),_t=()=>R.dispatch("start_recording"),ct=()=>R.dispatch("pause_recording"),d=g=>R.dispatch("stop_recording"),O=()=>R.dispatch("upload"),Z=()=>R.dispatch("clear"),me=()=>R.dispatch("close_stream","stream");return n.$$set=g=>{"value_is_output"in g&&t(30,i=g.value_is_output),"elem_id"in g&&t(3,o=g.elem_id),"elem_classes"in g&&t(4,l=g.elem_classes),"visible"in g&&t(5,s=g.visible),"interactive"in g&&t(6,u=g.interactive),"value"in g&&t(0,r=g.value),"sources"in g&&t(7,_=g.sources),"label"in g&&t(8,a=g.label),"root"in g&&t(9,c=g.root),"show_label"in g&&t(10,h=g.show_label),"container"in g&&t(11,v=g.container),"scale"in g&&t(12,m=g.scale),"min_width"in g&&t(13,p=g.min_width),"loading_status"in g&&t(1,w=g.loading_status),"autoplay"in g&&t(31,f=g.autoplay),"loop"in g&&t(14,D=g.loop),"show_download_button"in g&&t(15,E=g.show_download_button),"show_share_button"in g&&t(16,P=g.show_share_button),"editable"in g&&t(17,y=g.editable),"waveform_options"in g&&t(18,A=g.waveform_options),"pending"in g&&t(19,F=g.pending),"streaming"in g&&t(20,T=g.streaming),"stream_every"in g&&t(21,k=g.stream_every),"set_time_limit"in g&&t(2,H=g.set_time_limit),"gradio"in g&&t(22,R=g.gradio)},n.$$.update=()=>{n.$$.dirty[0]&1|n.$$.dirty[1]&16&&r&&I===null&&t(35,I=r),n.$$.dirty[0]&1077936129|n.$$.dirty[1]&8&&JSON.stringify(r)!==JSON.stringify(S)&&(t(34,S=r),R.dispatch("change"),i||R.dispatch("input")),n.$$.dirty[0]&8388736&&!C&&_&&t(23,C=_[0]),n.$$.dirty[1]&1&&t(26,b={height:50,barWidth:2,barGap:3,cursorWidth:2,cursorColor:"#ddd5e9",autoplay:f,barRadius:10,dragToSeek:!0,normalize:!0,minPxPerSec:20})},[r,w,H,o,l,s,u,_,a,c,h,v,m,p,D,E,P,y,A,F,T,k,R,C,q,X,b,ae,Y,K,i,f,le,z,S,I,Ye,Ke,Qe,Xe,Ze,$e,xe,et,tt,nt,it,ot,st,rt,lt,at,ut,_t,ct,d,O,Z,me]}class fo extends Zi{constructor(e){super(),to(this,e,co,_o,no,{value_is_output:30,elem_id:3,elem_classes:4,visible:5,interactive:6,value:0,sources:7,label:8,root:9,show_label:10,container:11,scale:12,min_width:13,loading_status:1,autoplay:31,loop:14,show_download_button:15,show_share_button:16,editable:17,waveform_options:18,pending:19,streaming:20,stream_every:21,modify_stream_state:32,get_stream_state:33,set_time_limit:2,gradio:22},null,[-1,-1,-1])}get value_is_output(){return this.$$.ctx[30]}set value_is_output(e){this.$$set({value_is_output:e}),M()}get elem_id(){return this.$$.ctx[3]}set elem_id(e){this.$$set({elem_id:e}),M()}get elem_classes(){return this.$$.ctx[4]}set elem_classes(e){this.$$set({elem_classes:e}),M()}get visible(){return this.$$.ctx[5]}set visible(e){this.$$set({visible:e}),M()}get interactive(){return this.$$.ctx[6]}set interactive(e){this.$$set({interactive:e}),M()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),M()}get sources(){return this.$$.ctx[7]}set sources(e){this.$$set({sources:e}),M()}get label(){return this.$$.ctx[8]}set label(e){this.$$set({label:e}),M()}get root(){return this.$$.ctx[9]}set root(e){this.$$set({root:e}),M()}get show_label(){return this.$$.ctx[10]}set show_label(e){this.$$set({show_label:e}),M()}get container(){return this.$$.ctx[11]}set container(e){this.$$set({container:e}),M()}get scale(){return this.$$.ctx[12]}set scale(e){this.$$set({scale:e}),M()}get min_width(){return this.$$.ctx[13]}set min_width(e){this.$$set({min_width:e}),M()}get loading_status(){return this.$$.ctx[1]}set loading_status(e){this.$$set({loading_status:e}),M()}get autoplay(){return this.$$.ctx[31]}set autoplay(e){this.$$set({autoplay:e}),M()}get loop(){return this.$$.ctx[14]}set loop(e){this.$$set({loop:e}),M()}get show_download_button(){return this.$$.ctx[15]}set show_download_button(e){this.$$set({show_download_button:e}),M()}get show_share_button(){return this.$$.ctx[16]}set show_share_button(e){this.$$set({show_share_button:e}),M()}get editable(){return this.$$.ctx[17]}set editable(e){this.$$set({editable:e}),M()}get waveform_options(){return this.$$.ctx[18]}set waveform_options(e){this.$$set({waveform_options:e}),M()}get pending(){return this.$$.ctx[19]}set pending(e){this.$$set({pending:e}),M()}get streaming(){return this.$$.ctx[20]}set streaming(e){this.$$set({streaming:e}),M()}get stream_every(){return this.$$.ctx[21]}set stream_every(e){this.$$set({stream_every:e}),M()}get modify_stream_state(){return this.$$.ctx[32]}get get_stream_state(){return this.$$.ctx[33]}get set_time_limit(){return this.$$.ctx[2]}set set_time_limit(e){this.$$set({set_time_limit:e}),M()}get gradio(){return this.$$.ctx[22]}set gradio(e){this.$$set({gradio:e}),M()}}const Oo=fo;export{Fo as BaseExample,Xi as BaseInteractiveAudio,Sn as BasePlayer,En as BaseStaticAudio,Oo as default};
//# sourceMappingURL=index--N7KVXuL.js.map
